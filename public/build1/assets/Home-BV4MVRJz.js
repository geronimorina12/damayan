import{r as c,s as $,f as a,o as r,b as e,h as k,u as g,F as L,G as F,t as i,e as V,J as K,W as N,a as M,g as W,w as j,S as G}from"./app-ukGeU6Fu.js";import{A as J}from"./AdminLayout-CxBBxh6C.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const q={class:"main-section bg-light"},z={key:0,class:"table-responsive"},Q={class:"table table-bordered align-middle text-center"},X={class:"form-check form-switch d-inline-flex justify-content-center"},Y=["checked"],Z={class:"d-flex flex-row justify-content-center align-items-center action-buttons"},ee=["onClick"],te=["onClick"],le=["disabled","onClick"],oe={key:1,class:"container text-center mt-3"},se={key:2,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{"background-color":"rgba(0,0,0,0.5)"}},ne={class:"modal-dialog modal-dialog-centered",role:"document"},ae={class:"modal-content"},re={class:"modal-header"},ie={class:"modal-title"},ce={key:0,class:"modal-body"},ue={key:0},de={class:"table table-bordered text-center mt-3"},fe={key:0},ve={class:"text-success fw-bold"},be={class:"text-success fw-bold"},me={key:1},he={key:1,class:"modal-body"},ye={class:"modal-footer"},_e={__name:"Official",props:{officials:{type:Array,default:()=>[]}},setup(S){const w=S;let y=c([]);const h=c(!1),_=c(""),C=c(""),d=c(""),b=c(null),p=c(null),u=c(null),m=c(0),A=c(null),O=(t,l,v,n=null)=>{_.value=t,C.value=l,d.value="confirm",b.value=v,p.value=n,h.value=!0},f=(t,l)=>{_.value=t,C.value=l,d.value="alert",h.value=!0},D=()=>{b.value&&p.value?b.value(p.value):b.value&&b.value(),h.value=!1},x=()=>{h.value=!1,b.value=null,p.value=null,u.value=null,m.value=0};$(()=>w.officials,t=>{y.value=t},{immediate:!0});const E=t=>{O("Delete Official Permanently","Are you sure you want to delete this official permanently? This action cannot be undone.",I,t)},I=t=>{N.delete(route("officialArchive.deleteOfficial",{id:t}),{onSuccess:()=>{f("Success","Official deleted successfully...")},onError:l=>{console.log("An error occurred while deleting data.",l),f("Error","An error occurred while deleting the official.")}})},P=(t,l)=>{O("Restore Official","Are you sure you want to restore this official?",R,{id:t,position:l})},R=t=>{const{id:l,position:v}=t;v!=="collector"?N.post(route("officialArchived.restoreOfficial",{id:l}),{onSuccess:()=>{f("Success","Official restored successfully...")},onError:n=>{console.log("An error occurred while restoring data.",n),f("Error","An error occurred while restoring the official.")}}):N.post(route("officialArchived.collector.restore",{id:l}),{onSuccess:()=>{f("Success","Official restored successfully...")},onError:n=>{console.log("An error occurred while restoring data.",n),f("Error","An error occurred while restoring the official.")}})},T=t=>{if(!t)return"N/A";const l=new Date(t);if(isNaN(l))return"N/A";const v={year:"numeric"};return l.toLocaleDateString(void 0,v)},s=async t=>{A.value=t,await o(t.id),_.value=`Transaction Info - ${t.name}`,d.value="transaction",h.value=!0},o=async t=>{try{const l=await K.get(`/contribution/list/${t}`);u.value=Array.isArray(l.data)?l.data:[l.data],m.value=u.value.reduce((v,n)=>v+Number(n.amount||0),0)}catch(l){console.error("Error fetching contributions:",l),f("Error","Unable to fetch contribution data.")}};return(t,l)=>{var v;return r(),a("div",q,[l[8]||(l[8]=e("div",{class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-2 flex-wrap"},[e("div",{class:"d-flex flex-row justify-content-between align-items-center w-100"},[e("p",{class:"text-muted mb-0"},"Officials")])],-1)),g(y).length>0?(r(),a("div",z,[e("table",Q,[l[3]||(l[3]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"ID"),e("th",null,"NAME"),e("th",null,"POSITION"),e("th",null,"TERM"),e("th",null,"STATUS"),e("th",null,"ACTION")])],-1)),e("tbody",null,[(r(!0),a(L,null,F(g(y),(n,U)=>(r(),a("tr",{key:U},[e("td",null,i(U+1),1),e("td",null,i(n==null?void 0:n.name),1),e("td",null,i(n.position?n.position:n.role||"N/A"),1),e("td",null,i(T(n.term_start))+" - "+i(T(n.term_end)),1),e("td",null,[e("div",X,[e("input",{class:"form-check-input",type:"checkbox",checked:n.status===1,title:"can't modify",disabled:""},null,8,Y)])]),e("td",null,[e("div",Z,[e("button",{class:"btn btn-sm btn-outline-dark me-2",onClick:B=>E(n.id),title:"delete permanently"},l[0]||(l[0]=[e("i",{class:"bi bi-trash"},null,-1)]),8,ee),e("button",{class:"btn btn-sm btn-outline-dark me-2",onClick:B=>P(n.id,n.position||n.role),title:"restore"},l[1]||(l[1]=[e("i",{class:"bi bi-arrow-clockwise"},null,-1)]),8,te),e("button",{class:"btn btn-sm btn-outline-dark",disabled:n.role!=="collector",onClick:B=>n.role==="collector"?s(n):null,title:"view transaction info"},l[2]||(l[2]=[e("i",{class:"bi bi-clock-history"},null,-1)]),8,le)])])]))),128))])])])):(r(),a("div",oe,l[4]||(l[4]=[e("h5",{class:"text-dark fw-light"},"No Official's Archive Data.",-1)]))),h.value?(r(),a("div",se,[e("div",ne,[e("div",ae,[e("div",re,[e("h5",ie,i(_.value),1),e("button",{type:"button",class:"btn-close",onClick:x,"aria-label":"Close"})]),d.value==="transaction"?(r(),a("div",ce,[u.value&&u.value.length>0?(r(),a("div",ue,[e("table",de,[u.value&&u.value.length?(r(),a("div",fe,[e("span",ve,i((v=A.value)==null?void 0:v.name),1),l[5]||(l[5]=V(" has diligently served as a collector, successfully collecting a total amount of ")),e("span",be,"â‚±"+i(m.value),1),l[6]||(l[6]=V(" during his/her service. "))])):k("",!0)])])):(r(),a("div",me,l[7]||(l[7]=[e("p",null,"No contribution data found.",-1)])))])):(r(),a("div",he,[e("p",null,i(C.value),1)])),e("div",ye,[d.value==="confirm"?(r(),a("button",{key:0,type:"button",class:"btn btn-primary",onClick:D}," Confirm ")):k("",!0),d.value==="alert"?(r(),a("button",{key:1,type:"button",class:"btn btn-primary",onClick:x}," OK ")):k("",!0)])])])])):k("",!0)])}}},pe=H(_e,[["__scopeId","data-v-0619c798"]]),ge={class:"main-section bg-light"},ke={class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-2 flex-wrap"},we={class:"mt-2 mt-md-0"},Ae={key:0,class:"container"},Ce={class:"table-responsive"},xe={class:"table table-bordered align-middle text-center"},Oe={class:"d-flex flex-row justify-content-center align-items-center action-buttons"},Me=["onClick"],$e=["onClick"],Ne={key:1,class:"container text-center mt-3"},Ee={key:2,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{"background-color":"rgba(0,0,0,0.5)"}},Te={class:"modal-dialog modal-dialog-centered",role:"document"},Se={class:"modal-content"},De={class:"modal-header"},Ie={class:"modal-title"},Pe={class:"modal-body"},Re={class:"modal-footer"},je={__name:"Home",props:{members:{type:Array,default:()=>[]},deceasedMembers:{type:Array,default:()=>[]},officials:{type:Array,default:()=>[]},otherOfficial:{type:Array,default:()=>[]}},setup(S){const w=S;let y=c([]);const h=c([]);let _=c([]),C=c([]);const d=c(!1),b=c(""),p=c(""),u=c(""),m=c(null),A=c(null),O=(s,o,t,l=null)=>{b.value=s,p.value=o,u.value="confirm",m.value=t,A.value=l,d.value=!0},f=(s,o)=>{b.value=s,p.value=o,u.value="alert",d.value=!0},D=()=>{m.value&&A.value?m.value(A.value):m.value&&m.value(),d.value=!1},x=()=>{d.value=!1,m.value=null,A.value=null};$(()=>w.otherOfficial,s=>{C.value=s},{immediate:!0}),$(()=>w.officials,s=>{_.value=[...s,...C.value],console.log("Official: ",_.value)},{immediate:!0}),$(()=>w.deceasedMembers,s=>{h.value=s,E()},{immediate:!0}),$(()=>w.members,s=>{E(s)},{immediate:!0});function E(s=w.members){if(!s){y.value=[];return}y.value=s.filter(o=>{const t=`${o.first_name} ${o.last_name}`.toLowerCase();return!h.value.some(l=>l.deceased_name.toLowerCase()===t)})}const I=s=>{O("Delete Member Permanently","Are you sure you want to delete this member permanently? This action cannot be undone.",P,s)},P=s=>{N.delete(route("archive.deleteMember",{id:s}),{onSuccess:()=>{f("Success","Member deleted successfully...")},onError:o=>{console.log("An error occurred while deleting data.",o),f("Error","An error occurred while deleting the member.")}})},R=s=>{O("Restore Member","Are you sure you want to restore this member?",T,s)},T=s=>{N.post(route("archive.undo",{id:s}),{onSuccess:()=>{f("Success","Member restored successfully...")},onError:o=>{console.log("An error occurred while restoring data.",o),f("Error","An error occurred while restoring the member.")}})};return(s,o)=>(r(),a(L,null,[M(g(W),{title:"Registered members"}),M(J,null,{default:j(()=>[e("div",ge,[e("div",ke,[o[1]||(o[1]=e("div",null,[e("h5",{class:"fw-light fs-5 mb-0"},"Archived")],-1)),e("div",we,[M(g(G),{href:s.route("archive.viewDeceasedMember"),class:"btn btn-dark"},{default:j(()=>o[0]||(o[0]=[e("span",{class:"d-none d-md-inline"},"View Deceased Member",-1),e("i",{class:"bi bi-eye d-inline d-md-none"},null,-1)])),_:1},8,["href"])])]),o[7]||(o[7]=e("p",{class:"text-muted ms-2"},"Members",-1)),g(y).length?(r(),a("div",Ae,[e("div",Ce,[e("table",xe,[o[5]||(o[5]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"ID"),e("th",null,[e("i",{class:"bi bi-person"}),V(" NAME")]),e("th",null,"GENDER"),e("th",null,"AGE"),e("th",null,"CONTACT NO."),e("th",null,"STREET"),e("th",null,"STATUS"),e("th",null,"ACTION")])],-1)),e("tbody",null,[(r(!0),a(L,null,F(g(y),(t,l)=>(r(),a("tr",{key:l},[e("td",null,i(l+1),1),e("td",null,i(t==null?void 0:t.first_name)+" "+i(t==null?void 0:t.middle_name)+" "+i(t==null?void 0:t.last_name),1),e("td",null,i(t.gender||"N/A"),1),e("td",null,i(t.age),1),e("td",null,i(t.contact_number),1),e("td",null,i(t.purok),1),e("td",null,i(t.status),1),e("td",null,[e("div",Oe,[M(g(G),{href:s.route("archive.view",{id:t==null?void 0:t.id}),class:"btn btn-sm btn-outline-dark me-1",title:"view info."},{default:j(()=>o[2]||(o[2]=[e("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"]),e("button",{class:"btn btn-sm btn-outline-dark me-1",onClick:v=>I(t.id),title:"delete permanently"},o[3]||(o[3]=[e("i",{class:"bi bi-trash"},null,-1)]),8,Me),e("button",{class:"btn btn-sm btn-outline-dark",onClick:v=>R(t.id),title:"undo delete"},o[4]||(o[4]=[e("i",{class:"bi bi-arrow-counterclockwise"},null,-1)]),8,$e)])])]))),128))])])])])):(r(),a("div",Ne,o[6]||(o[6]=[e("h5",{class:"text-dark fw-light"},"No Member's Archive Data.",-1)]))),d.value?(r(),a("div",Ee,[e("div",Te,[e("div",Se,[e("div",De,[e("h5",Ie,i(b.value),1),e("button",{type:"button",class:"btn-close",onClick:x,"aria-label":"Close"})]),e("div",Pe,[e("p",null,i(p.value),1)]),e("div",Re,[u.value==="confirm"?(r(),a("button",{key:0,type:"button",class:"btn btn-secondary",onClick:x}," Cancel ")):k("",!0),u.value==="confirm"?(r(),a("button",{key:1,type:"button",class:"btn btn-primary",onClick:D}," Confirm ")):k("",!0),u.value==="alert"?(r(),a("button",{key:2,type:"button",class:"btn btn-primary",onClick:x}," OK ")):k("",!0)])])])])):k("",!0),M(pe,{officials:g(_)},null,8,["officials"])])]),_:1})],64))}},Ge=H(je,[["__scopeId","data-v-53d420f5"]]);export{Ge as default};
