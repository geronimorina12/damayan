import{r as n,s as k,f as m,o as b,b as e,F as $,G as w,e as M,n as F,t as i,W as f,a as x,u as A,g as L,w as N,E as U}from"./app-ukGeU6Fu.js";import{A as E}from"./AdminLayout-CxBBxh6C.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const S={class:"card mt-4"},P={class:"card-body"},V={class:"table-responsive"},D={class:"table table-bordered align-middle"},B={class:"btn btn-sm btn-light"},T=["onClick"],W={class:"modal fade",id:"action",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},z={class:"modal-dialog"},G={class:"modal-content"},J={class:"modal-footer"},j={class:"container-fluid"},q={class:"col"},H={__name:"RoleAndPermissionTable",props:{users:{type:Array,default:()=>[]}},setup(h){const v=h,o=n([]),r=n(0),c=n(0),u=n(0),_=n(0),g=n(0),y=n(0),C=n(0),s=n(null);k(()=>v.users,p=>{o.value=p,r.value=o.value.filter(l=>l.role==="admin").length,c.value=o.value.filter(l=>l.position==="secretary").length,u.value=o.value.filter(l=>l.position==="president").length,_.value=o.value.filter(l=>l.position==="vise_president").length,g.value=o.value.filter(l=>l.position==="purok_leader").length,y.value=o.value.filter(l=>l.position==="treasurer").length,C.value=o.value.filter(l=>l.position==="colector").length},{immediate:!0});const t=[{name:"Admin",description:"Full access",users:r.value+(r.value>1?" users":" user"),access:"Full modules",icon:"bi bi-person"},{name:"Collector",description:"Jurisdiction-based",users:4,access:"Status updates",icon:"bi bi-people"}],a=()=>{if(!s.value){alert("No role selected. Please select a role to view.");return}f.get(route("role.viewSpecificRole",{role:s.value})),s.value=null};return(p,l)=>(b(),m("div",null,[e("div",S,[e("div",P,[l[2]||(l[2]=e("h6",{class:"fw-semibold"},"Roles and Permissions",-1)),e("div",V,[e("table",D,[l[1]||(l[1]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Role"),e("th",null,"Description"),e("th",null,"Users"),e("th",null,"Access"),e("th")])],-1)),e("tbody",null,[(b(),m($,null,w(t,(d,R)=>e("tr",{key:R},[e("td",null,[e("i",{class:F(d.icon)},null,2),M(" "+i(d.name),1)]),e("td",null,i(d.description),1),e("td",null,i(d.users),1),e("td",null,i(d.access),1),e("td",null,[e("button",B,[e("i",{class:"bi bi-three-dots-vertical","data-bs-toggle":"modal","data-bs-target":"#action",onClick:ie=>s.value=d.name.toLocaleLowerCase()},null,8,T)])])])),64))])])])])]),e("div",W,[e("div",z,[e("div",G,[l[3]||(l[3]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Action "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",J,[e("div",j,[e("div",q,[e("button",{type:"button",class:"btn btn-primary w-100","data-bs-dismiss":"modal",onClick:l[0]||(l[0]=d=>a())}," View All ")])])])])])])]))}},K={class:"container mt-4 role-container"},O={class:"card mt-3"},Q={class:"card-body"},X={class:"table-responsive"},Y={class:"table table-bordered align-middle"},Z={class:"btn btn-sm btn-light"},ee=["onClick"],te={class:"modal fade",id:"action1Modal",tabindex:"-1","aria-labelledby":"actionModalLabel","aria-hidden":"true"},le={class:"modal-dialog modal-dialog-centered"},se={class:"modal-content modern-modal"},ae={class:"modal-footer modern-footer"},oe={class:"action-buttons"},ne={__name:"Index",props:{users:{type:Array,default:()=>[]},admins:{type:Array,default:()=>[]}},setup(h){const v=h;let o=n([]),r=n([]),c=n(null),u=n("");k(()=>v.admins,s=>{r.value=s},{immediate:!0}),k(()=>v.users,s=>{o.value=s,o.value.push(...r.value)},{immediate:!0});const _=(s,t)=>{c.value=s,u.value=t},g=()=>{u.value==="admin"||u.value==="collector"?f.get(route("role.edit",{id:c.value})):f.get(route("role.official.edit",{official:c.value}))},y=()=>{confirm("Are you sure you want to delete this user?")&&f.delete(route("role.deleteUser",{user:c.value}),{onSuccess:()=>{alert("User deleted successfully.")},onError:s=>{console.error("Failed to delete user.",s)}})},C=(s,t)=>s==="collector"||t==="collector"?"Status updates":s==="admin"||t==="president"?"Full modules":s==="secretary"||t==="secretary"?"Records and Reports":s==="vise_president"||t==="vise_president"?"Review and Approval":"N/A";return(s,t)=>(b(),m("div",null,[x(A(L),{title:"Role Management"}),x(E,null,{default:N(()=>[e("div",K,[t[4]||(t[4]=e("h5",{class:"fw-light"},"User and Role Management",-1)),e("div",O,[e("div",Q,[t[3]||(t[3]=e("h6",{class:"fw-semibold"},"User Management",-1)),e("div",X,[e("table",Y,[t[2]||(t[2]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"ID"),e("th",null,"NAME"),e("th",null,"EMAIL"),e("th",null,"Role"),e("th",null,"Access")])],-1)),e("tbody",null,[(b(!0),m($,null,w(A(o),(a,p)=>(b(),m("tr",{key:p},[e("td",null,i(a.id),1),e("td",null,i(a.name),1),e("td",null,i(a.email||"N/A"),1),e("td",null,i((a==null?void 0:a.role)||(a==null?void 0:a.position)),1),e("td",null,i(C(a.role,a.position)),1),e("td",null,[e("button",Z,[e("i",{class:"bi bi-three-dots-vertical action1","data-bs-toggle":"modal","data-bs-target":"#action1Modal",onClick:l=>_(a.id,a.role||a.position)},null,8,ee)])])]))),128))])])])])]),x(H,{users:A(o)},null,8,["users"]),t[5]||(t[5]=e("div",{class:"bottom-role-container container"},null,-1))])]),_:1}),e("div",te,[e("div",le,[e("div",se,[t[9]||(t[9]=U('<div class="modal-header modern-header" data-v-ce090337><div class="header-content" data-v-ce090337><i class="modal-icon fas fa-exclamation-circle" data-v-ce090337></i><h2 class="modal-title text-dark" id="actionModalLabel" data-v-ce090337>Confirm Action</h2></div><button type="button" class="btn-close modern-close" data-bs-dismiss="modal" aria-label="Close" data-v-ce090337><i class="bi bi-x-lg text-dark" data-v-ce090337></i></button></div><div class="modal-body modern-body" data-v-ce090337><p data-v-ce090337>Please select an action to perform. <span class="text-danger" data-v-ce090337>This action cannot be undone.</span></p></div>',2)),e("div",ae,[e("div",oe,[e("button",{type:"button",class:"btn btn-edit text-dark","data-bs-dismiss":"modal",onClick:t[0]||(t[0]=a=>g())},t[6]||(t[6]=[e("i",{class:"fas fa-edit"},null,-1),e("span",null,"Edit",-1)])),e("button",{type:"button",class:"btn btn-delete text-dark","data-bs-dismiss":"modal",onClick:t[1]||(t[1]=a=>y())},t[7]||(t[7]=[e("i",{class:"fas fa-trash-alt"},null,-1),e("span",null,"Delete",-1)])),t[8]||(t[8]=e("button",{type:"button",class:"btn btn-cancel text-dark","data-bs-dismiss":"modal"},[e("i",{class:"fas fa-times"}),e("span",null,"Cancel")],-1))])])])])])]))}},me=I(ne,[["__scopeId","data-v-ce090337"]]);export{me as default};
