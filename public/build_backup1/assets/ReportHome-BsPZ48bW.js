import{A as L}from"./AdminLayout-ChAVeCb1.js";import{r,s as C,f as u,o as i,b as t,F as g,G as $,e as N,t as d,x as O,i as k,D as R,u as a,n as y,I as V,h as A,d as F,l as B,j as I,J as T,a as D,g as H,w as z,c as U}from"./app-CV9WLblb.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as j}from"./html2pdf-DTrJQ22S.js";import"./logo1-BZ0h4foK.js";const Y={key:0,class:"mb-4"},G={class:"container"},K={class:"table-responsive-wrapper"},q={class:"responsive-table"},J={"data-label":"Collector"},Z={"data-label":"Purok"},Q={"data-label":"Assigned Members"},W={"data-label":"Paid"},X={"data-label":"Unpaid"},tt={key:1,class:"container text-muted text-center"},et={__name:"ContributionReportForAdmin",props:{contributions:{type:Array,default:()=>[]}},setup(f){const v=f,o=r([]),_=r([]),m=r([]),c=r([]),b=r([]);return C(()=>v.contributions,s=>{o.value=s,_.value=o.value.filter(l=>l.purok=="purok1"),m.value=o.value.filter(l=>l.purok=="purok2"),c.value=o.value.filter(l=>l.purok=="purok3"),b.value=o.value.filter(l=>l.purok=="purok4")},{immediate:!0}),(s,l)=>(i(),u("div",null,[o.value.length>0?(i(),u("div",Y,[t("div",G,[t("div",K,[t("table",q,[l[1]||(l[1]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{"data-label":"Collector"},"COLLECTOR"),t("th",{"data-label":"Purok"},"PUROK"),t("th",{"data-label":"Assigned Members"},"ASSIGNED MEMBERS"),t("th",{"data-label":"Paid"},"PAID"),t("th",{"data-label":"Unpaid"},"UNPAID")])],-1)),t("tbody",null,[(i(!0),u(g,null,$(f.contributions,(h,w)=>(i(),u("tr",{key:w},[t("td",J,[l[0]||(l[0]=t("i",{class:"bi bi-person me-2"},null,-1)),N(d(h.collector),1)]),t("td",Z,d(h.purok),1),t("td",Q,d(h.members),1),t("td",W,d(h.paid),1),t("td",X,d(h.not_paid),1)]))),128))])])]),l[2]||(l[2]=t("div",{class:"container w-50 h-50"},null,-1))])])):(i(),u("div",tt,l[3]||(l[3]=[t("p",null,"No contribution data.",-1)])))]))}},ot=M(et,[["__scopeId","data-v-3f65da40"]]),st={key:0,class:"container"},lt={class:"table-responsive-wrapper"},at={class:"responsive-table"},nt={"data-label":"Date"},rt={"data-label":"Amount"},dt={"data-label":"Members"},it={"data-label":"Collector"},ut={"data-label":"Purok"},ct={key:1,class:"container text-muted text-center"},mt={__name:"RecentContributionForAdmin",props:{recent:{type:Array,default:()=>[]}},setup(f){const v=f,o=r([]);C(()=>v.recent,m=>{o.value=m},{immediate:!0});const _=m=>{const c={year:"numeric",month:"long",day:"numeric"};return new Date(m).toLocaleDateString(void 0,c)};return(m,c)=>(i(),u("div",null,[o.value.length>0?(i(),u("div",st,[t("div",lt,[t("table",at,[c[0]||(c[0]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{"data-label":"Date"},"DATE"),t("th",{"data-label":"Amount"},"AMOUNT"),t("th",{"data-label":"Members"},"MEMBERS"),t("th",{"data-label":"Collector"},"COLLECTOR"),t("th",{"data-label":"Purok"},"PUROK")])],-1)),t("tbody",null,[(i(!0),u(g,null,$(f.recent,(b,s)=>(i(),u("tr",{key:s},[t("td",nt,d(_(b.date)),1),t("td",rt,d(b.total_amount),1),t("td",dt,d(b.members),1),t("td",it,d(b.collector),1),t("td",ut,d(b.purok),1)]))),128))])])])])):(i(),u("div",ct,c[1]||(c[1]=[t("p",null,"No recent contribution data.",-1)])))]))}},pt=M(mt,[["__scopeId","data-v-95f89616"]]),bt={class:"container"},vt={class:"mb-3"},_t={class:"invalid-feedback"},ft={class:"mb-3"},ht={class:"invalid-feedback"},kt={class:"mb-3"},Ct={class:"invalid-feedback"},yt={class:"mb-3"},gt={class:"mb-3"},wt=["value"],$t={class:"invalid-feedback"},At=["disabled"],Mt={key:0,class:"spinner-border spinner-border-sm me-1"},Rt={__name:"AddCollector",emits:["submitted"],setup(f,{emit:v}){const o=O({name:"",email:"",password:"",role:"collector",purok:"1"}),_=v,m=["1","2","3","4"],c=()=>{o.post(route("reports.storeCollector"),{onSuccess:()=>{o.reset(),_("submitted"),alert("Collector added successfully!")},onError:b=>console.log(b)})};return(b,s)=>(i(),u("div",bt,[t("form",{onSubmit:F(c,["prevent"]),class:"bg-white rounded"},[t("div",vt,[s[5]||(s[5]=t("label",{for:"name",class:"form-label"},"Name",-1)),k(t("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=l=>a(o).name=l),class:y(["form-control",{"is-invalid":a(o).errors.name}])},null,2),[[R,a(o).name]]),t("div",_t,d(a(o).errors.name),1)]),t("div",ft,[s[6]||(s[6]=t("label",{for:"email",class:"form-label"},"Email",-1)),k(t("input",{type:"email",id:"email","onUpdate:modelValue":s[1]||(s[1]=l=>a(o).email=l),class:y(["form-control",{"is-invalid":a(o).errors.email}])},null,2),[[R,a(o).email]]),t("div",ht,d(a(o).errors.email),1)]),t("div",kt,[s[7]||(s[7]=t("label",{for:"password",class:"form-label"},"Password",-1)),k(t("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=l=>a(o).password=l),class:y(["form-control",{"is-invalid":a(o).errors.password}])},null,2),[[R,a(o).password]]),t("div",Ct,d(a(o).errors.password),1)]),t("div",yt,[s[8]||(s[8]=t("label",{for:"role",class:"form-label"},"Role",-1)),k(t("input",{type:"text",id:"role","onUpdate:modelValue":s[3]||(s[3]=l=>a(o).role=l),class:"form-control",readonly:""},null,512),[[R,a(o).role]])]),t("div",gt,[s[10]||(s[10]=t("label",{for:"purok",class:"form-label"},"Purok",-1)),k(t("select",{id:"purok","onUpdate:modelValue":s[4]||(s[4]=l=>a(o).purok=l),class:y(["form-select",{"is-invalid":a(o).errors.purok}])},[s[9]||(s[9]=t("option",{disabled:"",value:""},"Select Purok",-1)),(i(),u(g,null,$(m,l=>t("option",{key:l,value:l},d(l),9,wt)),64))],2),[[V,a(o).purok]]),t("div",$t,d(a(o).errors.purok),1)]),t("button",{type:"submit",class:"btn btn-primary",disabled:a(o).processing},[a(o).processing?(i(),u("span",Mt)):A("",!0),s[11]||(s[11]=N(" Submit "))],8,At)],32)]))}},Dt=M(Rt,[["__scopeId","data-v-ff4066de"]]),xt={key:0,class:"select-wrapper"},Nt={class:"select-box"},St=["value"],Et={key:1},Pt={class:"header"},Tt={class:"deceased-name"},Ut={class:"table-container"},Vt={class:"members-table"},Bt={class:"total-amount"},Lt={__name:"View",setup(f){const v=r([]),o=r(null);r(null);const _=r(""),m=r(!1),c=r([]),b=r(null),s=async n=>{try{const e=await T.get(`/reports/contributions/${n}`);c.value=e.data.contributions}catch(e){console.error("Error fetching contributions:",e)}};B(async()=>{try{const n=await T.get("/reports/deceased");v.value=n.data.deceased}catch(n){console.error("An error occurred while fetching deceased:",n)}});const h=()=>{s(o.value);const n=v.value.find(e=>e.member_id==o.value);_.value=(n==null?void 0:n.deceased_name)||"",m.value=!0},w=I(()=>c.value.reduce((n,e)=>n+parseFloat(e.amount||0),0)),x=()=>{const n=b.value,e={filename:`${_.value}_Report.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};j().from(n).set(e).save()};return(n,e)=>(i(),u(g,null,[m.value?A("",!0):(i(),u("div",xt,[e[2]||(e[2]=t("label",{class:"select-label"},"Select Deceased Member:",-1)),t("div",Nt,[k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=p=>o.value=p),onChange:h},[e[1]||(e[1]=t("option",{disabled:"",value:""},"Select...",-1)),(i(!0),u(g,null,$(v.value,p=>(i(),u("option",{key:p.member_id,value:p.member_id},d(p.deceased_name),9,St))),128))],544),[[V,o.value]])])])),m.value?(i(),u("div",Et,[t("button",{onClick:x,class:"download-btn",title:"Download PDF"},e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:`M12 3a1 1 0 011 1v9.586l3.293-3.293a1 1 0 011.414 1.414l-5 
            5a1 1 0 01-1.414 0l-5-5a1 1 0 
            011.414-1.414L11 13.586V4a1 1 0 011-1zm-7 
            14a1 1 0 100 2h14a1 1 0 100-2H5z`})],-1)])),t("div",{ref_key:"pdfContent",ref:b,class:"document-container"},[t("div",Pt,[e[4]||(e[4]=t("div",{class:"organization-name"},"BULAN P.R.O.T.E.C DAMAYAN FERERATION",-1)),e[5]||(e[5]=t("div",{class:"organization-subtitle"},"(People's Responsible Organization Transforming Community)",-1)),e[6]||(e[6]=t("div",{class:"chapter-info"},"Affiliated Bulan, Sorsogon Chapter Brgy. ______ C.Y 2021",-1)),e[7]||(e[7]=t("div",{class:"established"},"Since 2016",-1)),t("div",Tt," Deceased Name: "+d(_.value),1)]),t("div",Ut,[e[9]||(e[9]=t("div",{class:"mb-3"},[t("strong",null,"MEMBERS")],-1)),t("table",Vt,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"NAME"),t("th",null,"STATUS"),t("th",null,"AMOUNT")])],-1)),t("tbody",null,[(i(!0),u(g,null,$(c.value,(p,S)=>{var E,P;return i(),u("tr",{key:S},[t("td",null,d(S+1),1),t("td",null,d(((E=p==null?void 0:p.member_contribution)==null?void 0:E.first_name)||"member")+" "+d(((P=p==null?void 0:p.member_contribution)==null?void 0:P.last_name)||""),1),t("td",null,d(p.status),1),t("td",null,d(Math.floor(p.amount)||"0"),1)])}),128))])]),t("div",Bt," TOTAL AMOUNT: â‚±"+d(w.value.toLocaleString()),1)]),e[10]||(e[10]=t("div",{class:"signature"},[t("div",null,"Noted By:"),t("div",{class:"president-name"},"Melva Canale Delariarte"),t("div",null,"DAMAYAN PRESIDENT")],-1))],512)])):A("",!0)],64))}},Ot=M(Lt,[["__scopeId","data-v-1b8c6a11"]]),Ft={class:"modern-report-container"},It={class:"tab-navigation"},Ht={class:"content-area"},zt={class:"modal fade",id:"viewReportModal",tabindex:"-1","aria-labelledby":"viewReportModalLabel","aria-hidden":"true"},jt={class:"modal-dialog modern-modal-dialog"},Yt={class:"modal-content modern-modal-content"},Gt={class:"modal-body"},Kt={class:"modal fade",id:"addCollectorModal",tabindex:"-1","aria-labelledby":"addCollectorModalLabel","aria-hidden":"true"},qt={class:"modal-dialog",style:{"max-width":"700px"}},Jt={class:"modal-content"},Zt={class:"modal-body"},Qt={__name:"ReportHome",props:{contributions:{type:Array,default:()=>[]},memberContributions:{type:Array,default:()=>[]},deathReports:{type:Array,default:()=>[]},president:{type:Object,default:()=>({})}},setup(f){const v=f;let o=r([]),_=r(!0),m=r(!1),c=r([]),b=r([]);r(!1),r(null);let s=r(0);r(null);const l=r("");C(()=>v.contributions,n=>{o.value=n},{immediate:!0}),C(()=>v.memberContributions,n=>{c.value=n.filter(e=>e.member_contribution!==null),console.log("member contributions:",c.value),s.value=c.value.reduce((e,p)=>e+Number(p.amount||0),0)},{immediate:!0}),C(()=>v.deathReports,n=>{b.value=n},{immediate:!0}),C(()=>v.president,n=>{l.value=n==null?void 0:n.name},{immediate:!0});const h=()=>{m.value=!0,_.value=!1},w=()=>{m.value=!1,_.value=!0};B(()=>{document.getElementById("addCollectorModal")});const x=()=>{};return(n,e)=>(i(),u("div",null,[D(a(H),{title:"Report"}),D(L,null,{default:z(()=>[t("div",Ft,[e[2]||(e[2]=t("div",{class:"modern-header"},[t("div",{class:"header-content"},[t("h5",{class:"fw-light"},"Reports Dashboard")]),t("div",{class:"header-actions"},[t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#viewReportModal"},[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 17H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M9 13H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M9 9H13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M3 5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5Z",stroke:"currentColor","stroke-width":"2"})]),N(" View Reports ")])])],-1)),t("div",It,[t("button",{class:y(a(m)?"tab-btn active":"tab-btn"),onClick:h}," Recent Contributions ",2),t("button",{class:y(a(_)?"tab-btn active":"tab-btn"),onClick:w}," Contributions Report ",2)]),t("div",Ht,[a(_)?(i(),U(ot,{key:0,contributions:a(o)},null,8,["contributions"])):A("",!0),a(m)?(i(),U(pt,{key:1,recent:a(o)},null,8,["recent"])):A("",!0)]),t("div",zt,[t("div",jt,[t("div",Yt,[e[0]||(e[0]=t("div",{class:"modal-header modern-modal-header"},[t("div",{class:"header-content"}),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Gt,[D(Ot)])])])]),t("div",Kt,[t("div",qt,[t("div",Jt,[e[1]||(e[1]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"addCollectorModalLabel"}," Add Collector "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Zt,[D(Dt,{onSubmitted:x})])])])]),e[3]||(e[3]=t("div",{class:"extra-space"},null,-1))])]),_:1})]))}},se=M(Qt,[["__scopeId","data-v-279a1c35"]]);export{se as default};
