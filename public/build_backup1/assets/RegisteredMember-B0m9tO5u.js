import{r as g,x as O,f as p,o as b,b as e,h as k,e as S,t as m,d as V,i as f,D as y,u as o,I as T,F as L,G as D,l as z,J as ee,a as w,s as E,n as R,j as X,w as N,T as H,S as F,W as I,m as te,g as le,K as se,z as oe}from"./app-CV9WLblb.js";import{A as ne}from"./AdminLayout-ChAVeCb1.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const ae={class:"container-fluid d-flex flex-row justify-content-center main-container"},de={class:"container mt-5"},ie={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},re={class:"row mb-3 d-flex align-items-center"},ue={class:"col col-6"},ce={class:"col col-6"},me={class:"row mb-3"},pe={class:"col col-6"},be={class:"col col-6"},ve={class:"row mb-3"},fe={class:"col col-6"},_e={class:"col col-6"},ge={class:"row mb-3"},ye={class:"col col-6"},he={class:"col col-6"},$e={class:"row mb-3"},xe={class:"col col-6"},we={class:"col col-6"},ke={key:0,class:"text-danger mt-1"},Me={class:"row mb-3"},Ce={class:"col col-6"},Ae={key:0,class:"container text-center mt-5 fs-4"},Se={key:1},Ve={class:"table table-responsive bg-light"},Ue=["onClick"],Ne={class:"container-fluid d-flex flex-row justify-content-between align-items-center mt-4"},Ee={key:1,class:"card mt-4 p-3 shadow-sm"},Be={class:"d-flex justify-content-end gap-2 mt-3"},Le={__name:"AddNewMember",setup(M){const r=g({name:"",relation:"",age:"",birth_date:""}),n=g([]),i=g(!1),s=g(""),a=O({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),x=()=>{if(a.clearErrors(),!/^0\d{10}$/.test(a.contact_number)){a.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}a.beneficiaries=n.value,a.post(route("addMemberPost"),{onSuccess:()=>{s.value=" Member added successfully!",setTimeout(()=>{s.value=""},4e3)},onError:t=>console.log("An error occurred => ",t)})},h=()=>{n.value.push({...r.value}),r.value={name:"",relation:"",age:"",birth_date:""},i.value=!1},$=l=>{n.value.splice(l,1)},c=l=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(l).toLocaleDateString(void 0,t)};return(l,t)=>(b(),p("div",ae,[e("div",de,[s.value?(b(),p("div",ie,[S(m(s.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=d=>s.value="")})])):k("",!0),e("form",{onSubmit:V(x,["prevent"]),class:"form"},[e("div",re,[e("div",ue,[f(e("input",{type:"text",class:"form-control mt-3",placeholder:"Last name","onUpdate:modelValue":t[1]||(t[1]=d=>o(a).last_name=d)},null,512),[[y,o(a).last_name]])]),e("div",ce,[t[18]||(t[18]=e("label",null,"Birth date",-1)),f(e("input",{type:"date",class:"form-control",placeholder:"Birth date","onUpdate:modelValue":t[2]||(t[2]=d=>o(a).date_of_birth=d)},null,512),[[y,o(a).date_of_birth]])])]),e("div",me,[e("div",pe,[f(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":t[3]||(t[3]=d=>o(a).first_name=d),required:""},null,512),[[y,o(a).first_name]])]),e("div",be,[f(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":t[4]||(t[4]=d=>o(a).age=d),required:""},null,512),[[y,o(a).age]])])]),e("div",ve,[e("div",fe,[f(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":t[5]||(t[5]=d=>o(a).middle_name=d)},null,512),[[y,o(a).middle_name]])]),e("div",_e,[f(e("select",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=d=>o(a).gender=d),required:""},t[19]||(t[19]=[e("option",{value:"",disabled:""},"Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[T,o(a).gender]])])]),e("div",ge,[e("div",ye,[f(e("select",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=d=>o(a).status=d),required:""},t[20]||(t[20]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[T,o(a).status]])]),e("div",he,[f(e("input",{type:"number",class:"form-control",placeholder:"Purok","onUpdate:modelValue":t[8]||(t[8]=d=>o(a).purok=d),required:""},null,512),[[y,o(a).purok]])])]),e("div",$e,[e("div",xe,[f(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":t[9]||(t[9]=d=>o(a).occupation=d),required:""},null,512),[[y,o(a).occupation]])]),e("div",we,[f(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":t[10]||(t[10]=d=>o(a).contact_number=d),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[y,o(a).contact_number]]),o(a).errors.contact_number?(b(),p("div",ke,m(o(a).errors.contact_number),1)):k("",!0)])]),e("div",Me,[e("div",Ce,[f(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":t[11]||(t[11]=d=>o(a).address=d),required:""},null,512),[[y,o(a).address]])])]),n.value.length<1?(b(),p("div",Ae," No beneficiary added ")):(b(),p("div",Se,[t[22]||(t[22]=e("h5",{class:"text-dark fw-light pt-2"},"Beneficiary",-1)),e("table",Ve,[t[21]||(t[21]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(b(!0),p(L,null,D(n.value,(d,U)=>(b(),p("tr",{key:U},[e("td",null,m(d.name),1),e("td",null,m(d.relation),1),e("td",null,m(d.age),1),e("td",null,m(c(d.birth_date)),1),e("td",null,[e("button",{class:"btn btn-danger",onClick:j=>$(U)},"Delete",8,Ue)])]))),128))])])])),e("div",Ne,[e("div",null,[i.value?k("",!0):(b(),p("button",{key:0,class:"btn btn-primary",type:"button",onClick:t[12]||(t[12]=d=>i.value=!0)}," Add Beneficiary "))]),t[23]||(t[23]=e("div",{class:"d-flex flex-row gap-2 align-items-center"},[e("button",{class:"btn btn-success"},"submit")],-1))])],32),i.value?(b(),p("div",Ee,[t[26]||(t[26]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:V(h,["prevent"])},[f(e("input",{type:"text",placeholder:"Name",class:"form-control mb-2","onUpdate:modelValue":t[13]||(t[13]=d=>r.value.name=d),required:""},null,512),[[y,r.value.name]]),f(e("input",{type:"text",placeholder:"Relation",class:"form-control mb-2","onUpdate:modelValue":t[14]||(t[14]=d=>r.value.relation=d),required:""},null,512),[[y,r.value.relation]]),f(e("input",{type:"number",placeholder:"Age",class:"form-control mb-2","onUpdate:modelValue":t[15]||(t[15]=d=>r.value.age=d),required:""},null,512),[[y,r.value.age]]),t[25]||(t[25]=e("label",null,"Date of Birth",-1)),f(e("input",{type:"date",placeholder:"Birthdate",class:"form-control mb-2","onUpdate:modelValue":t[16]||(t[16]=d=>r.value.birth_date=d),required:""},null,512),[[y,r.value.birth_date]]),e("div",Be,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[17]||(t[17]=d=>i.value=!1)}," Cancel "),t[24]||(t[24]=e("button",{type:"submit",class:"btn btn-primary"}," Save Beneficiary ",-1))])],32)])):k("",!0)])]))}},qe={class:"container mt-4"},Re={key:0,class:"text-center my-5"},Ie={key:1,class:"alert alert-danger"},Te={key:2,class:"table-responsive"},De={class:"table table-striped table-bordered shadow-sm"},je={key:3,class:"alert alert-info"},Fe={__name:"NewlyCreated",setup(M){const r=g(null),n=g(!0),i=g(null),s=async()=>{var x,h;try{const $=await ee.get("/member/new");r.value=$.data.data}catch($){i.value=((h=(x=$.response)==null?void 0:x.data)==null?void 0:h.message)||"Failed to fetch latest member."}finally{n.value=!1}},a=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return z(s),(x,h)=>(b(),p("div",qe,[n.value?(b(),p("div",Re,h[0]||(h[0]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):i.value?(b(),p("div",Ie,m(i.value),1)):r.value?(b(),p("div",Te,[e("table",De,[h[1]||(h[1]=e("thead",{class:"table-primary"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Contact"),e("th",null,"Age"),e("th",null,"Gender"),e("th",null,"Registration Date")])],-1)),e("tbody",null,[e("tr",null,[e("td",null,m(r.value.first_name)+" "+m(r.value.middle_name)+" "+m(r.value.last_name),1),e("td",null,m(r.value.address),1),e("td",null,m(r.value.contact_number),1),e("td",null,m(r.value.age),1),e("td",null,m(r.value.gender),1),e("td",null,m(a(r.value.created_at)),1)])])])])):(b(),p("div",je," No newly registered member found. "))]))}},Oe=q(Fe,[["__scopeId","data-v-c3865ca2"]]),Pe={class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-2"},Ge={id:"addNewMemberModal",class:"custom-modal"},We={class:"modal-content",style:{"min-width":"60%",height:"auto"}},He={class:"modal-header"},ze={class:"modal-body"},Xe={id:"newCreatedMemberModal",class:"custom-modal",style:{"padding-top":"0"}},Je={class:"modal-content",style:{"min-width":"60%",height:"auto"}},Ke={class:"modal-header alig-items-center"},Qe={class:"modal-body"},Ye={__name:"Header",setup(M){const r=i=>{document.getElementById(i).classList.add("show")},n=i=>{document.getElementById(i).classList.remove("show")};return window.addEventListener("click",i=>{document.querySelectorAll(".custom-modal").forEach(s=>{i.target===s&&s.classList.remove("show")})}),(i,s)=>(b(),p("div",null,[e("div",Pe,[s[6]||(s[6]=e("div",null,[e("h5",{class:"ms-3 fw-light"},[e("span",{class:"d-none d-sm-none d-lg-inline-block me-2"},"Registered"),e("span",null,"Members")])],-1)),e("div",null,[e("button",{class:"modern-btn me-3",onClick:s[0]||(s[0]=V(a=>r("addNewMemberModal"),["prevent"]))},s[4]||(s[4]=[e("i",{class:"bi bi-person-plus"},null,-1),e("span",null,"Add Member",-1)])),e("button",{class:"modern-btn secondary",onClick:s[1]||(s[1]=a=>r("newCreatedMemberModal"))},s[5]||(s[5]=[e("i",{class:"bi bi-person-lines-fill"},null,-1),e("span",null,"Newly Created",-1)]))])]),e("div",Ge,[e("div",We,[e("div",He,[s[7]||(s[7]=e("h3",null,"Add New Member",-1)),e("button",{class:"close-btn",onClick:s[2]||(s[2]=a=>n("addNewMemberModal"))},"×")]),e("div",ze,[w(Le)])])]),e("div",Xe,[e("div",Je,[e("div",Ke,[s[8]||(s[8]=e("div",{class:""},[e("h4",{class:"mb-3 text-dark fw-bold d-flex align-items-center"}," Newly Registered Member ")],-1)),e("button",{class:"close-btn2 fs-2",onClick:s[3]||(s[3]=a=>n("newCreatedMemberModal"))},"×")]),e("div",Qe,[w(Oe)])])])]))}},Ze=q(Ye,[["__scopeId","data-v-ff43b7b9"]]),et={__name:"Alert",props:{status:{type:Boolean,default:!1},name:{type:String,default:""}},setup(M){const r=M,n=g(!1),i=g(null),s=g("");return E(()=>r.status,a=>{i.value=a,s.value="bounce-in",n.value=!0,setTimeout(()=>{s.value="slide-out",setTimeout(()=>{n.value=!1},500)},3e3)}),(a,x)=>(b(),p("div",null,[n.value?(b(),p("div",{key:0,class:R(["alert alert-info",s.value]),role:"alert"},[S(m(M.name)+"'s status has been changed to ",1),e("strong",null,m(i.value?"Active":"Inactive"),1)],2)):k("",!0)]))}},tt=q(et,[["__scopeId","data-v-f19df27b"]]),lt={class:"reminder-wrapper"},st={class:"card shadow-sm p-4 rounded-4 bg-white border-0"},ot={key:0,class:"mb-4 text-center"},nt={class:"fw-bold text-primary mb-1"},at={class:"text-muted mb-0"},dt={class:"row g-3"},it={class:"col-md-6"},rt={class:"col-md-6"},ut={key:0,class:"mt-4 bg-light p-3 rounded border-start border-4 border-primary"},ct={key:0,class:"mt-4 d-flex flex-wrap gap-3 justify-content-center"},mt={__name:"IsDeceased",props:{deceasedMember:{type:Object,default:()=>({})}},setup(M){const r=O({message:"",type:"deathReport",memberId:null}),n=M,i=g({}),s=g(""),a=g("");E(()=>n.deceasedMember,c=>{i.value=c},{immediate:!0}),E([s,a],([c,l])=>{var t;if(c&&l&&((t=i.value)!=null&&t.first_name)){const d=i.value;r.message=`We regret to inform you that ${d.first_name} ${d.last_name} has passed away. Last night is on ${$(c)}, and the collection for burial assistance starts on ${$(l)}.`,r.memberId=d.id}else r.message=""});function x(){I.post(route("smsNotification.sendReminders"),{message:r.message},{onSuccess:()=>alert("Reminders sent successfully!"),onError:()=>alert("Error sending Reminders")})}const h=X(()=>s.value&&a.value),$=c=>{const l={year:"numeric",month:"long",day:"numeric"};return new Date(c).toLocaleDateString(void 0,l)};return(c,l)=>(b(),p("div",lt,[e("div",st,[i.value.first_name?(b(),p("div",ot,[e("h4",nt,m(i.value.first_name)+" "+m(i.value.middle_name)+" "+m(i.value.last_name),1),e("p",at,m(i.value.address),1)])):k("",!0),e("div",dt,[e("div",it,[l[2]||(l[2]=e("label",{class:"form-label fw-semibold text-secondary"},"Enter last night:",-1)),f(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[0]||(l[0]=t=>s.value=t)},null,512),[[y,s.value]])]),e("div",rt,[l[3]||(l[3]=e("label",{class:"form-label fw-semibold text-secondary"},"Start of contribution:",-1)),f(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[1]||(l[1]=t=>a.value=t)},null,512),[[y,a.value]])])]),w(H,{name:"fade"},{default:N(()=>[o(r).message?(b(),p("p",ut,m(o(r).message),1)):k("",!0)]),_:1}),w(H,{name:"fade"},{default:N(()=>{var t;return[h.value?(b(),p("div",ct,[w(o(F),{href:c.route("smsNotification.sendToAllSelectedV2",{type:"deathReport",message:o(r).message,deceased:(t=i.value)==null?void 0:t.id,last:s.value}),class:"btn-modern text-decoration-none"},{default:N(()=>l[4]||(l[4]=[e("i",{class:"bi bi-people-fill me-2"},null,-1),S("Send to all selected ")])),_:1},8,["href"]),e("button",{class:"btn-modern",onClick:x},l[5]||(l[5]=[e("i",{class:"bi bi-send-fill me-2"},null,-1),S("Send ")]))])):k("",!0)]}),_:1})])]))}},pt=q(mt,[["__scopeId","data-v-7863633d"]]),bt={class:"container-fluid d-flex flex-row justify-content-center align-items-center main-container"},vt={class:"container mt-3"},ft={class:"row mb-3 d-flex flex-row align-items-center"},_t={class:"col col-6"},gt={class:"col col-6"},yt={class:"row mb-3"},ht={class:"col col-6"},$t={class:"col col-6"},xt={class:"row mb-3"},wt={class:"col col-6"},kt={class:"col col-6"},Mt={class:"row mb-3"},Ct={class:"col col-6"},At={class:"col col-6"},St={class:"row mb-3"},Vt={class:"col col-6"},Ut={class:"col col-6"},Nt={key:0,class:"text-danger mt-1"},Et={class:"row mb-3"},Bt={class:"col col-6"},Lt={key:0,class:"container text-center mt-5 fs-4"},qt={key:1},Rt={class:"table table-responsive bg-light"},It=["onClick"],Tt={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},Dt={class:"modal-dialog"},jt={class:"modal-content"},Ft={class:"modal-body"},Ot={__name:"EditMember",props:{member:{type:Object,default:()=>({})}},setup(M){const r=M,n=O({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),i=g([]),s=g({name:"",relation:"",age:"",birth_date:""});E(()=>r.member,c=>{c&&(console.log("Reactive update detected:",c),n.defaults({first_name:c.first_name||"",last_name:c.last_name||"",address:c.address||"",contact_number:c.contact_number||"",date_of_birth:c.date_of_birth||"",purok:c.purok||"",age:c.age||"",middle_name:c.middle_name||"",status:c.status||"",occupation:c.occupation||"",gender:c.gender||"",beneficiaries:c.beneficiaries||[]}),n.reset(),i.value=(c==null?void 0:c.beneficiaries)||[])},{immediate:!0,deep:!0});const a=()=>{if(n.clearErrors(),!/^0\d{10}$/.test(n.contact_number)){n.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}n.beneficiaries=i.value,n.put(route("members.update",r.member.id),{onSuccess:()=>alert("Member updated successfully."),onError:l=>console.error("An error occurred => ",l)})},x=()=>{!s.value.name||!s.value.relation||!s.value.age||!s.value.birth_date||(i.value.push({...s.value}),s.value={name:"",relation:"",age:"",birth_date:""})},h=c=>{i.value.splice(c,1)},$=c=>{if(!c)return"";const l={year:"numeric",month:"long",day:"numeric"};return new Date(c).toLocaleDateString(void 0,l)};return(c,l)=>(b(),p("div",null,[e("div",bt,[e("div",vt,[e("form",{onSubmit:V(a,["prevent"]),class:"form"},[e("div",ft,[e("div",_t,[f(e("input",{type:"text",class:"form-control mt-3",placeholder:"Last name","onUpdate:modelValue":l[0]||(l[0]=t=>o(n).last_name=t)},null,512),[[y,o(n).last_name]])]),e("div",gt,[l[15]||(l[15]=e("label",null,"Birth date",-1)),f(e("input",{type:"date",class:"form-control",placeholder:"Birth date","onUpdate:modelValue":l[1]||(l[1]=t=>o(n).date_of_birth=t)},null,512),[[y,o(n).date_of_birth]])])]),e("div",yt,[e("div",ht,[f(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":l[2]||(l[2]=t=>o(n).first_name=t),required:""},null,512),[[y,o(n).first_name]])]),e("div",$t,[l[16]||(l[16]=e("label",null,"Age",-1)),f(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":l[3]||(l[3]=t=>o(n).age=t),required:""},null,512),[[y,o(n).age]])])]),e("div",xt,[e("div",wt,[f(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":l[4]||(l[4]=t=>o(n).middle_name=t),required:""},null,512),[[y,o(n).middle_name]])]),e("div",kt,[l[18]||(l[18]=e("label",null,"Gender",-1)),f(e("select",{class:"form-control","onUpdate:modelValue":l[5]||(l[5]=t=>o(n).gender=t),required:""},l[17]||(l[17]=[e("option",{value:""},"Select Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[T,o(n).gender]])])]),e("div",Mt,[e("div",Ct,[f(e("select",{class:"form-control","onUpdate:modelValue":l[6]||(l[6]=t=>o(n).status=t),required:""},l[19]||(l[19]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[T,o(n).status]])]),e("div",At,[f(e("input",{type:"text",class:"form-control",placeholder:"Purok","onUpdate:modelValue":l[7]||(l[7]=t=>o(n).purok=t),required:""},null,512),[[y,o(n).purok]])])]),e("div",St,[e("div",Vt,[f(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":l[8]||(l[8]=t=>o(n).occupation=t),required:""},null,512),[[y,o(n).occupation]])]),e("div",Ut,[f(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":l[9]||(l[9]=t=>o(n).contact_number=t),required:"",pattern:"[0-9]*",inputmode:"numeric"},null,512),[[y,o(n).contact_number]]),o(n).errors.contact_number?(b(),p("div",Nt,m(o(n).errors.contact_number),1)):k("",!0)])]),e("div",Et,[e("div",Bt,[f(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":l[10]||(l[10]=t=>o(n).address=t),required:""},null,512),[[y,o(n).address]])])]),i.value.length?(b(),p("div",qt,[l[21]||(l[21]=e("h5",{class:"text-dark fw-light pt-2"},"Beneficiary",-1)),e("table",Rt,[l[20]||(l[20]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(b(!0),p(L,null,D(i.value,(t,d)=>(b(),p("tr",{key:d},[e("td",null,m(t.name),1),e("td",null,m(t.relation),1),e("td",null,m(t.age),1),e("td",null,m($(t.birth_date)),1),e("td",null,[e("button",{class:"btn btn-danger",type:"button",onClick:U=>h(d)}," Delete ",8,It)])]))),128))])])])):(b(),p("div",Lt," No beneficiary added ")),l[22]||(l[22]=e("div",{class:"container-fluid d-flex flex-row justify-content-between align-items-center"},[e("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Beneficiary "),e("button",{class:"btn btn-success",type:"submit"},"Save")],-1))],32),e("div",Tt,[e("div",Dt,[e("div",jt,[l[25]||(l[25]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Add Beneficiary "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",Ft,[e("form",{onSubmit:V(x,["prevent"])},[f(e("input",{type:"text",placeholder:"Name",class:"form-control mb-2","onUpdate:modelValue":l[11]||(l[11]=t=>s.value.name=t),required:""},null,512),[[y,s.value.name]]),f(e("input",{type:"text",placeholder:"Relation",class:"form-control mb-2","onUpdate:modelValue":l[12]||(l[12]=t=>s.value.relation=t),required:""},null,512),[[y,s.value.relation]]),f(e("input",{type:"number",placeholder:"Age",class:"form-control mb-2","onUpdate:modelValue":l[13]||(l[13]=t=>s.value.age=t),required:""},null,512),[[y,s.value.age]]),l[23]||(l[23]=e("label",null,"Date of birth",-1)),f(e("input",{type:"date",class:"form-control mb-2","onUpdate:modelValue":l[14]||(l[14]=t=>s.value.birth_date=t),required:""},null,512),[[y,s.value.birth_date]]),l[24]||(l[24]=e("div",{class:"container d-flex justify-content-end gap-2 mt-1"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1))],32)])])])])])])]))}},Pt={class:"main-section bg-light"},Gt={class:"container table-container"},Wt={class:"search-box mb-3"},Ht={class:"table-responsive"},zt={class:"table table-bordered align-middle text-center"},Xt={class:"text-start"},Jt={class:"status-cell"},Kt={class:"status-toggle"},Qt={class:"toggle-switch"},Yt=["checked","onChange"],Zt={class:"status-cell"},el={class:"status-toggle"},tl={class:"toggle-switch"},ll=["checked","onClick"],sl={class:"actions-column"},ol={class:"action-buttons-large"},nl=["onClick"],al=["onClick"],dl={class:"action-buttons-small"},il=["onClick"],rl={key:0},ul={class:"pagination-controls d-flex justify-content-center mt-3 mb-5"},cl=["onClick","innerHTML"],ml={class:"list-unstyled m-0"},pl={class:"modal fade",id:"editMember",tabindex:"-1"},bl={class:"modal-dialog modal-lg"},vl={class:"modal-content"},fl={class:"modal-body"},_l={class:"custom-modal"},gl={class:"custom-modal-body"},yl={__name:"RegisteredMember",props:{members:{type:Object,default:()=>({data:[],links:[],prev_page_url:null,next_page_url:null})},deceasedMember:{type:Array,default:()=>[]}},setup(M){const r=M,n=g([]),i=g(!1),s=g({top:"0px",left:"0px"}),a=g(null);g({});const x=g(!1),h=g(""),$=g(""),c=g([]),l=g({}),t=g(!1),d=g({});g(null),g(!1),g(""),E(()=>r.members,v=>{n.value=v.data||[]},{immediate:!0}),E(()=>r.deceasedMember,v=>{c.value=v.data||[]},{immediate:!0});const U=X(()=>$.value?n.value.filter(v=>`${v.first_name} ${v.middle_name||""} ${v.last_name}`.toLowerCase().includes($.value.toLowerCase())||(v.contact_number||"").toLowerCase().includes($.value.toLowerCase())||(v.purok||"").toLowerCase().includes($.value.toLowerCase())):n.value),j=v=>{confirm("Are you sure you want to trash this member?")&&I.delete(route("deleteMember",{id:v}),{onSuccess:()=>{alert("Member trashed"),i.value=!1}})},J=v=>{const u=v.status==="active"?"inactive":"active";I.put(route("toggleMemberStatus",{id:v.id}),{status:u},{onSuccess:()=>{v.status=u,x.value=u==="active",h.value=`${v.first_name} ${v.middle_name} ${v.last_name}`}})},K=(v,u)=>{if(i.value&&a.value===u){i.value=!1,a.value=null;return}a.value=u,i.value=!0,oe(()=>{const _=v.currentTarget.getBoundingClientRect(),A=document.querySelector(".actions-popup");if(!A)return;const C=A.offsetWidth,Z=window.innerWidth;let B=_.right+window.scrollX+10;B+C>Z&&(B=_.left+window.scrollX-C-10,B<0&&(B=10)),s.value={top:`${_.top+window.scrollY}px`,left:`${B}px`}})},P=v=>{i.value&&v.target&&!v.target.closest(".actions-popup")&&!v.target.closest(".three-dots-button")&&(i.value=!1,a.value=null)};z(()=>document.addEventListener("click",P)),te(()=>document.removeEventListener("click",P));const Q=v=>{v&&I.visit(v)},Y=v=>{l.value=v||null,t.value=!0},G=()=>{t.value=!1},W=v=>{i.value=!1,d.value={...v}};return(v,u)=>(b(),p(L,null,[w(o(le),{title:"Registered members"}),w(ne,null,{default:N(()=>[e("div",Pt,[w(Ze),w(tt,{status:x.value,name:h.value},null,8,["status","name"]),e("div",Gt,[e("div",Wt,[f(e("input",{type:"text",class:"form-control search-input",placeholder:"Search members by name, contact, or purok...","onUpdate:modelValue":u[0]||(u[0]=_=>$.value=_)},null,512),[[y,$.value]])]),e("div",Ht,[e("table",zt,[u[10]||(u[10]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"ID"),e("th",null,"NAME"),e("th",null,"GENDER"),e("th",null,"AGE"),e("th",null,"CONTACT NO."),e("th",null,"STREET"),e("th",null,"STATUS"),e("th",null,"DECEASED"),e("th",null,"ACTION")])],-1)),e("tbody",null,[(b(!0),p(L,null,D(U.value,(_,A)=>(b(),p("tr",{key:A},[e("td",null,m(_.id),1),e("td",Xt,m(_.first_name)+" "+m(_.middle_name)+" "+m(_.last_name),1),e("td",null,m(_.gender||"N/A"),1),e("td",null,m(_.age),1),e("td",null,m(_.contact_number),1),e("td",null,m(_.purok),1),e("td",Jt,[e("div",Kt,[e("label",Qt,[e("input",{type:"checkbox",checked:_.status==="active",onChange:C=>J(_)},null,40,Yt),u[3]||(u[3]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:R(["status-label",_.status==="active"?"active":"inactive"])},m(_.status==="active"?"Active":"Inactive"),3)])]),e("td",Zt,[e("div",el,[e("label",tl,[e("input",{type:"checkbox",checked:c.value.some(C=>C.member_id===_.id),onClick:C=>Y(_)},null,8,ll),u[4]||(u[4]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:R(["status-label",_.status==="active"?"active":"inactive"])},null,2)])]),e("td",sl,[e("div",ol,[w(o(F),{href:v.route("viewMemberInfo",{id:_.id}),class:"me-1"},{default:N(()=>u[5]||(u[5]=[e("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"]),e("button",{"data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:C=>W(_),class:"me-1"},u[6]||(u[6]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,nl),e("button",{onClick:C=>j(_.id)},u[7]||(u[7]=[e("i",{class:"bi bi-trash"},null,-1)]),8,al)]),e("div",dl,[e("button",{class:"btn btn-sm btn-outline-dark three-dots-button",onClick:V(C=>K(C,_.id),["stop"])},u[8]||(u[8]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)]),8,il)])])]))),128)),U.value.length===0?(b(),p("tr",rl,u[9]||(u[9]=[e("td",{colspan:"9",class:"text-center text-muted"},"No members found",-1)]))):k("",!0)])])]),e("div",ul,[(b(!0),p(L,null,D(r.members.links,(_,A)=>(b(),p("button",{key:A,class:R(["btn",_.active?"btn-primary":"btn-outline-primary"]),onClick:C=>Q(_.url),innerHTML:_.label},null,10,cl))),128))])])]),i.value?(b(),p("div",{key:0,class:"actions-popup bg-white border rounded shadow-sm p-2",style:se({top:s.value.top,left:s.value.left})},[e("ul",ml,[e("li",null,[w(o(F),{href:v.route("viewMemberInfo",{id:a.value}),class:"dropdown-item"},{default:N(()=>u[11]||(u[11]=[e("i",{class:"bi bi-eye me-2"},null,-1),S(" View")])),_:1},8,["href"])]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start","data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:u[1]||(u[1]=_=>W(n.value.find(A=>A.id===a.value)))},u[12]||(u[12]=[e("i",{class:"bi bi-pencil me-2"},null,-1),S(" Edit")]))]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start text-danger",onClick:u[2]||(u[2]=_=>j(a.value))},u[13]||(u[13]=[e("i",{class:"bi bi-trash me-2"},null,-1),S(" Delete")]))])])],4)):k("",!0),e("div",pl,[e("div",bl,[e("div",vl,[u[14]||(u[14]=e("div",{class:"modal-header"},[e("h5",null,"Edit Member Info"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",fl,[w(Ot,{member:d.value},null,8,["member"])])])])]),t.value?(b(),p("div",{key:1,class:"custom-modal-overlay",onClick:V(G,["self"])},[e("div",_l,[e("div",{class:"custom-modal-header"},[u[15]||(u[15]=e("h3",null,"Add Deceased Info",-1)),e("span",{class:"close-icon",onClick:G},"×")]),e("div",gl,[w(pt,{deceasedMember:l.value},null,8,["deceasedMember"])])])])):k("",!0)]),_:1})],64))}},kl=q(yl,[["__scopeId","data-v-c67a773d"]]);export{kl as default};
