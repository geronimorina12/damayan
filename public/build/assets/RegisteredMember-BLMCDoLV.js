import{r as g,x as P,f as c,o as m,b as e,h as M,e as U,t as p,d as N,i as b,D as _,u as n,I as j,F as B,G as R,l as J,J as K,a as C,s as q,n as D,j as Q,w as L,T as X,S as O,W as F,m as te,g as se,K as le,z as oe}from"./app-BEsV2jyy.js";import{A as ne}from"./AdminLayout-M0Y88O6V.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const ae={class:"container-fluid d-flex flex-row justify-content-center main-container"},de={class:"container mt-5"},ie={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},re={class:"row g-3"},ue={class:"col-md-6"},ce={class:"col-md-6"},me={class:"col-md-6"},pe={class:"col-md-6"},ve={class:"col-md-6"},be={class:"col-md-6"},fe={class:"col-md-6"},_e={class:"col-md-6"},ge={class:"col-md-6"},ye={class:"col-md-6"},he={key:0,class:"text-danger small mt-1"},$e={class:"col-12"},we={class:"mt-4"},ke={key:0,class:"text-center mt-3 text-muted"},xe={key:1,class:"table-responsive mt-2"},Me={class:"table table-bordered table-striped align-middle"},Ce=["onClick"],Ae={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},Ve={key:1,class:"card mt-4 p-3 shadow-sm"},Se={class:"col-md-6"},Ue={class:"col-md-6"},Ne={class:"col-md-6"},Ee={class:"col-md-6"},Be={class:"col-12 d-flex justify-content-end gap-2 mt-3"},Le={__name:"AddNewMember",setup(A){const v=g({name:"",relation:"",age:"",birth_date:""}),o=g([]),r=g(!1),d=g(""),a=P({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),w=()=>{if(a.clearErrors(),!/^0\d{10}$/.test(a.contact_number)){a.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}a.beneficiaries=o.value,a.post(route("addMemberPost"),{onSuccess:()=>{d.value="Member added successfully!",setTimeout(()=>d.value="",4e3)},onError:s=>console.log("An error occurred => ",s)})},k=()=>{o.value.push({...v.value}),v.value={name:"",relation:"",age:"",birth_date:""},r.value=!1},$=h=>{o.value.splice(h,1)},x=h=>{const s={year:"numeric",month:"long",day:"numeric"};return new Date(h).toLocaleDateString(void 0,s)};return(h,s)=>(m(),c("div",ae,[e("div",de,[d.value?(m(),c("div",ie,[U(p(d.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:s[0]||(s[0]=l=>d.value="")})])):M("",!0),e("form",{onSubmit:N(w,["prevent"]),class:"form"},[e("div",re,[e("div",ue,[b(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":s[1]||(s[1]=l=>n(a).last_name=l)},null,512),[[_,n(a).last_name]])]),e("div",ce,[s[18]||(s[18]=e("label",{class:"form-label"},"Birth date",-1)),b(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=l=>n(a).date_of_birth=l)},null,512),[[_,n(a).date_of_birth]])]),e("div",me,[b(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":s[3]||(s[3]=l=>n(a).first_name=l),required:""},null,512),[[_,n(a).first_name]])]),e("div",pe,[b(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":s[4]||(s[4]=l=>n(a).age=l),required:""},null,512),[[_,n(a).age]])]),e("div",ve,[b(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":s[5]||(s[5]=l=>n(a).middle_name=l)},null,512),[[_,n(a).middle_name]])]),e("div",be,[b(e("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=l=>n(a).gender=l),required:""},s[19]||(s[19]=[e("option",{value:"",disabled:""},"Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[j,n(a).gender]])]),e("div",fe,[b(e("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=l=>n(a).status=l),required:""},s[20]||(s[20]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[j,n(a).status]])]),e("div",_e,[b(e("input",{type:"number",class:"form-control",placeholder:"Purok","onUpdate:modelValue":s[8]||(s[8]=l=>n(a).purok=l),required:""},null,512),[[_,n(a).purok]])]),e("div",ge,[b(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":s[9]||(s[9]=l=>n(a).occupation=l),required:""},null,512),[[_,n(a).occupation]])]),e("div",ye,[b(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":s[10]||(s[10]=l=>n(a).contact_number=l),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[_,n(a).contact_number]]),n(a).errors.contact_number?(m(),c("div",he,p(n(a).errors.contact_number),1)):M("",!0)]),e("div",$e,[b(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":s[11]||(s[11]=l=>n(a).address=l),required:""},null,512),[[_,n(a).address]])])]),e("div",we,[s[22]||(s[22]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),o.value.length===0?(m(),c("div",ke," No beneficiary added ")):(m(),c("div",xe,[e("table",Me,[s[21]||(s[21]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(m(!0),c(B,null,R(o.value,(l,t)=>(m(),c("tr",{key:t},[e("td",null,p(l.name),1),e("td",null,p(l.relation),1),e("td",null,p(l.age),1),e("td",null,p(x(l.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:i=>$(t)}," Delete ",8,Ce)])]))),128))])])]))]),e("div",Ae,[r.value?M("",!0):(m(),c("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:s[12]||(s[12]=l=>r.value=!0)}," Add Beneficiary ")),s[23]||(s[23]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Submit",-1))])],32),r.value?(m(),c("div",Ve,[s[26]||(s[26]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:N(k,["prevent"]),class:"row g-2"},[e("div",Se,[b(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=l=>v.value.name=l),required:""},null,512),[[_,v.value.name]])]),e("div",Ue,[b(e("input",{type:"text",placeholder:"Relation",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=l=>v.value.relation=l),required:""},null,512),[[_,v.value.relation]])]),e("div",Ne,[b(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=l=>v.value.age=l),required:""},null,512),[[_,v.value.age]])]),e("div",Ee,[s[24]||(s[24]=e("label",{class:"form-label small"},"Birthdate",-1)),b(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[16]||(s[16]=l=>v.value.birth_date=l),required:""},null,512),[[_,v.value.birth_date]])]),e("div",Be,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[17]||(s[17]=l=>r.value=!1)}," Cancel "),s[25]||(s[25]=e("button",{type:"submit",class:"btn btn-primary"},"Save Beneficiary",-1))])],32)])):M("",!0)])]))}},qe=E(Le,[["__scopeId","data-v-6f62a135"]]),Ie={class:"container mt-4"},Re={key:0,class:"text-center my-5"},Te={key:1,class:"alert alert-danger"},De={key:2,class:"table-responsive"},Fe={class:"table table-striped table-bordered shadow-sm"},je={key:3,class:"alert alert-info"},Oe={__name:"NewlyCreated",setup(A){const v=g([]),o=g(!0),r=g(null),d=async()=>{var w,k;try{const $=await K.get("/member/new");v.value=$.data.data}catch($){r.value=((k=(w=$.response)==null?void 0:w.data)==null?void 0:k.message)||"Failed to fetch latest members."}finally{o.value=!1}},a=w=>new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return J(d),(w,k)=>(m(),c("div",Ie,[o.value?(m(),c("div",Re,k[0]||(k[0]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):r.value?(m(),c("div",Te,p(r.value),1)):v.value.length?(m(),c("div",De,[e("table",Fe,[k[1]||(k[1]=e("thead",{class:"table-primary"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Contact"),e("th",null,"Age"),e("th",null,"Gender"),e("th",null,"Registration Date")])],-1)),e("tbody",null,[(m(!0),c(B,null,R(v.value,$=>(m(),c("tr",{key:$.id},[e("td",null,p($.first_name)+" "+p($.middle_name)+" "+p($.last_name),1),e("td",null,p($.address),1),e("td",null,p($.contact_number),1),e("td",null,p($.age),1),e("td",null,p($.gender),1),e("td",null,p(a($.created_at)),1)]))),128))])])])):(m(),c("div",je," No newly registered members found. "))]))}},Pe=E(Oe,[["__scopeId","data-v-cb085a94"]]),We={class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-2"},Ge={id:"addNewMemberModal",class:"custom-modal"},He={class:"modal-content",style:{"min-width":"60%",height:"auto"}},ze={class:"modal-header"},Xe={class:"modal-body"},Je={id:"newCreatedMemberModal",class:"custom-modal",style:{"padding-top":"0"}},Ke={class:"modal-content",style:{"min-width":"60%",height:"auto"}},Qe={class:"modal-header alig-items-center"},Ye={class:"modal-body"},Ze={__name:"Header",setup(A){const v=r=>{document.getElementById(r).classList.add("show")},o=r=>{document.getElementById(r).classList.remove("show")};return window.addEventListener("click",r=>{document.querySelectorAll(".custom-modal").forEach(d=>{r.target===d&&d.classList.remove("show")})}),(r,d)=>(m(),c("div",null,[e("div",We,[d[6]||(d[6]=e("div",null,[e("h5",{class:"ms-3 fw-light"},[e("span",{class:"d-none d-sm-none d-lg-inline-block me-2"},"Registered"),e("span",null,"Members")])],-1)),e("div",null,[e("button",{class:"modern-btn me-3",onClick:d[0]||(d[0]=N(a=>v("addNewMemberModal"),["prevent"]))},d[4]||(d[4]=[e("i",{class:"bi bi-person-plus"},null,-1),e("span",null,"Add Member",-1)])),e("button",{class:"modern-btn secondary",onClick:d[1]||(d[1]=a=>v("newCreatedMemberModal"))},d[5]||(d[5]=[e("i",{class:"bi bi-person-lines-fill"},null,-1),e("span",null,"Newly Created",-1)]))])]),e("div",Ge,[e("div",He,[e("div",ze,[d[7]||(d[7]=e("h3",null,"Add New Member",-1)),e("button",{class:"close-btn",onClick:d[2]||(d[2]=a=>o("addNewMemberModal"))},"×")]),e("div",Xe,[C(qe)])])]),e("div",Je,[e("div",Ke,[e("div",Qe,[d[8]||(d[8]=e("div",{class:""},[e("h4",{class:"mb-3 text-dark fw-bold d-flex align-items-center"}," Newly Registered Member ")],-1)),e("button",{class:"close-btn2 fs-2",onClick:d[3]||(d[3]=a=>o("newCreatedMemberModal"))},"×")]),e("div",Ye,[C(Pe)])])])]))}},et=E(Ze,[["__scopeId","data-v-ff43b7b9"]]),tt={__name:"Alert",props:{status:{type:Boolean,default:!1},name:{type:String,default:""}},setup(A){const v=A,o=g(!1),r=g(null),d=g("");return q(()=>v.status,a=>{r.value=a,d.value="bounce-in",o.value=!0,setTimeout(()=>{d.value="slide-out",setTimeout(()=>{o.value=!1},500)},3e3)}),(a,w)=>(m(),c("div",null,[o.value?(m(),c("div",{key:0,class:D(["alert alert-info",d.value]),role:"alert"},[U(p(A.name)+"'s status has been changed to ",1),e("strong",null,p(r.value?"Active":"Inactive"),1)],2)):M("",!0)]))}},st=E(tt,[["__scopeId","data-v-f19df27b"]]),lt={class:"reminder-wrapper"},ot={class:"card shadow-sm p-4 rounded-4 bg-white border-0"},nt={key:0,class:"mb-4 text-center"},at={class:"fw-bold text-primary mb-1"},dt={class:"text-muted mb-0"},it={class:"row g-3"},rt={class:"col-md-6"},ut={class:"col-md-6"},ct={key:0,class:"mt-4 bg-light p-3 rounded border-start border-4 border-primary"},mt={key:0,class:"mt-4 d-flex flex-wrap gap-3 justify-content-center"},pt={__name:"IsDeceased",props:{deceasedMember:{type:Object,default:()=>({})}},setup(A){const v=P({message:"",type:"deathReport",memberId:null}),o=A,r=g({}),d=g(""),a=g("");q(()=>o.deceasedMember,x=>{r.value=x},{immediate:!0}),q([d,a],([x,h])=>{var s;if(x&&h&&((s=r.value)!=null&&s.first_name)){const l=r.value;v.message=`We regret to inform you that ${l.first_name} ${l.last_name} has passed away. Last night is on ${$(x)}, and the collection for burial assistance starts on ${$(h)}.`,v.memberId=l.id}else v.message=""});function w(){F.post(route("smsNotification.sendReminders"),{message:v.message},{onSuccess:()=>alert("Reminders sent successfully!"),onError:()=>alert("Error sending Reminders")})}const k=Q(()=>d.value&&a.value),$=x=>{const h={year:"numeric",month:"long",day:"numeric"};return new Date(x).toLocaleDateString(void 0,h)};return(x,h)=>(m(),c("div",lt,[e("div",ot,[r.value.first_name?(m(),c("div",nt,[e("h4",at,p(r.value.first_name)+" "+p(r.value.middle_name)+" "+p(r.value.last_name),1),e("p",dt,p(r.value.address),1)])):M("",!0),e("div",it,[e("div",rt,[h[2]||(h[2]=e("label",{class:"form-label fw-semibold text-secondary"},"Enter last night:",-1)),b(e("input",{type:"date",class:"form-control","onUpdate:modelValue":h[0]||(h[0]=s=>d.value=s)},null,512),[[_,d.value]])]),e("div",ut,[h[3]||(h[3]=e("label",{class:"form-label fw-semibold text-secondary"},"Start of contribution:",-1)),b(e("input",{type:"date",class:"form-control","onUpdate:modelValue":h[1]||(h[1]=s=>a.value=s)},null,512),[[_,a.value]])])]),C(X,{name:"fade"},{default:L(()=>[n(v).message?(m(),c("p",ct,p(n(v).message),1)):M("",!0)]),_:1}),C(X,{name:"fade"},{default:L(()=>{var s;return[k.value?(m(),c("div",mt,[C(n(O),{href:x.route("smsNotification.sendToAllSelectedV2",{type:"deathReport",message:n(v).message,deceased:(s=r.value)==null?void 0:s.id,last:d.value}),class:"btn-modern text-decoration-none"},{default:L(()=>h[4]||(h[4]=[e("i",{class:"bi bi-people-fill me-2"},null,-1),U("Send to all selected ")])),_:1},8,["href"]),e("button",{class:"btn-modern",onClick:w},h[5]||(h[5]=[e("i",{class:"bi bi-send-fill me-2"},null,-1),U("Send ")]))])):M("",!0)]}),_:1})])]))}},vt=E(pt,[["__scopeId","data-v-7863633d"]]),bt={class:"container-fluid d-flex flex-row justify-content-center main-container"},ft={class:"container mt-5"},_t={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},gt={class:"row g-3"},yt={class:"col-12 d-md-none"},ht={class:"row g-2"},$t={class:"col-12"},wt={class:"col-12"},kt={class:"col-12"},xt={class:"col-md-4 d-none d-md-block"},Mt={class:"col-md-4 d-none d-md-block"},Ct={class:"col-md-4 d-none d-md-block"},At={class:"col-12 col-md-6"},Vt={class:"col-12 col-md-6"},St={class:"col-12 col-md-6"},Ut={class:"col-12 col-md-6"},Nt={class:"col-12 col-md-6"},Et={class:"col-12 col-md-6"},Bt={class:"col-12 col-md-6"},Lt={key:0,class:"text-danger small mt-1"},qt={class:"col-12"},It={class:"mt-4"},Rt={key:0,class:"text-center mt-3 text-muted"},Tt={key:1,class:"table-responsive mt-2"},Dt={class:"table table-bordered table-striped align-middle"},Ft=["onClick"],jt={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},Ot={key:1,class:"card mt-4 p-3 shadow-sm"},Pt={class:"col-md-6"},Wt={class:"col-md-6"},Gt={class:"col-md-6"},Ht={class:"col-md-6"},zt={class:"col-12 d-flex justify-content-end gap-2 mt-3"},Xt={__name:"EditMember",props:{member:{type:Object,default:()=>({})}},setup(A){const v=A,o=P({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),r=g([]),d=g({name:"",relation:"",age:"",birth_date:""}),a=g(!1),w=g(""),k=async l=>{if(!l){console.log("No member ID provided");return}try{const t=await K.get(route("beneficiaries.fetch",{member:l}));t.data.success?(r.value=t.data.data,console.log("Beneficiaries fetched successfully:",t.data.data)):console.error("Failed to fetch beneficiaries:",t.data.message)}catch(t){console.error("Error fetching beneficiaries:",t)}};q(()=>v.member,l=>{l&&(o.first_name=l.first_name||"",o.last_name=l.last_name||"",o.address=l.address||"",o.contact_number=l.contact_number||"",o.date_of_birth=l.date_of_birth||"",o.purok=l.purok||"",o.age=l.age||"",o.middle_name=l.middle_name||"",o.status=l.status||"",o.occupation=l.occupation||"",o.gender=l.gender||"",o.beneficiaries=l.beneficiaries||[],l.id&&k(l.id))},{immediate:!0,deep:!0});const $=()=>{if(o.clearErrors(),!/^0\d{10}$/.test(o.contact_number)){o.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}o.beneficiaries=r.value,o.put(route("members.update",v.member.id),{onSuccess:()=>{w.value="Member updated successfully!",setTimeout(()=>w.value="",4e3),k(v.member.id)},onError:t=>console.error("An error occurred => ",t)})},x=()=>{const l={...d.value,member_id:v.member.id};r.value.push(l),d.value={name:"",relation:"",age:"",birth_date:""},a.value=!1},h=l=>{r.value.splice(l,1)},s=l=>{if(!l)return"";const t={year:"numeric",month:"long",day:"numeric"};return new Date(l).toLocaleDateString(void 0,t)};return(l,t)=>(m(),c("div",bt,[e("div",ft,[w.value?(m(),c("div",_t,[U(p(w.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=i=>w.value="")})])):M("",!0),e("form",{onSubmit:N($,["prevent"]),class:"form"},[e("div",gt,[e("div",yt,[e("div",ht,[e("div",$t,[b(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":t[1]||(t[1]=i=>n(o).first_name=i),required:""},null,512),[[_,n(o).first_name]])]),e("div",wt,[b(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":t[2]||(t[2]=i=>n(o).middle_name=i)},null,512),[[_,n(o).middle_name]])]),e("div",kt,[b(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":t[3]||(t[3]=i=>n(o).last_name=i)},null,512),[[_,n(o).last_name]])])])]),e("div",xt,[b(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":t[4]||(t[4]=i=>n(o).first_name=i),required:""},null,512),[[_,n(o).first_name]])]),e("div",Mt,[b(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":t[5]||(t[5]=i=>n(o).middle_name=i)},null,512),[[_,n(o).middle_name]])]),e("div",Ct,[b(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":t[6]||(t[6]=i=>n(o).last_name=i)},null,512),[[_,n(o).last_name]])]),e("div",At,[t[21]||(t[21]=e("label",{class:"form-label"},"Birth date",-1)),b(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[7]||(t[7]=i=>n(o).date_of_birth=i)},null,512),[[_,n(o).date_of_birth]])]),e("div",Vt,[b(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":t[8]||(t[8]=i=>n(o).age=i),required:""},null,512),[[_,n(o).age]])]),e("div",St,[b(e("select",{class:"form-select","onUpdate:modelValue":t[9]||(t[9]=i=>n(o).gender=i),required:""},t[22]||(t[22]=[e("option",{value:"",disabled:""},"Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[j,n(o).gender]])]),e("div",Ut,[b(e("select",{class:"form-select","onUpdate:modelValue":t[10]||(t[10]=i=>n(o).status=i),required:""},t[23]||(t[23]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[j,n(o).status]])]),e("div",Nt,[b(e("input",{type:"text",class:"form-control",placeholder:"Purok","onUpdate:modelValue":t[11]||(t[11]=i=>n(o).purok=i),required:""},null,512),[[_,n(o).purok]])]),e("div",Et,[b(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":t[12]||(t[12]=i=>n(o).occupation=i),required:""},null,512),[[_,n(o).occupation]])]),e("div",Bt,[b(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":t[13]||(t[13]=i=>n(o).contact_number=i),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[_,n(o).contact_number]]),n(o).errors.contact_number?(m(),c("div",Lt,p(n(o).errors.contact_number),1)):M("",!0)]),e("div",qt,[b(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":t[14]||(t[14]=i=>n(o).address=i),required:""},null,512),[[_,n(o).address]])])]),e("div",It,[t[25]||(t[25]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),r.value.length===0?(m(),c("div",Rt," No beneficiary added ")):(m(),c("div",Tt,[e("table",Dt,[t[24]||(t[24]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(m(!0),c(B,null,R(r.value,(i,T)=>(m(),c("tr",{key:T},[e("td",null,p(i.name),1),e("td",null,p(i.relation),1),e("td",null,p(i.age),1),e("td",null,p(s(i.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:W=>h(T)}," Delete ",8,Ft)])]))),128))])])]))]),e("div",jt,[a.value?M("",!0):(m(),c("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:t[15]||(t[15]=i=>a.value=!0)}," Add Beneficiary ")),t[26]||(t[26]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Save",-1))])],32),a.value?(m(),c("div",Ot,[t[29]||(t[29]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:N(x,["prevent"]),class:"row g-2"},[e("div",Pt,[b(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":t[16]||(t[16]=i=>d.value.name=i),required:""},null,512),[[_,d.value.name]])]),e("div",Wt,[b(e("input",{type:"text",placeholder:"Relation",class:"form-control","onUpdate:modelValue":t[17]||(t[17]=i=>d.value.relation=i),required:""},null,512),[[_,d.value.relation]])]),e("div",Gt,[b(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":t[18]||(t[18]=i=>d.value.age=i),required:""},null,512),[[_,d.value.age]])]),e("div",Ht,[t[27]||(t[27]=e("label",{class:"form-label small"},"Birthdate",-1)),b(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[19]||(t[19]=i=>d.value.birth_date=i),required:""},null,512),[[_,d.value.birth_date]])]),e("div",zt,[e("button",{type:"button",class:"btn btn-secondary",onClick:t[20]||(t[20]=i=>a.value=!1)}," Cancel "),t[28]||(t[28]=e("button",{type:"submit",class:"btn btn-primary"},"Save Beneficiary",-1))])],32)])):M("",!0)])]))}},Jt=E(Xt,[["__scopeId","data-v-881cc22e"]]),Kt={class:"main-section bg-light"},Qt={class:"container table-container"},Yt={class:"search-box mb-3"},Zt={class:"table-responsive"},es={class:"table table-bordered align-middle text-center"},ts={class:"text-start"},ss={class:"status-cell"},ls={class:"status-toggle"},os={class:"toggle-switch"},ns=["checked","onChange"],as={class:"status-cell"},ds={class:"status-toggle"},is={class:"toggle-switch"},rs=["checked","onClick"],us={class:"actions-column"},cs={class:"action-buttons-large"},ms=["onClick"],ps=["onClick"],vs={class:"action-buttons-small"},bs=["onClick"],fs={key:0},_s={class:"pagination-wrapper mt-3 mb-5"},gs={class:"pagination-controls"},ys=["onClick","innerHTML"],hs={class:"list-unstyled m-0"},$s={class:"modal fade",id:"editMember",tabindex:"-1"},ws={class:"modal-dialog modal-lg"},ks={class:"modal-content"},xs={class:"modal-body"},Ms={class:"custom-modal"},Cs={class:"custom-modal-body"},As={__name:"RegisteredMember",props:{members:{type:Object,default:()=>({data:[],links:[],prev_page_url:null,next_page_url:null})},deceasedMember:{type:Array,default:()=>[]}},setup(A){const v=A,o=g([]),r=g(!1),d=g({top:"0px",left:"0px"}),a=g(null);g({});const w=g(!1),k=g(""),$=g(""),x=g([]),h=g({}),s=g(!1),l=g({});g(null),g(!1),g(""),q(()=>v.members,f=>{o.value=f.data||[]},{immediate:!0}),q(()=>v.deceasedMember,f=>{x.value=f.data||[]},{immediate:!0});const t=Q(()=>$.value?o.value.filter(f=>`${f.first_name} ${f.middle_name||""} ${f.last_name}`.toLowerCase().includes($.value.toLowerCase())||(f.contact_number||"").toLowerCase().includes($.value.toLowerCase())||(f.purok||"").toLowerCase().includes($.value.toLowerCase())):o.value),i=f=>{confirm("Are you sure you want to trash this member?")&&F.delete(route("deleteMember",{id:f}),{onSuccess:()=>{alert("Member trashed"),r.value=!1}})},T=f=>{const u=f.status==="active"?"inactive":"active";F.put(route("toggleMemberStatus",{id:f.id}),{status:u},{onSuccess:()=>{f.status=u,w.value=u==="active",k.value=`${f.first_name} ${f.middle_name} ${f.last_name}`}})},W=(f,u)=>{if(r.value&&a.value===u){r.value=!1,a.value=null;return}a.value=u,r.value=!0,oe(()=>{const y=f.currentTarget.getBoundingClientRect(),S=document.querySelector(".actions-popup");if(!S)return;const V=S.offsetWidth,ee=window.innerWidth;let I=y.right+window.scrollX+10;I+V>ee&&(I=y.left+window.scrollX-V-10,I<0&&(I=10)),d.value={top:`${y.top+window.scrollY}px`,left:`${I}px`}})},G=f=>{r.value&&f.target&&!f.target.closest(".actions-popup")&&!f.target.closest(".three-dots-button")&&(r.value=!1,a.value=null)};J(()=>document.addEventListener("click",G)),te(()=>document.removeEventListener("click",G));const Y=f=>{f&&F.visit(f)},Z=f=>{h.value=f||null,s.value=!0},H=()=>{s.value=!1},z=f=>{r.value=!1,l.value={...f}};return(f,u)=>(m(),c(B,null,[C(n(se),{title:"Registered members"}),C(ne,null,{default:L(()=>[e("div",Kt,[C(et),C(st,{status:w.value,name:k.value},null,8,["status","name"]),e("div",Qt,[e("div",Yt,[b(e("input",{type:"text",class:"form-control search-input",placeholder:"Search members by name, contact, or purok...","onUpdate:modelValue":u[0]||(u[0]=y=>$.value=y)},null,512),[[_,$.value]])]),e("div",Zt,[e("table",es,[u[10]||(u[10]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"ID"),e("th",null,"NAME"),e("th",null,"GENDER"),e("th",null,"AGE"),e("th",null,"CONTACT NO."),e("th",null,"STREET"),e("th",null,"STATUS"),e("th",null,"DECEASED"),e("th",null,"ACTION")])],-1)),e("tbody",null,[(m(!0),c(B,null,R(t.value,(y,S)=>(m(),c("tr",{key:S},[e("td",null,p(y.id),1),e("td",ts,p(y.first_name)+" "+p(y.middle_name)+" "+p(y.last_name),1),e("td",null,p(y.gender||"N/A"),1),e("td",null,p(y.age),1),e("td",null,p(y.contact_number),1),e("td",null,p(y.purok),1),e("td",ss,[e("div",ls,[e("label",os,[e("input",{type:"checkbox",checked:y.status==="active",onChange:V=>T(y)},null,40,ns),u[3]||(u[3]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:D(["status-label",y.status==="active"?"active":"inactive"])},p(y.status==="active"?"Active":"Inactive"),3)])]),e("td",as,[e("div",ds,[e("label",is,[e("input",{type:"checkbox",checked:x.value.some(V=>V.member_id===y.id),onClick:V=>Z(y)},null,8,rs),u[4]||(u[4]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:D(["status-label",y.status==="active"?"active":"inactive"])},null,2)])]),e("td",us,[e("div",cs,[C(n(O),{href:f.route("viewMemberInfo",{id:y.id}),class:"me-1"},{default:L(()=>u[5]||(u[5]=[e("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"]),e("button",{"data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:V=>z(y),class:"me-1"},u[6]||(u[6]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,ms),e("button",{onClick:V=>i(y.id)},u[7]||(u[7]=[e("i",{class:"bi bi-trash"},null,-1)]),8,ps)]),e("div",vs,[e("button",{class:"btn btn-sm btn-outline-dark three-dots-button",onClick:N(V=>W(V,y.id),["stop"])},u[8]||(u[8]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)]),8,bs)])])]))),128)),t.value.length===0?(m(),c("tr",fs,u[9]||(u[9]=[e("td",{colspan:"9",class:"text-center text-muted"},"No members found",-1)]))):M("",!0)])])]),e("div",_s,[e("div",gs,[(m(!0),c(B,null,R(v.members.links,(y,S)=>(m(),c("button",{key:S,class:D(["btn pagination-btn",y.active?"btn-primary":"btn-outline-primary"]),onClick:V=>Y(y.url),innerHTML:y.label},null,10,ys))),128))])])])]),r.value?(m(),c("div",{key:0,class:"actions-popup bg-white border rounded shadow-sm p-2",style:le({top:d.value.top,left:d.value.left})},[e("ul",hs,[e("li",null,[C(n(O),{href:f.route("viewMemberInfo",{id:a.value}),class:"dropdown-item"},{default:L(()=>u[11]||(u[11]=[e("i",{class:"bi bi-eye me-2"},null,-1),U(" View")])),_:1},8,["href"])]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start","data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:u[1]||(u[1]=y=>z(o.value.find(S=>S.id===a.value)))},u[12]||(u[12]=[e("i",{class:"bi bi-pencil me-2"},null,-1),U(" Edit")]))]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start text-danger",onClick:u[2]||(u[2]=y=>i(a.value))},u[13]||(u[13]=[e("i",{class:"bi bi-trash me-2"},null,-1),U(" Delete")]))])])],4)):M("",!0),e("div",$s,[e("div",ws,[e("div",ks,[u[14]||(u[14]=e("div",{class:"modal-header"},[e("h5",null,"Edit Member Info"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",xs,[C(Jt,{member:l.value},null,8,["member"])])])])]),s.value?(m(),c("div",{key:1,class:"custom-modal-overlay",onClick:N(H,["self"])},[e("div",Ms,[e("div",{class:"custom-modal-header"},[u[15]||(u[15]=e("h3",null,"Add Deceased Info",-1)),e("span",{class:"close-icon",onClick:H},"×")]),e("div",Cs,[C(vt,{deceasedMember:h.value},null,8,["deceasedMember"])])])])):M("",!0)]),_:1})],64))}},Es=E(As,[["__scopeId","data-v-3a83792c"]]);export{Es as default};
