import{r as f,C as X,x as B,s as j,j as N,l as ee,f as d,o as u,a as A,b as e,u as o,g as Q,h as k,e as x,t as h,M as H,d as Z,i as v,D as w,I as G,L as z,n as W,F as L,O as te,w as K,G as se,S as le,W as oe}from"./app-CaaouRKp.js";import{A as ae}from"./AdminLayout-fWCRPAL3.js";import{M as q}from"./bootstrap.esm-B0YAJBZY.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const ie={class:"main-container"},ne={class:"container border-0 pt-2"},re={class:"card-body px-3"},de={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},ue={key:1,class:"alert alert-warning alert-dismissible fade show",role:"alert"},ce={class:"row mb-3"},me={class:"col-md-4 mb-2 mb-md-0"},pe={class:"col-md-4 mb-2 mb-md-0"},fe={class:"col-md-4"},be={class:"mb-3"},ve={key:0,value:"president"},_e={key:1,value:"purok_leader"},ye={key:0,class:"bg-white ask-card mb-5 rounded-xl p-6 w-100 mx-auto max-w-sm animate-fade-in"},ge={class:"ask-text mb-4"},we={key:0},ke={key:1},he={class:"mb-4 d-flex align-items-center justify-content-start"},xe={class:"collector-toggle"},$e={class:"toggle-switch"},Ce=["disabled"],Se={class:"form-check-label",for:"collector"},Ee={key:0,class:"text-danger"},Me={key:1},Te={class:"mb-3"},Oe={class:"mb-3"},Ve={class:"mb-3"},Ae={key:0,class:"text-danger"},Ue={class:"mb-3"},je={key:2},Ne={class:"mb-3"},Pe={class:"w-100 d-flex flex-row align-items-center justify-content-between"},De={class:"w-50"},Ie=["max"],Fe={class:"w-50"},Le=["min"],qe={class:"d-flex justify-content-start align-items-center my-4"},Re={class:"collector-toggle"},Ye={class:"toggle-switch"},Be=["checked"],He=["disabled"],Ge={key:0},ze={key:1},We={__name:"Add",props:{closeModal:{},closeModalModifiers:{},parentMessage:{},parentMessageModifiers:{}},emits:["update:closeModal","update:parentMessage"],setup(U){const g=f(!1),y=f("");let $=f(!1),_=f(""),a=f(!1);X(U,"closeModal");const V=f(0),M=X(U,"parentMessage"),S=f({}),C=f(!1);let T=f(0),E=f(0);const s=B({first_name:"",middle_initial:"",last_name:"",name:"",email:"",password:"",re_password:"",position:"",term_start:"",term_end:"",status:1,role:"collector",purok:"",is_override:!1});async function l(){try{const n=await fetch("/officials/president/has",{method:"GET",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`HTTP error! Status: ${n.status}`);const t=await n.json();a.value=t.has_president}catch(n){console.error("Error fetching president status:",n)}}async function b(){try{const t=await(await fetch("/collectors/count",{method:"GET",headers:{"Content-Type":"application/json"}})).json();V.value=t.collectors,console.log("Collectors count:",V.value)}catch(n){console.error("Error fetching collectos status:",n)}}async function p(){try{const t=await(await fetch("/officials/count",{method:"GET",headers:{"Content-Type":"application/json"}})).json();S.value=t.data,console.log("officials count:",S.value)}catch(n){console.error("Error fetching collectos status:",n)}}l(),b(),p(),j(()=>s.position,n=>{g.value=n==="purok_leader"},{immediate:!0}),j(g,n=>{n?(s.term_start="",s.term_end="",s.position="purok_leader"):(s.position==="purok_leader"&&(s.position=""),s.email="",s.password="",s.re_password="")});const O=N(()=>s.password===s.re_password);function P(){if(!O.value&&g.value){$.value=!0,_.value="Passwords do not match.";return}const n=s.middle_initial?` ${s.middle_initial}.`:"";if(s.name=`${s.first_name}${n} ${s.last_name}`.trim(),g.value){if(s.email===""){$.value=!0,_.value="Please provide an email.";return}else if(s.password===""){$.value=!0,_.value="Please provide a password.";return}B({name:s.name,email:s.email,password:s.password,role:"collector",purok:s.purok}).post(route("reports.storeCollector"),{onSuccess:()=>{y.value="Collector added successfully!",D(),s.reset(),g.value=!1,setTimeout(()=>y.value="",4e3),M.value="Collector added successfully!"},onError:r=>console.log(r)})}else s.post(route("officials.add"),{onSuccess:()=>{y.value="Official added successfully!",D(),s.reset(),setTimeout(()=>y.value="",4e3),M.value="Official added successfully!"},onError:t=>console.log("An error occurred:",t)})}function D(){const n=document.getElementById("addOfficial");n&&((q.getInstance(n)||new q(n)).hide(),setTimeout(()=>{const r=document.querySelector(".modal-backdrop");r&&r.remove(),document.body.classList.remove("modal-open"),document.body.style.removeProperty("padding-right")},300))}f(!1);const R=()=>{C.value=!1},I=()=>{s.is_override=!0,C.value=!1};j(()=>s.position,n=>{if(!n)return;const t=n+"_count";S.value[t]&&S.value[t]>0?C.value=!0:(C.value=!1,P())});const F=new Date().toISOString().split("T")[0],Y=N(()=>{const n=new Date;return n.setDate(n.getDate()-1),n.toISOString().split("T")[0]}),c=N(()=>F),i=async()=>{try{const n=await fetch("/inactive-collectors-count",{headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"same-origin"});if(console.log("STATUS:",n.status),!n.ok){const r=await n.text();throw console.log("RESPONSE BODY:",r),new Error("Network response was not ok")}const t=await n.json();T.value=t.inactive_collectors,E.value=t.active_collectors,m()}catch(n){console.error("Error fetching inactive collectors count:",n)}},m=()=>T.value>=1&&E.value<4;return ee(()=>{i()}),(n,t)=>(u(),d(L,null,[A(o(Q),{title:"Add Official"}),e("div",ie,[e("div",ne,[e("div",re,[y.value?(u(),d("div",de,[t[15]||(t[15]=e("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),x(" "+h(y.value)+" ",1),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:t[0]||(t[0]=r=>y.value="")})])):k("",!0),o($)?(u(),d("div",ue,[t[16]||(t[16]=e("i",{class:"bi bi-exclamation-circle-fill me-2"},null,-1)),x(" "+h(o(_))+" ",1),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:t[1]||(t[1]=r=>H(_)?_.value="":_="")})])):k("",!0),e("form",{onSubmit:Z(P,["prevent"])},[t[39]||(t[39]=e("label",{class:"form-label fw-semibold"},"Full Name",-1)),e("div",ce,[e("div",me,[v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o(s).first_name=r),type:"text",class:"form-control",placeholder:"e.g. Juan",required:""},null,512),[[w,o(s).first_name]])]),e("div",pe,[v(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>o(s).middle_initial=r),type:"text",maxlength:"1",class:"form-control",placeholder:"M.I. (optional)"},null,512),[[w,o(s).middle_initial]])]),e("div",fe,[v(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o(s).last_name=r),type:"text",class:"form-control",placeholder:"e.g. Reyes",required:""},null,512),[[w,o(s).last_name]])])]),e("div",be,[t[22]||(t[22]=e("label",{for:"position",class:"form-label fw-semibold"},"Position",-1)),v(e("select",{id:"position",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=r=>o(s).position=r),required:""},[t[17]||(t[17]=e("option",{disabled:"",value:""},"Select a position",-1)),o(a)?k("",!0):(u(),d("option",ve,"President")),t[18]||(t[18]=e("option",{value:"vice_president"},"Vice President",-1)),t[19]||(t[19]=e("option",{value:"secretary"},"Secretary",-1)),t[20]||(t[20]=e("option",{value:"treasurer"},"Treasurer",-1)),t[21]||(t[21]=e("option",{value:"auditor"},"Auditor",-1)),m()?(u(),d("option",_e,"Purok Leader")):k("",!0)],512),[[G,o(s).position]])]),C.value?(u(),d("div",ye,[e("h2",ge,[t[23]||(t[23]=x(" Do you want to override this current ")),o(s).position=="vice_president"?(u(),d("span",we,"vice president")):(u(),d("span",ke,h(o(s).position||"official"),1)),t[24]||(t[24]=x(" ? "))]),e("div",{class:"flex justify-end gap-3 mt-6"},[e("button",{onClick:R,class:"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition"}," Cancel "),e("button",{onClick:I,class:"px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition"}," Yes ")])])):k("",!0),e("div",he,[e("div",xe,[e("label",$e,[v(e("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=r=>g.value=r),disabled:!m()},null,8,Ce),[[z,g.value]]),t[25]||(t[25]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:W(["status-label",g.value==="active"?"active":"inactive"])},null,2)]),e("div",null,[e("label",Se,[t[26]||(t[26]=x("Register as Collector ")),m()===!1?(u(),d("p",Ee," Purok leader / Collector limit has been reached. ")):k("",!0)])])]),g.value?(u(),d("div",Me,[e("div",Te,[t[27]||(t[27]=e("label",{for:"email",class:"form-label fw-semibold"},"Email",-1)),v(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>o(s).email=r),type:"email",id:"email",class:"form-control",placeholder:"juan45@gmail.com"},null,512),[[w,o(s).email]])]),e("div",Oe,[t[28]||(t[28]=e("label",{for:"password",class:"form-label fw-semibold"},"Password",-1)),v(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>o(s).password=r),type:"password",id:"password",class:"form-control",placeholder:"I@mJuan45_"},null,512),[[w,o(s).password]])]),e("div",Ve,[t[29]||(t[29]=e("label",{for:"re_password",class:"form-label fw-semibold"},"Re-enter Password",-1)),v(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>o(s).re_password=r),type:"password",id:"re_password",class:"form-control",placeholder:"Re-enter password"},null,512),[[w,o(s).re_password]]),O.value?k("",!0):(u(),d("small",Ae,"Passwords do not match"))]),e("div",Ue,[t[31]||(t[31]=e("label",{for:"purok",class:"form-label fw-semibold"},"Purok",-1)),v(e("select",{class:"form-control","onUpdate:modelValue":t[10]||(t[10]=r=>o(s).purok=r)},t[30]||(t[30]=[e("option",{value:"1"},"Purok 1",-1),e("option",{value:"2"},"Purok 2",-1),e("option",{value:"3"},"Purok 3",-1),e("option",{value:"4"},"Purok 4",-1)]),512),[[G,o(s).purok]])])])):(u(),d("div",je,[e("div",Ne,[t[32]||(t[32]=e("label",{for:"email",class:"form-label fw-semibold"},"Email",-1)),v(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>o(s).email=r),type:"email",id:"email",class:"form-control",placeholder:"juan45@gmail.com"},null,512),[[w,o(s).email]])]),e("div",Pe,[e("div",De,[t[33]||(t[33]=e("label",{for:"term_start",class:"form-label fw-semibold"},"Term Start",-1)),v(e("input",{"onUpdate:modelValue":t[12]||(t[12]=r=>o(s).term_start=r),type:"date",id:"term_start",class:"form-control",max:Y.value,required:""},null,8,Ie),[[w,o(s).term_start]])]),e("div",Fe,[t[34]||(t[34]=e("label",{for:"term_end",class:"form-label fw-semibold"},"Term End",-1)),v(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>o(s).term_end=r),type:"date",id:"term_end",class:"form-control",min:c.value,required:""},null,8,Le),[[w,o(s).term_end]])])])])),e("div",qe,[e("div",Re,[e("label",Ye,[v(e("input",{type:"checkbox",checked:n.isCollectorClicked===o(s).status,id:"status","onUpdate:modelValue":t[14]||(t[14]=r=>o(s).status=r),"true-value":"1","false-value":"0"},null,8,Be),[[z,o(s).status]]),t[35]||(t[35]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:W(["status-label",g.value==="active"?"active":"inactive"])},null,2)]),t[36]||(t[36]=e("div",null,[e("label",{class:"form-check-label",for:"status"},"Active Status")],-1))]),e("button",{type:"submit",class:"btn btn-primary w-100 py-2 shadow-sm",disabled:o(s).processing||g.value&&!O.value},[o(s).processing?(u(),d("span",ze,t[38]||(t[38]=[e("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1),x(" Saving... ")]))):(u(),d("span",Ge,t[37]||(t[37]=[e("i",{class:"bi bi-save me-2"},null,-1),x(" Save Record")])))],8,He)],32)])])])],64))}},Je=J(We,[["__scopeId","data-v-80241141"]]),Xe={class:"main-container"},Ke={class:"container border-0 pt-2"},Qe={class:"card-body px-3"},Ze={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},et={key:1,class:"alert alert-danger alert-dismissible fade show",role:"alert"},tt={class:"row mb-3"},st={class:"col-md-4 mb-2 mb-md-0"},lt={class:"col-md-4 mb-2 mb-md-0"},ot={class:"col-md-4"},at={class:"mb-3"},it={class:"mb-3"},nt={class:"mb-3"},rt=["min"],dt={class:"mb-3"},ut=["min"],ct={class:"container px-0 px-0 d-flex flex-row justify-content-start align-items-center gap-2 mb-2"},mt={class:"status-cell"},pt={class:"status-toggle"},ft={class:"toggle-switch"},bt=["disabled"],vt={key:0,class:"text-danger"},_t=["disabled"],yt={key:0},gt={key:1},wt={__name:"Edit",props:{official:{type:Object,default:()=>({})}},setup(U){const g=U,y=f(""),$=f(""),_=f(!1),a=B({first_name:"",middle_initial:"",last_name:"",email:"",position:"collector",term_start:"",term_end:"",status:1});j(()=>g.official,s=>{if(s&&Object.keys(s).length){const[l,b,p]=V(s.name);a.first_name=l,a.middle_initial=b,a.last_name=p,a.email=s.email||"",a.position=s.position||"collector",a.term_start=s.term_start||"",a.term_end=s.term_end||"",a.status=s.status??0}console.log("Editing Official:",a)},{immediate:!0});function V(s=""){const l=s.trim().split(" "),b=l[0]||"",p=l[l.length-1]||"",O=l.length>2?l[1].replace(".",""):"";return[b,O,p]}function M(){const s=a.middle_initial?` ${a.middle_initial}.`:"",l=`${a.first_name}${s} ${a.last_name}`.trim();y.value="",$.value="",_.value=!1,a.position=="collector"?a.put(route("officials.collector.editData",{id:g.official.id}),{data:{name:l,position:a.position,term_start:a.term_start,term_end:a.term_end,status:a.status,email:a.email},onSuccess:()=>{y.value="Official updated successfully!",setTimeout(()=>{S()},500)},onError:b=>{_.value=!0,$.value=Object.values(b).flat().join(" "),console.error(b)}}):a.put(route("officials.editData",{id:g.official.id}),{data:{name:l,position:a.position,term_start:a.term_start,term_end:a.term_end,status:a.status,email:a.email},onSuccess:()=>{y.value="Official updated successfully!",setTimeout(()=>{S()},500)},onError:b=>{_.value=!0,$.value=Object.values(b).flat().join(" "),console.error(b)}})}function S(){const s=document.getElementById("editOfficial");if(!s)return;let l=q.getInstance(s);l||(l=new q(s)),l.hide();const b=document.getElementsByClassName("modal-backdrop");for(;b[0];)b[0].parentNode.removeChild(b[0]);document.body.classList.remove("modal-open")}const C=new Date().getFullYear(),T=N(()=>`${C-3}-12-31`),E=N(()=>`${C+1}-01-01`);return j(()=>a.term_start,s=>{if(!s)return;const l=new Date(s),b=new Date;b.setFullYear(b.getFullYear()+2),l.toISOString().slice(0,10)===b.toISOString().slice(0,10)&&(a.status=1)}),(s,l)=>{const b=te("Head");return u(),d(L,null,[A(b,{title:"Edit Official"}),e("div",Xe,[e("div",Ke,[e("div",Qe,[y.value?(u(),d("div",Ze,[l[10]||(l[10]=e("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),x(" "+h(y.value)+" ",1),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:l[0]||(l[0]=p=>y.value="")})])):k("",!0),_.value?(u(),d("div",et,[l[11]||(l[11]=e("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),x(" "+h($.value)+" ",1),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"alert","aria-label":"Close",onClick:l[1]||(l[1]=p=>_.value=!1)})])):k("",!0),e("form",{onSubmit:Z(M,["prevent"])},[l[20]||(l[20]=e("label",{class:"form-label fw-semibold"},"Full Name",-1)),e("div",tt,[e("div",st,[v(e("input",{"onUpdate:modelValue":l[2]||(l[2]=p=>o(a).first_name=p),type:"text",class:"form-control",placeholder:"First Name",required:""},null,512),[[w,o(a).first_name]])]),e("div",lt,[v(e("input",{"onUpdate:modelValue":l[3]||(l[3]=p=>o(a).middle_initial=p),type:"text",maxlength:"1",class:"form-control",placeholder:"M.I."},null,512),[[w,o(a).middle_initial]])]),e("div",ot,[v(e("input",{"onUpdate:modelValue":l[4]||(l[4]=p=>o(a).last_name=p),type:"text",class:"form-control",placeholder:"Last Name",required:""},null,512),[[w,o(a).last_name]])])]),e("div",at,[l[12]||(l[12]=e("label",{for:"position",class:"form-label fw-semibold"},"Position",-1)),v(e("input",{id:"position",class:"form-control","onUpdate:modelValue":l[5]||(l[5]=p=>o(a).position=p),required:"",disabled:""},null,512),[[w,o(a).position]])]),e("div",it,[l[13]||(l[13]=e("label",{for:"email",class:"form-label fw-semibold"},"Email",-1)),v(e("input",{"onUpdate:modelValue":l[6]||(l[6]=p=>o(a).email=p),type:"email",id:"email",class:"form-control",placeholder:"juan45@gmail.com"},null,512),[[w,o(a).email]])]),e("div",nt,[l[14]||(l[14]=e("label",{for:"term_start",class:"form-label fw-semibold"},"Term Start",-1)),v(e("input",{"onUpdate:modelValue":l[7]||(l[7]=p=>o(a).term_start=p),type:"date",id:"term_start",class:"form-control",min:T.value,required:""},null,8,rt),[[w,o(a).term_start]])]),e("div",dt,[l[15]||(l[15]=e("label",{for:"term_end",class:"form-label fw-semibold"},"Term End",-1)),v(e("input",{"onUpdate:modelValue":l[8]||(l[8]=p=>o(a).term_end=p),type:"date",id:"term_end",class:"form-control",min:E.value,required:""},null,8,ut),[[w,o(a).term_end]])]),e("div",ct,[e("div",mt,[e("div",pt,[e("label",ft,[v(e("input",{type:"checkbox","onUpdate:modelValue":l[9]||(l[9]=p=>o(a).status=p),disabled:o(a).status==0},null,8,bt),[[z,o(a).status]]),l[16]||(l[16]=e("span",{class:"toggle-slider"},null,-1))])])]),l[17]||(l[17]=e("div",null,"Status",-1))]),o(a).status==0?(u(),d("p",vt," This official has ended their term.")):k("",!0),e("button",{type:"submit",class:"btn btn-primary w-100 py-2 shadow-sm",disabled:o(a).processing},[o(a).processing?(u(),d("span",gt,l[19]||(l[19]=[e("span",{class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},null,-1),x(" Updating... ")]))):(u(),d("span",yt,l[18]||(l[18]=[e("i",{class:"bi bi-save me-2"},null,-1),x(" Update Record ")])))],8,_t)],32)])])])],64)}}},kt=J(wt,[["__scopeId","data-v-dec9fb73"]]),ht={class:"modern-container"},xt={class:"scroll-content"},$t={class:"d-flex flex-wrap align-items-center mb-3 gap-2"},Ct={class:"input-group",style:{"max-width":"300px"}},St={class:"input-group",style:{"max-width":"200px"}},Et={key:0,class:"alert alert-success alert-dismissible fade show position-fixed top-0 end-0 mt-3 me-3 shadow-lg",role:"alert",style:{"z-index":"9999","min-width":"280px"}},Mt={class:"content-wrapper"},Tt={key:0,class:"table-container"},Ot={class:"table-responsive"},Vt={class:"modern-table"},At={class:"text-center"},Ut={class:"text-start"},jt={class:"text-center"},Nt=["onClick"],Pt=["onClick"],Dt={key:1,class:"empty-state text-center py-5"},It={key:0,class:"text-muted"},Ft={key:1,class:"text-muted"},Lt={class:"footer-actions d-flex justify-content-between mt-4"},qt={class:"modal fade",id:"addOfficial",tabindex:"-1","aria-labelledby":"addOfficialLabel","aria-hidden":"true"},Rt={class:"modal-dialog modern-modal"},Yt={class:"modal-content"},Bt={class:"modal-body"},Ht={class:"modal fade",id:"editOfficial",tabindex:"-1","aria-labelledby":"editOfficialLabel","aria-hidden":"true"},Gt={class:"modal-dialog modern-modal"},zt={class:"modal-content"},Wt={class:"modal-body"},Jt={key:0,class:"modal fade show d-block",tabindex:"-1",role:"dialog",style:{"background-color":"rgba(0,0,0,0.5)"}},Xt={class:"modal-dialog modal-dialog-centered",role:"document"},Kt={class:"modal-content"},Qt={class:"modal-header"},Zt={class:"modal-title"},es={class:"modal-body"},ts={class:"modal-footer"},ss={__name:"Home",props:{officials:Array},setup(U){const g=U;let y=f([]),$=f({}),_=f(""),a=f("active");const V=f(""),M=f(!1),S=f(""),C=f(""),T=f(""),E=f(null),s=f(null),l=(c,i,m,n=null)=>{S.value=c,C.value=i,T.value="confirm",E.value=m,s.value=n,M.value=!0},b=(c,i)=>{S.value=c,C.value=i,T.value="alert",M.value=!0},p=()=>{E.value&&s.value?E.value(s.value):E.value&&E.value(),M.value=!1},O=()=>{M.value=!1,E.value=null,s.value=null},P=c=>{l("Delete Official","Are you sure you want to delete this official? This action cannot be undone.",D,c)},D=c=>{oe.delete(route("officials.delete",{id:c}),{onSuccess:()=>b("Success","Official deleted successfully."),onError:()=>b("Error","Failed to delete the official.")})},R=c=>{$.value=c},I=c=>{const i=new Date(c);if(isNaN(i.getTime()))return"~";const m={year:"numeric"};return i.toLocaleDateString(void 0,m)},F=N(()=>!y.value||y.value.length===0?[]:y.value.filter(c=>{const i=_.value.toLowerCase().trim(),m=i===""||c.name&&c.name.toLowerCase().includes(i)||c.position&&c.position.toLowerCase().includes(i)||c.role&&c.role.toLowerCase().includes(i);let n=!1;return a.value==="all"?n=!0:a.value==="active"?n=c.status:a.value==="inactive"&&(n=!c.status),m&&n})),Y=c=>c?c.charAt(0).toUpperCase()+c.slice(1):"";return j(()=>g.officials,c=>{y.value=c||[],console.log("Officials: ",y.value)},{immediate:!0}),(c,i)=>(u(),d(L,null,[A(o(Q),{title:"View officials"}),A(ae,null,{default:K(()=>[e("div",ht,[e("div",xt,[i[14]||(i[14]=e("div",{class:"header-section mb-3 d-flex align-items-center justify-content-between"},[e("h5",{class:"fw-light mb-0"},"Protec Damayan Officials")],-1)),e("div",$t,[e("div",Ct,[i[3]||(i[3]=e("span",{class:"input-group-text bg-white"},[e("i",{class:"bi bi-search"})],-1)),v(e("input",{type:"text",class:"form-control",placeholder:"Search by name or position...","onUpdate:modelValue":i[0]||(i[0]=m=>H(_)?_.value=m:_=m)},null,512),[[w,o(_)]])]),e("div",St,[i[5]||(i[5]=e("span",{class:"input-group-text bg-white"},[e("i",{class:"bi bi-funnel"})],-1)),v(e("select",{class:"form-select","onUpdate:modelValue":i[1]||(i[1]=m=>H(a)?a.value=m:a=m)},i[4]||(i[4]=[e("option",{value:"active",selected:""},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[G,o(a)]])])]),V.value?(u(),d("div",Et,[i[6]||(i[6]=e("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),x(" "+h(V.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:i[2]||(i[2]=m=>V.value="")})])):k("",!0),e("div",Mt,[F.value.length>0?(u(),d("div",Tt,[e("div",Ot,[e("table",Vt,[i[9]||(i[9]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Position"),e("th",null,"Term"),e("th",{class:"text-center"},"Status"),e("th",{class:"text-center"},"Actions")])],-1)),e("tbody",null,[(u(!0),d(L,null,se(F.value,m=>(u(),d("tr",{key:m.id},[e("td",null,h(m.name),1),e("td",null,[e("span",null,h(m.position==="vice_president"?"Vice President":Y(m.position)||"Collector"),1)]),e("td",null,h(I(m.term_start||"N/A"))+" - "+h(I(m.term_end||"N/A")),1),e("td",At,[e("div",Ut,[e("span",{class:W([m.status?"text-success":"text-danger","fw-bold status-label ps-3"])},h(m.status?"Active":"Inactive"),3)])]),e("td",jt,[e("button",{class:"btn btn-outline-primary btn-sm me-2",onClick:n=>R(m),"data-bs-toggle":"modal","data-bs-target":"#editOfficial"},i[7]||(i[7]=[e("i",{class:"bi bi-pencil text-dark"},null,-1)]),8,Nt),e("button",{class:"btn btn-outline-danger btn-sm",onClick:n=>P(m.id)},i[8]||(i[8]=[e("i",{class:"bi bi-trash text-dark"},null,-1)]),8,Pt)])]))),128))])])])])):(u(),d("div",Dt,[i[10]||(i[10]=e("i",{class:"bi bi-people fs-1 text-secondary mb-2"},null,-1)),i[11]||(i[11]=e("h5",null,"No Officials Found",-1)),o(_)||o(a)!=="all"?(u(),d("p",It," Try adjusting your search "+h(o(_))+" or filters. ",1)):(u(),d("p",Ft," No officials available. Add a new official to get started. "))])),e("div",Lt,[A(o(le),{href:c.route("role.index"),class:"btn btn-secondary"},{default:K(()=>i[12]||(i[12]=[e("i",{class:"bi bi-shield-lock me-1"},null,-1),x(" User Roles ")])),_:1},8,["href"]),i[13]||(i[13]=e("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#addOfficial"},[e("i",{class:"bi bi-plus-lg me-1"}),x(" Add New Official ")],-1))])])])]),e("div",qt,[e("div",Rt,[e("div",Yt,[i[15]||(i[15]=e("div",{class:"modal-header"},[e("h2",{class:"modal-title"},"Add Official"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",Bt,[A(Je)])])])]),e("div",Ht,[e("div",Gt,[e("div",zt,[i[16]||(i[16]=e("div",{class:"modal-header"},[e("h2",{class:"modal-title"},"Edit Official"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",Wt,[A(kt,{official:o($)},null,8,["official"])])])])]),M.value?(u(),d("div",Jt,[e("div",Xt,[e("div",Kt,[e("div",Qt,[e("h5",Zt,h(S.value),1),e("button",{type:"button",class:"btn-close",onClick:O,"aria-label":"Close"})]),e("div",es,[e("p",null,h(C.value),1)]),e("div",ts,[T.value==="confirm"?(u(),d("button",{key:0,type:"button",class:"btn btn-secondary",onClick:O}," Cancel ")):k("",!0),T.value==="confirm"?(u(),d("button",{key:1,type:"button",class:"btn btn-primary",onClick:p}," Confirm ")):k("",!0),T.value==="alert"?(u(),d("button",{key:2,type:"button",class:"btn btn-primary",onClick:O}," OK ")):k("",!0)])])])])):k("",!0)]),_:1})],64))}},rs=J(ss,[["__scopeId","data-v-d52e3205"]]);export{rs as default};
