import{A as O}from"./AdminLayout-ChAVeCb1.js";import{r as v,s as h,j as D,f as r,o as d,b as e,e as M,h as y,t as i,F as x,G as w,n as C,l as k,z as L,m as N,i as j,D as R,J as S,a as _,u as f,g as A,w as z}from"./app-CV9WLblb.js";import{i as E,C as I,_ as F,M as T}from"./MonthlyOverviewCard-Cuiv9o7g.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const V={class:"card-header"},J={class:"card-title"},B={key:0,class:"record-count"},U={class:"table-container"},H={class:"table-responsive"},G={class:"deceased-table"},Y={key:0,class:"no-data-row"},q={class:"index-cell"},K={class:"name-cell"},P={class:"date-cell"},Q={class:"address-cell"},W={class:"expand-toggle"},X={class:"toggle-text"},Z={__name:"CurrentDeceased",props:{data:{type:Array,default:()=>[]}},setup(b){const c=b,a=v([]),l=v(!1);h(()=>c.data,t=>{a.value=t,console.log("current deceased: ",a.value)},{immediate:!0});const m=D(()=>l.value||a.value.length<=5?a.value:a.value.slice(0,5)),u=D(()=>Math.max(0,a.value.length-5)),o=()=>{l.value=!l.value},s=t=>{if(!t||t==="N/A")return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return t}};return(t,n)=>(d(),r("div",{class:C(["table-card",{"is-expanded":l.value}])},[e("div",V,[e("h5",J,[n[0]||(n[0]=M(" Current Deceased Records ")),a.value.length>0?(d(),r("span",B,i(a.value.length),1)):y("",!0)])]),e("div",U,[e("div",H,[e("table",G,[n[2]||(n[2]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Date of Death"),e("th",null,"Last Night")])],-1)),e("tbody",null,[a.value.length===0?(d(),r("tr",Y,n[1]||(n[1]=[e("td",{colspan:"4",class:"no-data"}," No current deceased record found. ",-1)]))):y("",!0),(d(!0),r(x,null,w(m.value,(p,g)=>(d(),r("tr",{key:g,class:"data-row"},[e("td",q,i(g+1),1),e("td",K,i(p.deceased_name),1),e("td",P,i(s(p.date_of_death)),1),e("td",Q,i(p.last_night||"N/A"),1)]))),128))])])]),a.value.length>5?(d(),r("div",{key:0,class:"expand-section",onClick:o},[e("div",W,[e("span",X,i(l.value?"Show Less":`Show ${u.value} More Records`),1),e("i",{class:C(["toggle-icon",l.value?"icon-eye-off":"icon-eye"])},null,2)])])):y("",!0)])],2))}},ee=$(Z,[["__scopeId","data-v-b1588a92"]]),te={class:"chart-card"},se={class:"modal fade",id:"viewAll",tabindex:"-1","aria-labelledby":"viewAllLabel","aria-hidden":"true"},ae={class:"modal-dialog modal-lg"},le={class:"modal-content"},oe={class:"modal-body"},ne={key:0},re={class:"table table-striped table-bordered"},de={key:1,class:"text-center text-muted"},ce={__name:"DeceasedRecorded",props:{records:{type:Array,default:()=>[]}},setup(b){const c=b,a=v(null);let l=null;const m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],u=()=>{if(!l)return;const o=Array(12).fill(0);c.records.forEach(p=>{const g=new Date(p.date_of_death).getMonth();o[g]++});const s="Count Of Deceased Members Recorded In This System",t=35,n=s.length>t?s.slice(0,t)+"...":s;l.setOption({title:{text:n,left:"center",textStyle:{fontSize:16,overflow:"truncate",width:250}},tooltip:{trigger:"axis"},xAxis:{type:"category",data:m},yAxis:{type:"value",minInterval:1},series:[{name:"Recorded",type:"bar",data:o,itemStyle:{color:"#0000ff"}}],grid:{left:"3%",right:"4%",bottom:"8%",containLabel:!0}}),l.resize()};return h(()=>c.records,()=>u(),{immediate:!0}),k(async()=>{await L(),a.value&&(l=E(a.value),u(),window.addEventListener("resize",l.resize))}),N(()=>{l&&(window.removeEventListener("resize",l.resize),l.dispose(),l=null)}),(o,s)=>(d(),r("div",null,[s[3]||(s[3]=e("div",{class:"d-flex justify-content-end view-all-btn me-2"},[e("button",{type:"button",class:"btn btn-primary view-all-btn","data-bs-toggle":"modal","data-bs-target":"#viewAll"},[e("span",{class:"d-none d-sm-none d-lg-block"},"View All"),e("span",{class:"d-block d-sm-block d-lg-none bi bi-eye"})])],-1)),e("div",te,[e("div",{ref_key:"chartRef",ref:a,class:"chart"},null,512)]),e("div",se,[e("div",ae,[e("div",le,[s[1]||(s[1]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"viewAllLabel"},"All Deceased Records"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",oe,[c.records.length>0?(d(),r("div",ne,[e("table",re,[s[0]||(s[0]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Deceased Name"),e("th",null,"Date of Death"),e("th",null,"Member ID")])],-1)),e("tbody",null,[(d(!0),r(x,null,w(c.records,(t,n)=>(d(),r("tr",{key:t.report_id},[e("td",null,i(n+1),1),e("td",null,i(t.deceased_name),1),e("td",null,i(new Date(t.date_of_death).toLocaleDateString()),1),e("td",null,i(t.member_id),1)]))),128))])])])):(d(),r("div",de," No records found. "))]),s[2]||(s[2]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])]))}},ie=$(ce,[["__scopeId","data-v-dc211ca3"]]),ue={class:"table-card"},ve={class:"card-header"},me={class:"card-title"},_e={key:0,class:"record-count"},he={class:"table-container"},be={class:"mb-3"},pe={class:"table-responsive"},fe={class:"deceased-table"},ye={key:0,class:"no-data-row"},ge={class:"index-cell"},De={class:"name-cell"},xe={class:"date-cell"},$e={__name:"Contributions",setup(b){const c=v([]),a=v(""),l=async()=>{try{const o=await S.get(route("contributions.list"));c.value=o.data}catch(o){console.error("Error fetching contributions:",o)}},m=D(()=>{let o={};return c.value.forEach(s=>{s.collector&&(o[s.collector]||(o[s.collector]=0),o[s.collector]+=parseFloat(s.amount))}),Object.keys(o).map(s=>({collector:s,collected:o[s]}))}),u=D(()=>a.value?m.value.filter(o=>o.collector.toLowerCase().includes(a.value.toLowerCase())):m.value);return k(l),(o,s)=>(d(),r("div",ue,[e("div",ve,[e("h5",me,[s[1]||(s[1]=M(" Collector Contributions Summary ")),u.value.length>0?(d(),r("span",_e,i(u.value.length),1)):y("",!0)])]),e("div",he,[e("div",be,[j(e("input",{type:"text",class:"form-control",placeholder:"Filter collector...","onUpdate:modelValue":s[0]||(s[0]=t=>a.value=t)},null,512),[[R,a.value]])]),e("div",pe,[e("table",fe,[s[3]||(s[3]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Collector"),e("th",null,"Collected")])],-1)),e("tbody",null,[u.value.length===0?(d(),r("tr",ye,s[2]||(s[2]=[e("td",{colspan:"3",class:"no-data"}," No contributions found. ",-1)]))):y("",!0),(d(!0),r(x,null,w(u.value,(t,n)=>(d(),r("tr",{key:t.collector,class:"data-row"},[e("td",ge,i(n+1),1),e("td",De,i(t.collector),1),e("td",xe,"â‚±"+i(t.collected.toFixed(2)),1)]))),128))])])])])]))}},we=$($e,[["__scopeId","data-v-ad0f5317"]]),Ce={class:"container-fluid mx-0 px-0 home-container"},Ae={class:"row g-4"},Me={class:"col-md-8 responsive-card"},ke={class:"col-md-4 responsive-card"},Oe={class:"row mt-4"},Le={class:"col-12"},Ne={class:"dashboard-container"},je={__name:"Home",props:{currentMonthData:{type:Object,default:()=>({})},yearData:{type:Object,default:()=>({})},monthlyOverview:{type:Object,default:()=>({})},currentDeceasedMembers:{type:Array,default:()=>[]},allDeceased:{type:Array,default:()=>[]},currentDeceasedMember:{type:Object,default:()=>({})}},setup(b){const c=b;let a=v([]),l=v([]),m=v([]);const u=v([]),o=v([]),s=v({});return h(()=>c.currentMonthData,t=>{a.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.yearData,t=>{l.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.monthlyOverview,t=>{m.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.currentDeceasedMembers,t=>{u.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.allDeceased,t=>{o.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.currentDeceasedMember,t=>{s.value=t||{}},{immediate:!0}),(t,n)=>(d(),r(x,null,[_(f(A),{title:"Dashboard"}),_(O,null,{default:z(()=>[_(f(A),{title:"Dashboard"}),e("div",Ce,[n[0]||(n[0]=e("h2",{class:"fw-normal fs-5 my-4 ms-3"},"Analytics Dashboard",-1)),e("div",Ae,[e("div",Me,[_(I,{data:f(a)},null,8,["data"])]),e("div",ke,[_(F,{data:f(l)},null,8,["data"])])]),e("div",Oe,[e("div",Le,[_(T,{data:f(m)},null,8,["data"])])]),e("div",null,[_(we)]),e("div",Ne,[_(ee,{data:u.value},null,8,["data"]),_(ie,{records:o.value},null,8,["records"])]),n[1]||(n[1]=e("div",{class:"add-space-at-bottom"},null,-1))])]),_:1})],64))}},Fe=$(je,[["__scopeId","data-v-ce716abc"]]);export{Fe as default};
