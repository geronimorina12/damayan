import{r as m,j as S,c as w,o as n,w as x,a as D,b as e,u as k,g as A,f as d,h as v,i as b,D as M,t as p,F as j,G as C,H as L,W as _}from"./app-DVZuLgDL.js";import{A as V}from"./AdminLayout-CmdOH_VJ.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const R={class:"container mt-4"},$={class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-3"},E={key:0,class:"alert alert-info",role:"alert"},P={class:"table-scroll-container"},F={class:"table-responsive"},T={class:"table table-bordered table-hover"},U=["value"],W={key:0},G={__name:"SelectDeceased",props:{members:{type:Array,default:()=>[]}},setup(h){const o=h,l=m(null),i=m(""),r=m(""),f=S(()=>{let a=[];if(Array.isArray(o.members))a=o.members;else if(typeof o.members=="object"&&o.members!==null)a=Object.entries(o.members).map(([t,u])=>{const c=t.split(" "),g=c[0],N=c.length>1?c.slice(1).join(" "):"";return{id:t,first_name:g,last_name:N,age:u}});else return console.error("The 'members' prop is neither an array nor a valid object as expected."),[];if(!i.value)return a;const s=i.value.toLowerCase();return a.filter(t=>`${t.first_name} ${t.last_name}`.toLowerCase().includes(s))});function y(){if(r.value="",!l.value){r.value="Please select a deceased member first.";return}_.post(route("smsNotification.send"),{type:"deathReport",dead_person_name:`${l.value.first_name} ${l.value.last_name}`,member_id:l.value.id},{onSuccess:()=>{r.value="Death report sent successfully!",_.visit(route("smsNotification.smsPage"))},onError:a=>{console.error(a),r.value="Error sending death report."}})}return(a,s)=>(n(),w(V,null,{default:x(()=>[D(k(A),{title:"Select Deceased Member"}),e("div",R,[s[4]||(s[4]=e("h4",{class:"fw-bold mb-3"},"Select Deceased Member (Namatay)",-1)),e("div",$,[e("div",null,[b(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>i.value=t),class:"form-control w-100",placeholder:"Search by name..."},null,512),[[M,i.value]])]),e("div",null,[e("button",{class:"btn btn-success mt-3",onClick:y}," Send Death Report SMS ")])]),r.value?(n(),d("div",E,p(r.value),1)):v("",!0),e("div",P,[e("div",F,[e("table",T,[s[3]||(s[3]=e("thead",null,[e("tr",null,[e("th",null,"Select"),e("th",null,"Name"),e("th",null,"Age")])],-1)),e("tbody",null,[(n(!0),d(j,null,C(f.value,t=>(n(),d("tr",{key:t.id},[e("td",null,[b(e("input",{type:"radio",value:t,"onUpdate:modelValue":s[1]||(s[1]=u=>l.value=u)},null,8,U),[[L,l.value]])]),e("td",null,p(t.first_name+" "+t.last_name),1),e("td",null,p(t.age),1)]))),128)),f.value.length===0?(n(),d("tr",W,s[2]||(s[2]=[e("td",{colspan:"3",class:"text-center"},"No members found.",-1)]))):v("",!0)])])])])])]),_:1}))}},q=B(G,[["__scopeId","data-v-36ddb799"]]);export{q as default};
