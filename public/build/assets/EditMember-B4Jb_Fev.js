import{l as b,x as q,q as M,f as m,o as c,a as f,u as r,g as A,w as B,b as e,d as v,m as i,C as d,H as _,h as C,t as a,F as g,E}from"./app-lJPr0_lx.js";import{A as S}from"./AdminLayout-BfAzXtKV.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const L={class:"container-fluid d-flex flex-row justify-content-center align-items-center main-container"},N={class:"container mt-3"},j={class:"row mb-3 d-flex flex-row align-items-center"},R={class:"col col-6"},I={class:"col col-6"},O={class:"row mb-3"},$={class:"col col-6"},G={class:"col col-6"},H={class:"row mb-3"},P={class:"col col-6"},T={class:"col col-6"},z={class:"row mb-3"},J={class:"col col-6"},K={class:"col col-6"},Q={class:"row mb-3"},W={class:"col col-6"},X={class:"col col-6"},Y={key:0,class:"text-danger mt-1"},Z={class:"row mb-3"},w={class:"col col-6"},D={key:0,class:"container text-center mt-5 fs-4"},ee={key:1},te={class:"table table-responsive bg-light"},oe={class:"tbody"},le={class:"td"},se={class:"td"},re={class:"td"},ie={class:"td"},de=["onClick"],ne={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ue={class:"modal-dialog"},me={class:"modal-content"},ce={class:"modal-body"},ae={__name:"EditMember",props:{member:{type:Object,default:()=>({})}},setup(y){const p=y,n=b({name:"",relation:"",age:"",birth_date:""}),u=b([]),s=q({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]});M(()=>p.member,o=>{s.first_name=o==null?void 0:o.first_name,s.last_name=o==null?void 0:o.last_name,s.address=o==null?void 0:o.address,s.contact_number=o==null?void 0:o.contact_number,s.date_of_birth=o==null?void 0:o.date_of_birth,s.purok=o==null?void 0:o.purok,s.age=o==null?void 0:o.age,s.middle_name=o==null?void 0:o.middle_name,s.status=o==null?void 0:o.status,s.occupation=o==null?void 0:o.occupation,s.gender=o==null?void 0:o.gender,s.beneficiaries=(o==null?void 0:o.beneficiaries)||[],u.value=(o==null?void 0:o.beneficiaries)||[]},{immediate:!0});const h=()=>{if(s.clearErrors(),!/^0\d{10}$/.test(s.contact_number)){s.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}s.beneficiaries=u.value,s.put(route("members.update",p.member.id),{onSuccess:()=>alert("Member updated successfully."),onError:t=>console.log("An error occurred => ",t)})},x=()=>{u.value.push({...n.value}),n.value={name:"",relation:"",age:"",birth_date:""}},V=o=>{u.value.splice(o,1)},k=o=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString(void 0,t)};return(o,t)=>(c(),m(g,null,[f(r(A),{title:"Edit member info"}),f(S,null,{default:B(()=>[e("div",null,[t[26]||(t[26]=e("div",{class:"container text-center"},[e("h4",{class:"text-dark fw-lighter mt-3"},"Edit Member Info")],-1)),e("div",L,[e("div",N,[e("form",{onSubmit:v(h,["prevent"]),class:"form"},[e("div",j,[e("div",R,[i(e("input",{type:"text",class:"form-control mt-3",placeholder:"Last name","onUpdate:modelValue":t[0]||(t[0]=l=>r(s).last_name=l)},null,512),[[d,r(s).last_name]])]),e("div",I,[t[15]||(t[15]=e("label",null,"Birth date",-1)),i(e("input",{type:"date",class:"form-control",placeholder:"Birth date","onUpdate:modelValue":t[1]||(t[1]=l=>r(s).date_of_birth=l)},null,512),[[d,r(s).date_of_birth]])])]),e("div",O,[e("div",$,[i(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":t[2]||(t[2]=l=>r(s).first_name=l),required:""},null,512),[[d,r(s).first_name]])]),e("div",G,[t[16]||(t[16]=e("label",null,"age",-1)),i(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":t[3]||(t[3]=l=>r(s).age=l),required:""},null,512),[[d,r(s).age]])])]),e("div",H,[e("div",P,[i(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":t[4]||(t[4]=l=>r(s).middle_name=l),required:""},null,512),[[d,r(s).middle_name]])]),e("div",T,[t[18]||(t[18]=e("label",{class:"label"},"Gender",-1)),i(e("select",{name:"gender",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=l=>r(s).gender=l),required:""},t[17]||(t[17]=[e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[_,r(s).gender]])])]),e("div",z,[e("div",J,[i(e("select",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=l=>r(s).status=l),required:""},t[19]||(t[19]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[_,r(s).status]])]),e("div",K,[i(e("input",{type:"number",class:"form-control",placeholder:"Purok","onUpdate:modelValue":t[7]||(t[7]=l=>r(s).purok=l),required:""},null,512),[[d,r(s).purok]])])]),e("div",Q,[e("div",W,[i(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":t[8]||(t[8]=l=>r(s).occupation=l),required:""},null,512),[[d,r(s).occupation]])]),e("div",X,[i(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":t[9]||(t[9]=l=>r(s).contact_number=l),required:"",pattern:"[0-9]*",inputmode:"numeric"},null,512),[[d,r(s).contact_number]]),r(s).errors.contact_number?(c(),m("div",Y,a(r(s).errors.contact_number),1)):C("",!0)])]),e("div",Z,[e("div",w,[i(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":t[10]||(t[10]=l=>r(s).address=l),required:""},null,512),[[d,r(s).address]])])]),u.value!=null&&u.value.length<1?(c(),m("div",D," No beneficiary added ")):(c(),m("div",ee,[t[21]||(t[21]=e("h5",{class:"text-dark fw-light pt-2"},"Beneficiary",-1)),e("table",te,[t[20]||(t[20]=e("thead",{class:"thead"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Bithdate"),e("th",null,"Action")])],-1)),e("tbody",oe,[(c(!0),m(g,null,E(u.value,(l,U)=>(c(),m("tr",{class:"tr",key:l.id},[e("td",le,a(l==null?void 0:l.name),1),e("td",se,a(l==null?void 0:l.relation),1),e("td",re,a(l==null?void 0:l.age),1),e("td",ie,a(k(l==null?void 0:l.birth_date)),1),e("th",null,[e("button",{class:"btn btn-danger",onClick:pe=>V(U,l.id)}," Delete ",8,de)])]))),128))])])])),t[22]||(t[22]=e("div",{class:"container-fluid d-flex flex-row justify-content-between align-items-center"},[e("div",null,[e("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Beneficiary ")]),e("div",{class:"d-flex flex-row gap-2 align-items-center"},[e("button",{class:"btn btn-success"},"Save")])],-1))],32),e("div",ne,[e("div",ue,[e("div",me,[t[25]||(t[25]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Add beneficiary "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",ce,[e("form",{onSubmit:v(x,["prevent"]),class:"form"},[i(e("input",{type:"text",placeholder:"Name",class:"form-control mb-2","onUpdate:modelValue":t[11]||(t[11]=l=>n.value.name=l),required:""},null,512),[[d,n.value.name]]),i(e("input",{type:"text",placeholder:"Relation",class:"form-control mb-2","onUpdate:modelValue":t[12]||(t[12]=l=>n.value.relation=l),required:""},null,512),[[d,n.value.relation]]),i(e("input",{type:"number",placeholder:"Age",class:"form-control mb-2","onUpdate:modelValue":t[13]||(t[13]=l=>n.value.age=l),required:""},null,512),[[d,n.value.age]]),t[23]||(t[23]=e("label",null,"Date of birth",-1)),i(e("input",{type:"date",placeholder:"Bithdate",class:"form-control mb-2","onUpdate:modelValue":t[14]||(t[14]=l=>n.value.birth_date=l),required:""},null,512),[[d,n.value.birth_date]]),t[24]||(t[24]=e("div",{class:"container d-flex justify-content-end gap-2 mt-1"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1))],32)])])])])])])])]),_:1})],64))}},ge=F(ae,[["__scopeId","data-v-ff006627"]]);export{ge as default};
