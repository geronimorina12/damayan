import{r as b,x as M,s as q,f as c,o as m,a as f,u as i,g as A,w as B,b as e,d as v,i as r,D as d,I as _,h as S,t as a,F as g,G as C}from"./app-DhPW_94J.js";import{A as E}from"./AdminLayout-sA_hXMaQ.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const L={class:"edit-container"},N={class:"container-fluid d-flex flex-row justify-content-center align-items-center main-container"},j={class:"container mt-3"},I={class:"row mb-3 d-flex flex-row align-items-center"},R={class:"col col-6"},G={class:"col col-6"},O={class:"row mb-3"},$={class:"col col-6"},P={class:"col col-6"},T={class:"row mb-3"},z={class:"col col-6"},H={class:"col col-6"},J={class:"row mb-3"},K={class:"col col-6"},Q={class:"col col-6"},W={class:"row mb-3"},X={class:"col col-6"},Y={class:"col col-6"},Z={key:0,class:"text-danger mt-1"},w={class:"row mb-3"},D={class:"col col-6"},ee={key:0,class:"container text-center mt-5 fs-4"},te={key:1},oe={class:"table table-responsive bg-light"},le={class:"tbody"},se={class:"td"},ie={class:"td"},re={class:"td"},de={class:"td"},ne=["onClick"],ue={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},ce={class:"modal-dialog"},me={class:"modal-content"},ae={class:"modal-body"},pe={__name:"EditMember",props:{member:{type:Object,default:()=>({})}},setup(y){const p=y,n=b({name:"",relation:"",age:"",birth_date:""}),u=b([]),s=M({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]});q(()=>p.member,o=>{s.first_name=o==null?void 0:o.first_name,s.last_name=o==null?void 0:o.last_name,s.address=o==null?void 0:o.address,s.contact_number=o==null?void 0:o.contact_number,s.date_of_birth=o==null?void 0:o.date_of_birth,s.purok=o==null?void 0:o.purok,s.age=o==null?void 0:o.age,s.middle_name=o==null?void 0:o.middle_name,s.status=o==null?void 0:o.status,s.occupation=o==null?void 0:o.occupation,s.gender=o==null?void 0:o.gender,s.beneficiaries=(o==null?void 0:o.beneficiaries)||[],u.value=(o==null?void 0:o.beneficiaries)||[]},{immediate:!0});const h=()=>{if(s.clearErrors(),!/^0\d{10}$/.test(s.contact_number)){s.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}s.beneficiaries=u.value,s.put(route("members.update",p.member.id),{onSuccess:()=>alert("Member updated successfully."),onError:t=>console.log("An error occurred => ",t)})},x=()=>{u.value.push({...n.value}),n.value={name:"",relation:"",age:"",birth_date:""}},V=o=>{u.value.splice(o,1)},k=o=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(o).toLocaleDateString(void 0,t)};return(o,t)=>(m(),c(g,null,[f(i(A),{title:"Edit member info"}),f(E,null,{default:B(()=>[e("div",L,[t[26]||(t[26]=e("div",{class:"container text-center"},[e("h4",{class:"text-dark fw-lighter mt-3"},"Edit Member Info")],-1)),e("div",N,[e("div",j,[e("form",{onSubmit:v(h,["prevent"]),class:"form"},[e("div",I,[e("div",R,[r(e("input",{type:"text",class:"form-control mt-3",placeholder:"Last name","onUpdate:modelValue":t[0]||(t[0]=l=>i(s).last_name=l)},null,512),[[d,i(s).last_name]])]),e("div",G,[t[15]||(t[15]=e("label",null,"Birth date",-1)),r(e("input",{type:"date",class:"form-control",placeholder:"Birth date","onUpdate:modelValue":t[1]||(t[1]=l=>i(s).date_of_birth=l)},null,512),[[d,i(s).date_of_birth]])])]),e("div",O,[e("div",$,[r(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":t[2]||(t[2]=l=>i(s).first_name=l),required:""},null,512),[[d,i(s).first_name]])]),e("div",P,[t[16]||(t[16]=e("label",null,"age",-1)),r(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":t[3]||(t[3]=l=>i(s).age=l),required:""},null,512),[[d,i(s).age]])])]),e("div",T,[e("div",z,[r(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":t[4]||(t[4]=l=>i(s).middle_name=l),required:""},null,512),[[d,i(s).middle_name]])]),e("div",H,[t[18]||(t[18]=e("label",{class:"label"},"Gender",-1)),r(e("select",{name:"gender",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=l=>i(s).gender=l),required:""},t[17]||(t[17]=[e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[_,i(s).gender]])])]),e("div",J,[e("div",K,[r(e("select",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=l=>i(s).status=l),required:""},t[19]||(t[19]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[_,i(s).status]])]),e("div",Q,[r(e("input",{type:"number",class:"form-control",placeholder:"Purok","onUpdate:modelValue":t[7]||(t[7]=l=>i(s).purok=l),required:""},null,512),[[d,i(s).purok]])])]),e("div",W,[e("div",X,[r(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":t[8]||(t[8]=l=>i(s).occupation=l),required:""},null,512),[[d,i(s).occupation]])]),e("div",Y,[r(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":t[9]||(t[9]=l=>i(s).contact_number=l),required:"",pattern:"[0-9]*",inputmode:"numeric"},null,512),[[d,i(s).contact_number]]),i(s).errors.contact_number?(m(),c("div",Z,a(i(s).errors.contact_number),1)):S("",!0)])]),e("div",w,[e("div",D,[r(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":t[10]||(t[10]=l=>i(s).address=l),required:""},null,512),[[d,i(s).address]])])]),u.value!=null&&u.value.length<1?(m(),c("div",ee," No beneficiary added ")):(m(),c("div",te,[t[21]||(t[21]=e("h5",{class:"text-dark fw-light pt-2"},"Beneficiary",-1)),e("table",oe,[t[20]||(t[20]=e("thead",{class:"thead"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Bithdate"),e("th",null,"Action")])],-1)),e("tbody",le,[(m(!0),c(g,null,C(u.value,(l,U)=>(m(),c("tr",{class:"tr",key:l.id},[e("td",se,a(l==null?void 0:l.name),1),e("td",ie,a(l==null?void 0:l.relation),1),e("td",re,a(l==null?void 0:l.age),1),e("td",de,a(k(l==null?void 0:l.birth_date)),1),e("th",null,[e("button",{class:"btn btn-danger",onClick:be=>V(U,l.id)}," Delete ",8,ne)])]))),128))])])])),t[22]||(t[22]=e("div",{class:"container-fluid d-flex flex-row justify-content-between align-items-center"},[e("div",null,[e("button",{class:"btn btn-primary",type:"button","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," Add Beneficiary ")]),e("div",{class:"d-flex flex-row gap-2 align-items-center"},[e("button",{class:"btn btn-success"},"Save")])],-1))],32),e("div",ue,[e("div",ce,[e("div",me,[t[25]||(t[25]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Add beneficiary "),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",ae,[e("form",{onSubmit:v(x,["prevent"]),class:"form"},[r(e("input",{type:"text",placeholder:"Name",class:"form-control mb-2","onUpdate:modelValue":t[11]||(t[11]=l=>n.value.name=l),required:""},null,512),[[d,n.value.name]]),r(e("input",{type:"text",placeholder:"Relation",class:"form-control mb-2","onUpdate:modelValue":t[12]||(t[12]=l=>n.value.relation=l),required:""},null,512),[[d,n.value.relation]]),r(e("input",{type:"number",placeholder:"Age",class:"form-control mb-2","onUpdate:modelValue":t[13]||(t[13]=l=>n.value.age=l),required:""},null,512),[[d,n.value.age]]),t[23]||(t[23]=e("label",null,"Date of birth",-1)),r(e("input",{type:"date",placeholder:"Bithdate",class:"form-control mb-2","onUpdate:modelValue":t[14]||(t[14]=l=>n.value.birth_date=l),required:""},null,512),[[d,n.value.birth_date]]),t[24]||(t[24]=e("div",{class:"container d-flex justify-content-end gap-2 mt-1"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close "),e("button",{type:"submit",class:"btn btn-primary","data-bs-dismiss":"modal"}," Save changes ")],-1))],32)])])])])])])])]),_:1})],64))}},ye=F(pe,[["__scopeId","data-v-29e2449f"]]);export{ye as default};
