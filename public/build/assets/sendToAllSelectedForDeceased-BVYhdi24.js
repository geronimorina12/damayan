import{l as r,i as k,c as A,o as n,w as M,a as C,b as e,u as N,g as T,f as u,h as f,m as b,C as V,e as y,t as d,F as B,E as F,K as L,W as $}from"./app-lJPr0_lx.js";import{A as D}from"./AdminLayout-BfAzXtKV.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const E={class:"container mt-4"},j={class:"mb-3"},I={class:"d-flex justify-content-between align-items-center mb-3"},W={class:"d-flex justify-content-between align-items-center gap-3"},K={class:"d-flex flex-row gap-2"},P={key:0,class:"alert alert-info",role:"alert"},Q={class:"table-scroll-container"},R={class:"table-responsive"},q={class:"table table-bordered table-hover"},z=["value"],G={key:0},H={__name:"sendToAllSelectedForDeceased",props:{members:{type:Array,default:()=>[]},type:{type:String,default:"deathReport"},message:{type:String,default:""},deceased:{type:Number},last:{type:String}},setup(S){const a=S,s=r([]),c=r(""),i=r(a.type),o=r(""),_=r(a.message||""),m=r(!1),p=k(()=>{if(!Array.isArray(a.members))return[];if(!c.value)return a.members;const v=c.value.toLowerCase();return a.members.filter(t=>`${t.first_name} ${t.last_name}`.toLowerCase().includes(v))});function g(){s.value=[...p.value],m.value=!0}function h(){s.value=[],m.value=!1}function w(){if(o.value="",s.value.length===0){o.value="Please select at least one member first.";return}const v=s.value.map(t=>t.id);$.post(route(`smsSelectMember.${i.value}`),{member_ids:v,message:_.value,deceased:a.deceased||0,last:a.last},{onSuccess:()=>{o.value=`${i.value} SMS sent successfully.`,s.value=[],m.value=!1},onError:t=>{console.error(t),o.value=`Failed to send ${i.value} SMS.`}})}return(v,t)=>(n(),A(D,null,{default:M(()=>[C(N(T),{title:"Select Members to Send SMS"}),e("div",E,[t[6]||(t[6]=e("h4",{class:"fw-bold mb-3"},"Select Multiple Members to Send SMS",-1)),e("div",j,[b(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),class:"form-control",placeholder:"Search by name..."},null,512),[[V,c.value]])]),e("div",I,[e("div",W,[e("p",null,[t[2]||(t[2]=e("span",{class:"fw-bold"},"Type:",-1)),y(" "+d(i.value),1)]),e("p",null,[t[3]||(t[3]=e("span",{class:"fw-bold"},"Selected:",-1)),y(" "+d(s.value.length),1)])]),e("div",K,[m.value?(n(),u("button",{key:1,class:"btn btn-warning",onClick:h}," Unselect All ")):(n(),u("button",{key:0,class:"btn btn-success",onClick:g}," Select All ")),e("button",{class:"btn btn-primary",onClick:w},"Send")])]),o.value?(n(),u("div",P,d(o.value),1)):f("",!0),e("div",Q,[e("div",R,[e("table",q,[t[5]||(t[5]=e("thead",null,[e("tr",null,[e("th",null,"Select"),e("th",null,"Name"),e("th",null,"Age")])],-1)),e("tbody",null,[(n(!0),u(B,null,F(p.value,l=>(n(),u("tr",{key:l.id},[e("td",null,[b(e("input",{type:"checkbox",value:l,"onUpdate:modelValue":t[1]||(t[1]=x=>s.value=x)},null,8,z),[[L,s.value]])]),e("td",null,d(l.first_name)+" "+d(l.last_name),1),e("td",null,d(l.age),1)]))),128)),p.value.length===0?(n(),u("tr",G,t[4]||(t[4]=[e("td",{colspan:"3",class:"text-center"},"No members found.",-1)]))):f("",!0)])])])])])]),_:1}))}},Z=U(H,[["__scopeId","data-v-d56dc822"]]);export{Z as default};
