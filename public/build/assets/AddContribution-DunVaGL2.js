import{r as m,s as w,x as D,f as r,o as a,a as M,u as s,g as P,w as U,b as t,d as F,i as u,h as v,n as f,F as c,G as _,t as i,I as p,D as B}from"./app-BKViIBP_.js";import{A as $}from"./AdminLayout-CPy_5tl1.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const E={class:"contri-container py-1"},I={class:"row justify-content-center"},L={class:"col-md-8"},z={class:"card rounded-4"},G={class:"card-body p-4"},T={class:"mb-3"},q=["value"],H={key:0,class:"invalid-feedback"},J={class:"mb-3"},K={key:0,class:"invalid-feedback"},O={class:"mb-3"},Q=["value"],R={key:0,class:"invalid-feedback"},W={class:"mb-3"},X={class:"mb-3"},Y=["value"],Z={__name:"AddContribution",props:{members:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]},deceasedMembers:{type:Array,default:()=>[]}},setup(N){const b=N;let x=m([]),y=m([]);const k=m([]),C=m([]),g=m([]);w([()=>b.members,()=>b.users,()=>b.deceasedMembers],([n,e,o])=>{x.value=n||[],g.value=o||[];const S=(n||[]).map(d=>({id:d.id,fullName:`${d.first_name} ${d.middle_name??""} ${d.last_name}`.replace(/\s+/g," ").trim()})),V=(e||[]).map(d=>({id:d.id,fullName:d.name}));y.value=[...S,...V],C.value=e||[],k.value=(C.value||[]).filter(d=>d.role==="collector")},{immediate:!0});const l=D({member_id:"",amount:100,payment_date:"",collector:"",status:"paid",purok:"",deceased_id:""}),A=()=>{l.post(route("contributions.store"),{onSuccess:()=>alert("Contribution created!"),onError:n=>console.log("An error occured: ",n)})};return(n,e)=>(a(),r(c,null,[M(s(P),{title:"Add Contribution"}),M($,null,{default:U(()=>[t("div",E,[t("div",I,[t("div",L,[t("div",z,[e[15]||(e[15]=t("div",{class:"card-header text-center"},[t("h4",{class:"mb-0"},"Create Contribution")],-1)),t("div",G,[t("form",{onSubmit:F(A,["prevent"])},[t("div",T,[e[6]||(e[6]=t("label",{for:"member_id",class:"form-label"},"Member Name",-1)),u(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>s(l).member_id=o),id:"member_id",class:f(["form-select",{"is-invalid":s(l).errors.member_id}])},[e[5]||(e[5]=t("option",{disabled:"",value:""}," -- Select Member -- ",-1)),(a(!0),r(c,null,_(s(y),o=>(a(),r("option",{key:o.id,value:o.id},i(o.fullName),9,q))),128))],2),[[p,s(l).member_id]]),s(l).errors.member_id?(a(),r("div",H,i(s(l).errors.member_id),1)):v("",!0)]),t("div",J,[e[7]||(e[7]=t("label",{for:"payment_date",class:"form-label"},"Payment Date",-1)),u(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s(l).payment_date=o),type:"datetime-local",id:"payment_date",class:f(["form-control",{"is-invalid":s(l).errors.payment_date}])},null,2),[[B,s(l).payment_date]]),s(l).errors.payment_date?(a(),r("div",K,i(s(l).errors.payment_date),1)):v("",!0)]),t("div",O,[e[9]||(e[9]=t("label",{for:"collector",class:"form-label"},"Collector",-1)),u(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>s(l).collector=o),id:"collector",class:f(["form-control",{"is-invalid":s(l).errors.collector}])},[e[8]||(e[8]=t("option",{disabled:"",value:""}," -- Select Collector -- ",-1)),(a(!0),r(c,null,_(k.value,o=>(a(),r("option",{key:o.id,value:o.name},i(o.name),9,Q))),128))],2),[[p,s(l).collector]]),s(l).errors.collector?(a(),r("div",R,i(s(l).errors.collector),1)):v("",!0)]),t("div",W,[e[11]||(e[11]=t("label",{for:"purok",class:"form-label"},"Purok",-1)),u(t("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>s(l).purok=o),class:"form-control"},e[10]||(e[10]=[t("option",{value:"purok1"},"Purok 1",-1),t("option",{value:"purok2"},"Purok 2",-1),t("option",{value:"purok3"},"Purok 3",-1),t("option",{value:"purok4"},"Purok 4",-1)]),512),[[p,s(l).purok]])]),t("div",X,[e[13]||(e[13]=t("label",{for:"deceased_member",class:"form-label"},"Select Deceased Member",-1)),u(t("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>s(l).deceased_id=o),class:"form-control"},[e[12]||(e[12]=t("option",{disabled:"",value:""},"-- Select Deceased Member --",-1)),(a(!0),r(c,null,_(g.value,o=>(a(),r("option",{key:o.id,value:o.member_id},i(o.deceased_name),9,Y))),128))],512),[[p,s(l).deceased_id]])]),e[14]||(e[14]=t("div",{class:"d-flex justify-content-end"},[t("button",{type:"submit",class:"btn btn-success px-4 rounded-pill"}," Submit ")],-1))],32)])])])]),e[16]||(e[16]=t("div",{class:"container-bottom"},null,-1))])]),_:1})],64))}},se=j(Z,[["__scopeId","data-v-5e8ed121"]]);export{se as default};
