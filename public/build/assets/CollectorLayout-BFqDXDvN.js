import{_ as z}from"./logo1-BZ0h4foK.js";import{C as D,r as x,l as E,f as u,o as f,b as e,h as M,e as g,F as A,G as I,n as p,t as _,J as L,m as T,j as y,A as N,u as l,W as j,a as c,w as b,S as v,K as C,k as V}from"./app-YM487_xA.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"header container-fluid d-flex flex-row justify-content-between align-items-center mb-3"},Y={class:"position-relative me-4"},B={type:"button",class:"btn btn-link text-dark p-0 position-relative","data-bs-toggle":"modal","data-bs-target":"#notificationModal"},O={key:0,class:"notification-dot position-absolute top-0 start-100 translate-middle rounded-circle bg-success"},P={class:"modal fade",id:"notificationModal",tabindex:"-1","aria-labelledby":"notificationModalLabel","aria-hidden":"true"},U={class:"modal-dialog modal-dialog-centered modal-lg"},F={class:"modal-content border-0 shadow-lg rounded-4"},H={class:"modal-body p-0"},G={key:0,class:"list-group list-group-flush"},J={class:"text-muted small"},K={class:"text-end text-secondary small"},q=["onClick"],Q={key:1,class:"text-center py-4 text-muted"},X={__name:"HeaderComponent",props:{toggle:{},toggleModifiers:{}},emits:["update:toggle"],setup(S){const o=D(S,"toggle"),i=x(!1),m=x([]);x(!1);const a=()=>{o.value=!o.value},h=async()=>{try{const n=await L.get("/collector/notification/has",{withCredentials:!0});i.value=n.data.read_status===!1,m.value=n.data.notifications||[]}catch(n){console.error("Error fetching notification:",n)}},k=async n=>{try{await L.post(`/collector/notification/mark-as-read/${n}`,{},{withCredentials:!0}),i.value=!1,h()}catch(s){console.error("Error marking notification as read:",s)}};return E(()=>{h(),setInterval(h,3e4)}),(n,s)=>(f(),u(A,null,[e("div",W,[e("div",{class:"d-flex align-items-center container-fluid py-2"},[e("button",{class:"me-2",onClick:a},s[0]||(s[0]=[e("i",{class:"bi bi-list fs-2 d-block d-lg-none"},null,-1)])),s[1]||(s[1]=e("h4",{class:"mb-0 title"},"PROTEC DAMAYAN SYSTEM",-1))]),e("div",Y,[e("button",B,[s[2]||(s[2]=e("i",{class:"bi bi-bell fs-3"},null,-1)),i.value?(f(),u("span",O)):M("",!0)])])]),e("div",P,[e("div",U,[e("div",F,[s[4]||(s[4]=e("div",{class:"modal-header bg-primary text-white"},[e("h5",{class:"modal-title",id:"notificationModalLabel"},[e("i",{class:"bi bi-bell-fill me-2"}),g("Notifications ")]),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",H,[m.value.length>0?(f(),u("div",G,[(f(!0),u(A,null,I(m.value,r=>(f(),u("div",{key:r.id,class:p(["list-group-item d-flex justify-content-between align-items-start",{"bg-light":r.read_status}])},[e("div",null,[e("div",J,_(r.message),1),e("div",K,_(new Date(r.created_at).toLocaleString()),1)]),r.read_status?M("",!0):(f(),u("button",{key:0,onClick:w=>k(r.id),class:"btn btn-outline-success btn-sm ms-3 px-2",title:"Mark as Read"},s[3]||(s[3]=[e("i",{class:"bi bi-check2-circle"},null,-1)]),8,q))],2))),128))])):(f(),u("div",Q," No notifications found. "))])])])])],64))}},Z=R(X,[["__scopeId","data-v-0cd727ef"]]),ee={class:"d-flex min-vh-100 main-container"},te={class:"nav flex-column"},se={class:"text-sm text-start"},le={class:"mb-4 bg-white"},oe={__name:"CollectorLayout",setup(S){var w;const o=x(!0),i=x(!1);E(()=>{m(),window.addEventListener("resize",m)}),T(()=>{window.removeEventListener("resize",m)});const m=()=>{i.value=window.innerWidth<768,i.value||(o.value=!1)},a=()=>{i.value&&!o.value&&(o.value=!0)},h=y(()=>i.value?{position:"absolute",top:0,left:o.value?"-100%":"0%",width:"70%",height:"100vh",zIndex:999,transition:"left 0.3s ease-in-out",boxShadow:o.value?"none":"2px 0 10px rgba(0,0,0,0.5)"}:{width:"20%",minWidth:"250px",position:"relative",left:"0"}),k=y(()=>({width:i.value?"100%":"80%",position:"relative"})),n=y(()=>i.value&&!o.value?{display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99}:{display:"none"}),s=N().url,r=(w=N().props.auth)==null?void 0:w.user;return(d,t)=>(f(),u("div",ee,[e("div",{class:"sidebar text-white p-3 d-flex flex-column",style:C(h.value)},[e("div",{class:"text-center mb-4 logo-container",onClick:t[0]||(t[0]=()=>l(j).push(d.route("dashboard")))},t[2]||(t[2]=[e("img",{src:z,alt:"Logo",class:"img-fluid rounded-circle mb-2 logo"},null,-1),e("h5",{class:"fw-bold text-dark"},"PROTEC DAMAYAN SYSTEM",-1)])),e("div",te,[t[11]||(t[11]=e("hr",{class:"hr"},null,-1)),c(l(v),{href:d.route("collectorProfile.profile"),class:"nav-link text-dark align-items-start py-0 d-flex flex-row justify-content-start",onClick:a},{default:b(()=>[t[4]||(t[4]=e("div",null,[e("i",{class:"bi bi-person-circle me-2 fs-3"})],-1)),e("div",se,[e("div",null,_(l(r).name||"User"),1),t[3]||(t[3]=e("div",{class:"text-success"},"Collector",-1))])]),_:1},8,["href"]),t[12]||(t[12]=e("hr",{class:"hr"},null,-1)),c(l(v),{href:"/dashboard",class:p(["nav-link text-dark d-flex align-items-center",{active:l(s)==="/dashboard"}]),onClick:a},{default:b(()=>t[5]||(t[5]=[e("i",{class:"bi bi-house-door me-2"},null,-1),g(" Dashboard ")])),_:1},8,["class"]),c(l(v),{href:d.route("collector.viewMembersAsCollector"),class:p(["nav-link text-dark d-flex align-items-center",{active:l(s).includes("/view-members-as-collector")}]),onClick:a},{default:b(()=>t[6]||(t[6]=[e("i",{class:"bi bi-people me-2"},null,-1),g(" All Members ")])),_:1},8,["href","class"]),c(l(v),{href:d.route("collectorContribution.index"),class:p(["nav-link text-dark d-flex align-items-center",{active:l(s).includes("/view-contribution-as-collector")}]),onClick:a},{default:b(()=>t[7]||(t[7]=[e("i",{class:"bi bi-cash-coin me-2"},null,-1),g(" Contribution ")])),_:1},8,["href","class"]),c(l(v),{href:d.route("officials.index"),class:p(["nav-link text-dark d-flex align-items-center",{active:l(s).includes("/view-officials")}]),onClick:a},{default:b(()=>t[8]||(t[8]=[e("i",{class:"bi bi-people me-2"},null,-1),g(" Officials ")])),_:1},8,["href","class"]),c(l(v),{href:d.route("collector.viewReportAsCollector"),class:p(["nav-link text-dark d-flex align-items-center",{active:l(s).includes("/view-report-as-collector")}]),onClick:a},{default:b(()=>t[9]||(t[9]=[e("i",{class:"bi bi-file-earmark-text me-2"},null,-1),g(" Reports ")])),_:1},8,["href","class"]),c(l(v),{href:d.route("logout"),method:"post",class:"nav-link text-dark d-flex align-items-center",onClick:a},{default:b(()=>t[10]||(t[10]=[e("i",{class:"bi bi-box-arrow-left me-2"},null,-1),g(" Logout ")])),_:1},8,["href"])])],4),e("div",{class:"flex-grow-1 bg-light right",style:C(k.value)},[e("div",{class:"sidebar-overlay",style:C(n.value),onClick:a},null,4),e("div",le,[c(Z,{toggle:o.value,"onUpdate:toggle":t[1]||(t[1]=$=>o.value=$)},null,8,["toggle"])]),V(d.$slots,"default",{},void 0,!0)],4)]))}},re=R(oe,[["__scopeId","data-v-58a004c7"]]);export{re as C};
