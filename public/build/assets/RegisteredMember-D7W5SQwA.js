import{q as ue,r,j as z,x as ie,s as O,C as ce,f as n,o as a,b as e,h as S,e as H,t as c,d as J,i as k,D as A,u as o,n as G,I as te,E as re,F as W,G as Z,l as le,J as oe,a as q,K as be,L as pe,W as se,w as X,T as ne,c as fe,M as ge,m as ye,g as _e,S as de,N as he,z as $e}from"./app-NvJDYXzK.js";import{A as ke}from"./AdminLayout-DHR4syta.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const me=ue("modalStore",()=>{const U=r(!1);return{closeAddMemberModal:U,triggerCloseMemberModal:()=>{U.value=!0},resetModal:()=>{U.value=!1}}}),we={class:"container-fluid d-flex flex-row justify-content-center main-container"},Me={class:"container mt-5"},xe={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},Ce={class:"row g-3"},Se={class:"col-md-6"},Ae={class:"col-md-6"},Ne=["max"],Be={key:0,class:"invalid-feedback d-block"},Te={class:"col-md-6"},Ue={class:"col-md-6"},Ve={class:"col-md-6"},Ee={class:"col-md-6"},De={class:"col-md-6"},Ie={class:"col-md-6"},Le={class:"col-md-6"},Re={class:"col-md-6"},Fe={key:0,class:"text-danger small mt-1"},qe={class:"col-12"},Pe={class:"mt-4"},Oe={key:0,class:"text-center mt-3 text-muted"},je={key:1,class:"table-responsive mt-2"},He={class:"table table-bordered table-striped align-middle"},We=["onClick"],ze={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},Ge={key:1,class:"card mt-4 p-3 shadow-sm"},Ye={class:"col-md-6"},Ke={class:"col-md-6"},Je={class:"col-md-6"},Qe={class:"col-md-6"},Xe={key:0,class:"invalid-feedback d-block"},Ze={class:"col-12 d-flex justify-content-end gap-2 mt-3"},et=["disabled"],tt={__name:"AddNewMember",props:{show:{},showModifiers:{}},emits:["update:show"],setup(U){const w=me(),t=r({name:"",relation:"",age:"",birth_date:""}),y=r([]),v=r(!1),M=r(""),p=r(""),i=r("");r(!1),z(()=>new Date().getFullYear());const h=x=>{if(!x)return"";const s=new Date,u=new Date(x);let E=s.getFullYear()-u.getFullYear();const B=s.getMonth()-u.getMonth();return(B<0||B===0&&s.getDate()<u.getDate())&&E--,console.log("Calculated age: ",E.toString()),E.toString()},V=(x,s)=>{if(!x)return s.value="",!0;const u=new Date(x),E=new Date;return u.setHours(0,0,0,0),E.setHours(0,0,0,0),u>E?(s.value="Birth date cannot be in the future.",!1):(s.value="",!0)},b=ie({first_name:"",last_name:"",address:"Bonga, Bulan, Sorsogon",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"active",occupation:"",gender:"",beneficiaries:[]});O(()=>b.date_of_birth,x=>{const s=V(x,i);x&&s?b.age=h(x):b.age=""}),O(()=>t.value.birth_date,x=>{const s=V(x,p);x&&s?t.value.age=h(x):t.value.age=""});const I=()=>{if(b.clearErrors(),!/^0\d{10}$/.test(b.contact_number)){b.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}w.triggerCloseMemberModal(),V(b.date_of_birth,i)&&(w.triggerCloseMemberModal(),b.beneficiaries=y.value,b.post(route("addMemberPost"),{onSuccess:()=>{M.value="Member added successfully!",P.value=!0,R.value=!0,setTimeout(()=>M.value="",4e3)},onError:s=>console.log("An error occurred => ",s)}))},f=()=>{V(t.value.birth_date,p)&&(y.value.push({...t.value}),t.value={name:"",relation:"",age:"",birth_date:""},p.value="",v.value=!1)},l=x=>{y.value.splice(x,1)},d=x=>{const s={year:"numeric",month:"long",day:"numeric"};return new Date(x).toLocaleDateString(void 0,s)},j=z(()=>{const x=new Date,s=x.getFullYear()-16,u=String(x.getMonth()+1).padStart(2,"0"),E=String(x.getDate()).padStart(2,"0");return`${s}-${u}-${E}`}),P=ce(U,"show"),R=r(!1);return w.triggerCloseMemberModal(),(x,s)=>(a(),n("div",we,[e("div",Me,[M.value?(a(),n("div",xe,[H(c(M.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:s[0]||(s[0]=u=>M.value="")})])):S("",!0),e("form",{onSubmit:J(I,["prevent"]),class:"form"},[e("div",Ce,[e("div",Se,[s[21]||(s[21]=e("label",{class:"form-label"},"Last name",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Marinda","onUpdate:modelValue":s[1]||(s[1]=u=>o(b).last_name=u)},null,512),[[A,o(b).last_name]])]),e("div",Ae,[s[22]||(s[22]=e("label",{class:"form-label"},"Birth date",-1)),k(e("input",{type:"date",id:"birthDate",class:G(["form-control",{"is-invalid":i.value}]),"onUpdate:modelValue":s[2]||(s[2]=u=>o(b).date_of_birth=u),max:j.value},null,10,Ne),[[A,o(b).date_of_birth]]),i.value?(a(),n("div",Be,c(i.value),1)):S("",!0)]),e("div",Te,[s[23]||(s[23]=e("label",{class:"form-label"},"First name",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Jovan","onUpdate:modelValue":s[3]||(s[3]=u=>o(b).first_name=u),required:""},null,512),[[A,o(b).first_name]])]),e("div",Ue,[s[24]||(s[24]=e("label",{class:"form-label"},"Age",-1)),k(e("input",{type:"number",class:"form-control",placeholder:"0","onUpdate:modelValue":s[4]||(s[4]=u=>o(b).age=u),required:"",disabled:""},null,512),[[A,o(b).age]])]),e("div",Ve,[s[25]||(s[25]=e("label",{class:"form-label"},"Middle name",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Munticalbo","onUpdate:modelValue":s[5]||(s[5]=u=>o(b).middle_name=u)},null,512),[[A,o(b).middle_name]])]),e("div",Ee,[s[27]||(s[27]=e("label",{class:"form-label"},"Gender",-1)),k(e("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=u=>o(b).gender=u),required:""},s[26]||(s[26]=[e("option",{value:"",disabled:""},"Select gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[te,o(b).gender]])]),e("div",De,[s[29]||(s[29]=e("label",{class:"form-label"},"status",-1)),k(e("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=u=>o(b).status=u),disabled:""},s[28]||(s[28]=[e("option",{value:"active",selected:""},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[te,o(b).status]])]),e("div",Ie,[s[31]||(s[31]=e("label",{class:"form-label"},"Purok",-1)),k(e("select",{class:"form-select","onUpdate:modelValue":s[8]||(s[8]=u=>o(b).purok=u),required:""},s[30]||(s[30]=[re('<option value="" disabled selected data-v-b46d650b>Select Purok</option><option value="Purok 1" data-v-b46d650b>Purok 1</option><option value="Purok 2" data-v-b46d650b>Purok 2</option><option value="Purok 3" data-v-b46d650b>Purok 3</option><option value="Purok 4" data-v-b46d650b>Purok 4</option>',5)]),512),[[te,o(b).purok]])]),e("div",Le,[s[32]||(s[32]=e("label",{class:"form-label"},"Occupation",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Farmer","onUpdate:modelValue":s[9]||(s[9]=u=>o(b).occupation=u),required:""},null,512),[[A,o(b).occupation]])]),e("div",Re,[s[33]||(s[33]=e("label",{class:"form-label"},"Contact no.",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"09768734123","onUpdate:modelValue":s[10]||(s[10]=u=>o(b).contact_number=u),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[A,o(b).contact_number]]),o(b).errors.contact_number?(a(),n("div",Fe,c(o(b).errors.contact_number),1)):S("",!0)]),e("div",qe,[s[34]||(s[34]=e("label",{class:"form-label"},"Address",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Bonga, Bulan, Sorsogon","onUpdate:modelValue":s[11]||(s[11]=u=>o(b).address=u),required:"",disabled:""},null,512),[[A,o(b).address]])])]),e("div",Pe,[s[36]||(s[36]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),y.value.length===0?(a(),n("div",Oe," No beneficiary added ")):(a(),n("div",je,[e("table",He,[s[35]||(s[35]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),n(W,null,Z(y.value,(u,E)=>(a(),n("tr",{key:E},[e("td",null,c(u.name),1),e("td",null,c(u.relation),1),e("td",null,c(u.age),1),e("td",null,c(d(u.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:B=>l(E)}," Delete ",8,We)])]))),128))])])]))]),e("div",ze,[v.value?S("",!0):(a(),n("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:s[12]||(s[12]=u=>v.value=!0)}," Add Beneficiary ")),s[37]||(s[37]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Submit",-1))])],32),v.value?(a(),n("div",Ge,[s[43]||(s[43]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:J(f,["prevent"]),class:"row g-2"},[e("div",Ye,[s[38]||(s[38]=e("label",null,"Name",-1)),k(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=u=>t.value.name=u),required:""},null,512),[[A,t.value.name]])]),e("div",Ke,[s[40]||(s[40]=e("label",null,"Relation",-1)),k(e("select",{name:"selectRelation",id:"selectRelation",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=u=>t.value.relation=u),required:""},s[39]||(s[39]=[re('<option value="" disabled data-v-b46d650b>Select relation</option><option value="mother" data-v-b46d650b>Mother</option><option value="father" data-v-b46d650b>Father</option><option value="son" data-v-b46d650b>Son</option><option value="daughter" data-v-b46d650b>Daughter</option><option value="adopted" data-v-b46d650b>Adopted</option>',6)]),512),[[te,t.value.relation]])]),e("div",Je,[s[41]||(s[41]=e("label",null,"Age",-1)),k(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=u=>t.value.age=u),disabled:"",required:""},null,512),[[A,t.value.age]])]),e("div",Qe,[s[42]||(s[42]=e("label",{class:"form-label small"},"Birthdate",-1)),k(e("input",{type:"date",class:G(["form-control",{"is-invalid":p.value}]),"onUpdate:modelValue":s[16]||(s[16]=u=>t.value.birth_date=u),required:""},null,2),[[A,t.value.birth_date]]),p.value?(a(),n("div",Xe,c(p.value),1)):S("",!0)]),e("div",Ze,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[17]||(s[17]=u=>v.value=!1)}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:!!p.value||!t.value.birth_date}," Save Beneficiary ",8,et)])],32)])):S("",!0)]),P.value?(a(),n("div",{key:0,class:"modal-overlay",onClick:s[20]||(s[20]=(...u)=>R.value&&R.value(...u))},[e("div",{class:"modal-box",onClick:s[19]||(s[19]=J(()=>{},["stop"]))},[s[44]||(s[44]=e("p",null,"Member created",-1)),e("button",{class:"close-btn",onClick:s[18]||(s[18]=(...u)=>R.value&&R.value(...u))},"OK")])])):S("",!0)]))}},st=Q(tt,[["__scopeId","data-v-b46d650b"]]),lt={class:"container mt-4"},ot={key:0,class:"text-center my-5"},at={key:1,class:"alert alert-danger"},nt={key:2,class:"table-responsive"},rt={class:"table table-striped table-bordered shadow-sm"},it={key:3,class:"alert alert-info"},dt={__name:"NewlyCreated",setup(U){const w=r([]),t=r(!0),y=r(null),v=async()=>{var p,i;try{const h=await oe.get("/member/new");w.value=h.data.data}catch(h){y.value=((i=(p=h.response)==null?void 0:p.data)==null?void 0:i.message)||"Failed to fetch latest members."}finally{t.value=!1}},M=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return le(v),(p,i)=>(a(),n("div",lt,[t.value?(a(),n("div",ot,i[0]||(i[0]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):y.value?(a(),n("div",at,c(y.value),1)):w.value.length?(a(),n("div",nt,[e("table",rt,[i[1]||(i[1]=e("thead",{class:"table-primary"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Contact"),e("th",null,"Age"),e("th",null,"Gender"),e("th",null,"Registration Date")])],-1)),e("tbody",null,[(a(!0),n(W,null,Z(w.value,h=>(a(),n("tr",{key:h.id},[e("td",null,c(h.first_name)+" "+c(h.middle_name)+" "+c(h.last_name),1),e("td",null,c(h.address),1),e("td",null,c(h.contact_number),1),e("td",null,c(h.age),1),e("td",null,c(h.gender),1),e("td",null,c(M(h.created_at)),1)]))),128))])])])):(a(),n("div",it," No newly registered members found. "))]))}},ut=Q(dt,[["__scopeId","data-v-cb085a94"]]),ct={class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-2"},mt={id:"addNewMemberModal",class:"custom-modal"},vt={class:"modal-content",style:{"min-width":"60%",height:"auto"}},bt={class:"modal-header"},pt={class:"modal-body"},ft={id:"newCreatedMemberModal",class:"custom-modal",style:{"padding-top":"0"}},gt={class:"modal-content",style:{"min-width":"60%",height:"auto"}},yt={class:"modal-header alig-items-center"},_t={class:"modal-body"},ht={key:0,class:"modal-overlay"},$t={class:"modal-box"},kt={style:{"font-size":"0.9rem",color:"#555"}},wt={__name:"Header",setup(U){const w=me(),t=r(!1),y=r(3),v=p=>{document.getElementById(p).classList.add("show")},M=p=>{document.getElementById(p).classList.remove("show")};return O(()=>w.closeAddMemberModal,p=>{p&&(M("addNewMemberModal"),w.resetModal())}),window.addEventListener("click",p=>{document.querySelectorAll(".custom-modal").forEach(i=>{p.target===i&&i.classList.remove("show")})}),O(t,p=>{if(p){y.value=3;const i=setInterval(()=>{y.value--,y.value<=0&&(t.value=!1,clearInterval(i))},1e3)}}),(p,i)=>(a(),n("div",null,[e("div",ct,[i[8]||(i[8]=e("div",null,[e("h5",{class:"ms-3 fw-light"},[e("span",{class:"d-none d-sm-none d-lg-inline-block me-2"},"Registered"),e("span",null,"Members")])],-1)),e("div",null,[e("button",{class:"modern-btn me-3",onClick:i[0]||(i[0]=J(h=>v("addNewMemberModal"),["prevent"]))},i[6]||(i[6]=[e("i",{class:"bi bi-person-plus"},null,-1),e("span",null,"Add Member",-1)])),e("button",{class:"modern-btn secondary",onClick:i[1]||(i[1]=h=>v("newCreatedMemberModal"))},i[7]||(i[7]=[e("i",{class:"bi bi-person-lines-fill"},null,-1),e("span",null,"Newly Created",-1)]))])]),e("div",mt,[e("div",vt,[e("div",bt,[i[9]||(i[9]=e("h3",null,"Add New Member",-1)),e("button",{class:"close-btn",onClick:i[2]||(i[2]=h=>M("addNewMemberModal"))},"Ã—")]),e("div",pt,[q(st,{show:t.value,"onUpdate:show":i[3]||(i[3]=h=>t.value=h)},null,8,["show"])])])]),e("div",ft,[e("div",gt,[e("div",yt,[i[10]||(i[10]=e("div",{class:""},[e("h4",{class:"mb-3 text-dark fw-bold d-flex align-items-center"}," Newly Registered Member ")],-1)),e("button",{class:"close-btn2 fs-2",onClick:i[4]||(i[4]=h=>M("newCreatedMemberModal"))},"Ã—")]),e("div",_t,[q(ut)])])]),t.value?(a(),n("div",ht,[e("div",$t,[i[11]||(i[11]=e("p",null,"Member created successfully!",-1)),e("p",kt," Closing in "+c(y.value)+"s... ",1),e("button",{class:"close-btn",onClick:i[5]||(i[5]=h=>t.value=!1)}," OK ("+c(y.value)+") ",1)])])):S("",!0)]))}},Mt=Q(wt,[["__scopeId","data-v-4e8a56c0"]]),xt={__name:"Alert",props:{status:{type:Boolean,default:!1},name:{type:String,default:""}},setup(U){const w=U,t=r(!1),y=r(null),v=r("");return O(()=>w.status,M=>{y.value=M,v.value="bounce-in",t.value=!0,setTimeout(()=>{v.value="slide-out",setTimeout(()=>{t.value=!1},500)},3e3)}),(M,p)=>(a(),n("div",null,[t.value?(a(),n("div",{key:0,class:G(["alert alert-info",v.value]),role:"alert"},[H(c(U.name)+"'s status has been changed to ",1),e("strong",null,c(y.value?"Active":"Inactive"),1)],2)):S("",!0)]))}},Ct=Q(xt,[["__scopeId","data-v-f19df27b"]]),St={key:0,class:"confirmation-container"},At={class:"confirmation-content"},Nt={class:"message-preview"},Bt={class:"preview-item"},Tt={class:"value"},Ut={class:"preview-item"},Vt={class:"value"},Et={class:"recipients-section"},Dt={class:"recipients-list"},It={key:1,class:"container mt-4"},Lt={class:"mb-3"},Rt={class:"d-flex justify-content-between align-items-center mb-3"},Ft={class:"d-flex justify-content-between align-items-center gap-3"},qt={class:"d-flex flex-row gap-2"},Pt={key:0,class:"alert alert-info",role:"alert"},Ot={class:"table-scroll-container"},jt={class:"table-responsive"},Ht={class:"table table-bordered table-hover"},Wt=["value"],zt={key:0},Gt={key:2,class:"status-container"},Yt={__name:"SendToAllSelectedComponent",props:be({members:{type:Array,default:()=>[]},type:{type:String,default:"deathReport"},message:{type:String,default:""},deceased:{type:String},last:{type:String}},{closeCaret:{},closeCaretModifiers:{}}),emits:["update:closeCaret"],setup(U){const w=U,t=r([]),y=r(""),v=r(w.type),M=r(""),p=r(w.message||""),i=r(!1),h=r(!1),V=r(w.members||[]),b=ce(U,"closeCaret"),I=r(!1),f=r({});let l=r(!1);const d=z(()=>{if(!Array.isArray(V.value))return[];if(!y.value)return V.value;const B=y.value.toLowerCase();return V.value.filter(D=>`${D.first_name} ${D.last_name}`.toLowerCase().includes(B))});function j(){t.value=[...d.value],i.value=!0}function P(){t.value=[],i.value=!1}function R(){if(b.value=!0,t.value.length===0){M.value="Please select at least one member first.";return}I.value=!0}function x(){if(M.value="",t.value.length===0){M.value="Please select at least one member first.";return}const B=t.value.map(C=>C.id);se.post(route(`smsSelectMember.${v.value}`),{member_ids:B,message:p.value,deceased:w.deceased||0,last:w.last},{onSuccess:()=>{M.value=`${v.value} SMS sent successfully.`,t.value=[],i.value=!1,I.value=!1,l.value=!0,setTimeout(()=>{window.location.reload()},2e3)},onError:C=>{console.error(C),M.value=`Failed to send ${v.value} SMS.`}})}const s=async()=>{h.value=!0;try{const B=await oe.get(route("smsNotification.members"));V.value=B.data.members||B.data}catch(B){console.error("Error fetching members:",B)}finally{h.value=!1}},u=async B=>{h.value=!0;try{const C=await oe.get(route("smsNotification.deceased",B));f.value=C.data.deceased||C.data}catch(C){console.error("Error fetching deceased:",C)}finally{h.value=!1}};le(()=>{w.deceased&&u(w.deceased)}),z(()=>h.value?[]:V.value.map(B=>({id:B.id,fullName:`${B.first_name} ${B.last_name}`}))),le(()=>{(!w.members||w.members.length===0)&&s()});const E=()=>{I.value=!1,b.value=!1};return(B,C)=>(a(),n(W,null,[I.value&&!o(l)?(a(),n("div",St,[C[5]||(C[5]=e("div",{class:"confirmation-header"},[e("h4",{class:"confirmation-title"},"Review Message"),e("p",{class:"confirmation-subtitle"},"Please review before sending")],-1)),e("div",At,[e("div",Nt,[e("div",Bt,[C[2]||(C[2]=e("span",{class:"label"},"Message",-1)),e("p",Tt,c(p.value),1)]),e("div",Ut,[C[3]||(C[3]=e("span",{class:"label"},"Deceased",-1)),e("p",Vt,c(f.value.first_name||"")+" "+c(f.value.middle_name||"")+" "+c(f.value.last_name||""),1)])]),e("div",Et,[C[4]||(C[4]=e("span",{class:"label"},"Selected Members",-1)),e("div",Dt,[(a(!0),n(W,null,Z(t.value,D=>(a(),n("div",{key:D.id,class:"recipient-item"},c(D.first_name)+" "+c(D.last_name),1))),128))])])]),e("div",{class:"confirmation-actions"},[e("button",{class:"btn btn-outline",onClick:E}," Cancel "),e("button",{class:"btn btn-primary",onClick:x}," Send Message ")])])):S("",!0),!I.value&&!o(l)?(a(),n("div",It,[e("div",Lt,[k(e("input",{type:"text","onUpdate:modelValue":C[0]||(C[0]=D=>y.value=D),class:"form-control",placeholder:"Search by name..."},null,512),[[A,y.value]])]),e("div",Rt,[e("div",Ft,[e("p",null,[C[6]||(C[6]=e("span",{class:"fw-bold"},"Selected:",-1)),H(" "+c(t.value.length),1)])]),e("div",qt,[i.value?(a(),n("button",{key:1,class:"btn btn-warning py-0 button-unselect",onClick:P}," Unselect All ")):(a(),n("button",{key:0,class:"btn btn-success button-select-all w-auto",onClick:j}," Select All ")),e("button",{class:"btn btn-primary py-0 button-done",onClick:R}," Done ")])]),M.value?(a(),n("div",Pt,c(M.value),1)):S("",!0),e("div",Ot,[e("div",jt,[e("table",Ht,[C[8]||(C[8]=e("thead",null,[e("tr",null,[e("th",null,"Select"),e("th",null,"Name"),e("th",null,"Age")])],-1)),e("tbody",null,[(a(!0),n(W,null,Z(d.value,D=>(a(),n("tr",{key:D.id},[e("td",null,[k(e("input",{type:"checkbox",value:D,"onUpdate:modelValue":C[1]||(C[1]=ee=>t.value=ee)},null,8,Wt),[[pe,t.value]])]),e("td",null,c(D.first_name)+" "+c(D.last_name),1),e("td",null,c(D.age),1)]))),128)),d.value.length===0?(a(),n("tr",zt,C[7]||(C[7]=[e("td",{colspan:"3",class:"text-center"},"No members found.",-1)]))):S("",!0)])])])])])):S("",!0),o(l)?(a(),n("div",Gt,C[9]||(C[9]=[re('<div class="status-alert success" data-v-88992e62><svg class="status-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-88992e62><path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-88992e62></path></svg><div class="status-content" data-v-88992e62><p class="status-message" data-v-88992e62>Messages sent successfully</p><p class="status-description" data-v-88992e62>SMS notifications have been delivered to all selected members.</p></div></div>',1)]))):S("",!0)],64))}},Kt=Q(Yt,[["__scopeId","data-v-88992e62"]]),ve=ue("deceased title",{state:()=>({currentText:"Add Deceased Info."}),actions:{setText(U){this.currentText=U,console.log(`Text updated in store: ${this.currentText}`)}}}),Jt={key:0,class:"d-flex align-items-center gap-2"},Qt=["disabled"],Xt=["disabled"],Zt={key:1,class:"reminder-wrapper"},es={class:"card shadow-sm pt-0 p-4 rounded-4 bg-white border-0"},ts={key:0,class:"mb-4 text-center"},ss={class:"fw-bold text-primary mb-1"},ls={class:"text-muted mb-0"},os={class:"row g-3"},as={class:"col-md-6"},ns={key:0,class:"invalid-feedback d-block"},rs={class:"col-md-6"},is={key:0,class:"mt-4"},ds={key:0,class:"mt-4 d-flex flex-wrap gap-3 justify-content-center"},us={__name:"IsDeceased",props:{deceasedMember:{type:Object,default:()=>({})}},setup(U){const w=ve(),t=ie({message:"",type:"deathReport",memberId:null,lastNight:"",startOfContribution:""}),y=U,v=r({}),M=r(""),p=r(""),i=r(!1);let h=r(!0),V=r(!1),b=r(!1);const I=r(!1),f=r(""),l=z(()=>!!f.value),d=z(()=>t.lastNight&&t.startOfContribution&&!l.value);le(()=>{const L=new Date;t.startOfContribution=L.toISOString().split("T")[0]}),O(()=>y.deceasedMember,L=>{v.value=L},{immediate:!0}),O(()=>t.lastNight,L=>{if(!L){f.value="";return}const $=new Date(L),T=new Date;$.setHours(0,0,0,0),T.setHours(0,0,0,0),$<=T?f.value="The last night date cannot be set today or a past date.":f.value=""}),O([()=>t.lastNight,()=>t.startOfContribution],([L,$])=>{var T;if(L&&$&&((T=v.value)!=null&&T.first_name)&&!l.value){const Y=v.value;t.message=`We regret to inform you that ${Y.first_name} ${Y.last_name} has passed away. Last night is on ${s(L)}, and the collection for burial assistance starts on ${s($)}.`,t.memberId=Y.id}else t.message=""},{immediate:!0});function P(){if(!t.memberId){x("Missing member ID. Please select a member first.","danger");return}if(l.value){x("Please fix the validation errors before sending.","danger");return}se.post(route("smsNotification.sendReminders"),{message:t.message,type:t.type,memberId:t.memberId,lastNight:t.lastNight,startOfContribution:t.startOfContribution},{onSuccess:()=>x("SMS sent successfully."),onError:()=>x("An error occurred while sending SMS.")})}async function R(){w.setText("Select Members"),I.value=!0,h.value=!1,V.value=!0}function x(L,$){M.value=L,p.value=$,i.value=!0,setTimeout(()=>i.value=!1,4e3)}const s=L=>{const $={year:"numeric",month:"long",day:"numeric"};return new Date(L).toLocaleDateString(void 0,$)},u=r(!1),E=r(!1),B=z(()=>u.value?"bi bi-caret-left-fill":"bi bi-caret-left"),C=z(()=>E.value?"bi bi-caret-right-fill":"bi bi-caret-right"),D=()=>{w.setText("Add Deceased Info."),h.value=!0,I.value=!1,V.value=!0},ee=()=>{w.setText("Select Members"),h.value=!1,I.value=!0};return(L,$)=>(a(),n(W,null,[o(V)&&!o(b)?(a(),n("div",Jt,[e("button",{class:"caret-wrapper btn btn-outline-dark py-0",onMouseenter:$[0]||($[0]=T=>u.value=!0),onMouseleave:$[1]||($[1]=T=>u.value=!1),onClick:D,disabled:o(h)},[e("i",{class:G([B.value,"fs-4"])},null,2)],40,Qt),e("button",{class:"caret-wrapper btn btn-outline-dark py-0",onMouseenter:$[2]||($[2]=T=>E.value=!0),onMouseleave:$[3]||($[3]=T=>E.value=!1),onClick:ee,disabled:!o(h)},[e("i",{class:G([C.value,"fs-4"])},null,2)],40,Xt)])):S("",!0),o(h)?(a(),n("div",Zt,[e("div",es,[q(ne,{name:"fade"},{default:X(()=>[i.value?(a(),n("div",{key:0,class:G([["alert",p.value==="success"?"alert-success":"alert-danger"],"alert-dismissible fade show mb-3"]),role:"alert"},[H(c(M.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:$[4]||($[4]=T=>i.value=!1)})],2)):S("",!0)]),_:1}),v.value.first_name?(a(),n("div",ts,[e("h4",ss,c(v.value.first_name)+" "+c(v.value.middle_name)+" "+c(v.value.last_name),1),e("p",ls,c(v.value.address),1)])):S("",!0),e("div",os,[e("div",as,[$[9]||($[9]=e("label",{class:"form-label fw-semibold text-secondary"},"Enter last night:",-1)),k(e("input",{type:"date",class:G(["form-control",{"is-invalid":l.value}]),"onUpdate:modelValue":$[5]||($[5]=T=>o(t).lastNight=T)},null,2),[[A,o(t).lastNight]]),l.value?(a(),n("div",ns,c(f.value),1)):S("",!0)]),e("div",rs,[$[10]||($[10]=e("label",{class:"form-label fw-semibold text-secondary"},"Start of contribution:",-1)),k(e("input",{type:"date",class:"form-control","onUpdate:modelValue":$[6]||($[6]=T=>o(t).startOfContribution=T)},null,512),[[A,o(t).startOfContribution]])])]),q(ne,{name:"fade"},{default:X(()=>[o(t).message&&!l.value?(a(),n("div",is,[$[11]||($[11]=e("label",{class:"form-label fw-semibold text-secondary"},"Message:",-1)),k(e("textarea",{class:"form-control","onUpdate:modelValue":$[7]||($[7]=T=>o(t).message=T),rows:"4",style:{resize:"vertical","min-height":"100px"}},null,512),[[A,o(t).message]])])):S("",!0)]),_:1}),q(ne,{name:"fade"},{default:X(()=>[d.value?(a(),n("div",ds,[e("button",{class:"btn-modern",onClick:R},$[12]||($[12]=[e("i",{class:"bi bi-people-fill me-2"},null,-1),H(" Send to all selected ")])),e("button",{class:"btn-modern",onClick:P},$[13]||($[13]=[e("i",{class:"bi bi-send-fill me-2"},null,-1),H("Send to all ")]))])):S("",!0)]),_:1})])])):S("",!0),q(ne,{name:"fade"},{default:X(()=>{var T;return[I.value?(a(),fe(Kt,{key:0,members:[],type:o(t).type,message:o(t).message,deceased:(T=v.value)==null?void 0:T.id,last:o(t).lastNight,closeCaret:o(b),"onUpdate:closeCaret":$[8]||($[8]=Y=>ge(b)?b.value=Y:b=Y),class:"mt-4"},null,8,["type","message","deceased","last","closeCaret"])):S("",!0)]}),_:1})],64))}},cs=Q(us,[["__scopeId","data-v-9e46d302"]]),ms={class:"container-fluid d-flex flex-row justify-content-center main-container"},vs={class:"container mt-5"},bs={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},ps={class:"row g-3"},fs={class:"col-12 d-md-none"},gs={class:"row g-2"},ys={class:"col-12"},_s={class:"col-12"},hs={class:"col-12"},$s={class:"col-md-4 d-none d-md-block"},ks={class:"col-md-4 d-none d-md-block"},ws={class:"col-md-4 d-none d-md-block"},Ms={class:"col-12 col-md-6"},xs={class:"col-12 col-md-6"},Cs={class:"col-12 col-md-6"},Ss={class:"col-12 col-md-6"},As={class:"col-12 col-md-6"},Ns={class:"col-12 col-md-6"},Bs={class:"col-12 col-md-6"},Ts={key:0,class:"text-danger small mt-1"},Us={class:"col-12"},Vs={class:"mt-4"},Es={key:0,class:"text-center mt-3 text-muted"},Ds={key:1,class:"table-responsive mt-2"},Is={class:"table table-bordered table-striped align-middle"},Ls=["onClick"],Rs={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},Fs={key:1,class:"card mt-4 p-3 shadow-sm"},qs={class:"col-md-6"},Ps={class:"col-md-6"},Os={class:"col-md-6"},js={class:"col-md-6"},Hs={class:"col-12 d-flex justify-content-end gap-2 mt-3"},Ws={__name:"EditMember",props:{member:{type:Object,default:()=>({})}},setup(U){const w=U,t=ie({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),y=r([]),v=r({name:"",relation:"",age:"",birth_date:""}),M=r(!1),p=r(""),i=async f=>{if(!f){console.log("No member ID provided");return}try{const l=await oe.get(route("beneficiaries.fetch",{member:f}));l.data.success?(y.value=l.data.data,console.log("Beneficiaries fetched successfully:",l.data.data)):console.error("Failed to fetch beneficiaries:",l.data.message)}catch(l){console.error("Error fetching beneficiaries:",l)}};O(()=>w.member,f=>{f&&(t.first_name=f.first_name||"",t.last_name=f.last_name||"",t.address=f.address||"",t.contact_number=f.contact_number||"",t.date_of_birth=f.date_of_birth||"",t.purok=f.purok||"",t.age=f.age||"",t.middle_name=f.middle_name||"",t.status=f.status||"",t.occupation=f.occupation||"",t.gender=f.gender||"",t.beneficiaries=f.beneficiaries||[],f.id&&i(f.id))},{immediate:!0,deep:!0});const h=()=>{if(t.clearErrors(),!/^0\d{10}$/.test(t.contact_number)){t.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}t.beneficiaries=y.value,t.put(route("members.update",w.member.id),{onSuccess:()=>{p.value="Member updated successfully!",setTimeout(()=>p.value="",4e3),i(w.member.id)},onError:l=>console.error("An error occurred => ",l)})},V=()=>{const f={...v.value,member_id:w.member.id};y.value.push(f),v.value={name:"",relation:"",age:"",birth_date:""},M.value=!1},b=f=>{y.value.splice(f,1)},I=f=>{if(!f)return"";const l={year:"numeric",month:"long",day:"numeric"};return new Date(f).toLocaleDateString(void 0,l)};return(f,l)=>(a(),n("div",ms,[e("div",vs,[p.value?(a(),n("div",bs,[H(c(p.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=d=>p.value="")})])):S("",!0),e("form",{onSubmit:J(h,["prevent"]),class:"form"},[e("div",ps,[e("div",fs,[e("div",gs,[e("div",ys,[k(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":l[1]||(l[1]=d=>o(t).first_name=d),required:""},null,512),[[A,o(t).first_name]])]),e("div",_s,[k(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":l[2]||(l[2]=d=>o(t).middle_name=d)},null,512),[[A,o(t).middle_name]])]),e("div",hs,[k(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":l[3]||(l[3]=d=>o(t).last_name=d)},null,512),[[A,o(t).last_name]])])])]),e("div",$s,[k(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":l[4]||(l[4]=d=>o(t).first_name=d),required:""},null,512),[[A,o(t).first_name]])]),e("div",ks,[k(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":l[5]||(l[5]=d=>o(t).middle_name=d)},null,512),[[A,o(t).middle_name]])]),e("div",ws,[k(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":l[6]||(l[6]=d=>o(t).last_name=d)},null,512),[[A,o(t).last_name]])]),e("div",Ms,[l[21]||(l[21]=e("label",{class:"form-label"},"Birth date",-1)),k(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[7]||(l[7]=d=>o(t).date_of_birth=d)},null,512),[[A,o(t).date_of_birth]])]),e("div",xs,[k(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":l[8]||(l[8]=d=>o(t).age=d),required:""},null,512),[[A,o(t).age]])]),e("div",Cs,[k(e("select",{class:"form-select","onUpdate:modelValue":l[9]||(l[9]=d=>o(t).gender=d),required:""},l[22]||(l[22]=[e("option",{value:"",disabled:""},"Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[te,o(t).gender]])]),e("div",Ss,[k(e("select",{class:"form-select","onUpdate:modelValue":l[10]||(l[10]=d=>o(t).status=d),required:""},l[23]||(l[23]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[te,o(t).status]])]),e("div",As,[k(e("input",{type:"text",class:"form-control",placeholder:"Purok","onUpdate:modelValue":l[11]||(l[11]=d=>o(t).purok=d),required:""},null,512),[[A,o(t).purok]])]),e("div",Ns,[k(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":l[12]||(l[12]=d=>o(t).occupation=d),required:""},null,512),[[A,o(t).occupation]])]),e("div",Bs,[k(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":l[13]||(l[13]=d=>o(t).contact_number=d),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[A,o(t).contact_number]]),o(t).errors.contact_number?(a(),n("div",Ts,c(o(t).errors.contact_number),1)):S("",!0)]),e("div",Us,[k(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":l[14]||(l[14]=d=>o(t).address=d),required:""},null,512),[[A,o(t).address]])])]),e("div",Vs,[l[25]||(l[25]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),y.value.length===0?(a(),n("div",Es," No beneficiary added ")):(a(),n("div",Ds,[e("table",Is,[l[24]||(l[24]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),n(W,null,Z(y.value,(d,j)=>(a(),n("tr",{key:j},[e("td",null,c(d.name),1),e("td",null,c(d.relation),1),e("td",null,c(d.age),1),e("td",null,c(I(d.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:P=>b(j)}," Delete ",8,Ls)])]))),128))])])]))]),e("div",Rs,[M.value?S("",!0):(a(),n("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:l[15]||(l[15]=d=>M.value=!0)}," Add Beneficiary ")),l[26]||(l[26]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Save",-1))])],32),M.value?(a(),n("div",Fs,[l[29]||(l[29]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:J(V,["prevent"]),class:"row g-2"},[e("div",qs,[k(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":l[16]||(l[16]=d=>v.value.name=d),required:""},null,512),[[A,v.value.name]])]),e("div",Ps,[k(e("input",{type:"text",placeholder:"Relation",class:"form-control","onUpdate:modelValue":l[17]||(l[17]=d=>v.value.relation=d),required:""},null,512),[[A,v.value.relation]])]),e("div",Os,[k(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":l[18]||(l[18]=d=>v.value.age=d),required:""},null,512),[[A,v.value.age]])]),e("div",js,[l[27]||(l[27]=e("label",{class:"form-label small"},"Birthdate",-1)),k(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[19]||(l[19]=d=>v.value.birth_date=d),required:""},null,512),[[A,v.value.birth_date]])]),e("div",Hs,[e("button",{type:"button",class:"btn btn-secondary",onClick:l[20]||(l[20]=d=>M.value=!1)}," Cancel "),l[28]||(l[28]=e("button",{type:"submit",class:"btn btn-primary"},"Save Beneficiary",-1))])],32)])):S("",!0)])]))}},zs=Q(Ws,[["__scopeId","data-v-881cc22e"]]),Gs={class:"main-section bg-light"},Ys={class:"container table-container"},Ks={class:"search-box mb-3 position-relative"},Js={key:0,class:"spinner-border text-primary spinner-sm position-absolute end-0 top-50 translate-middle-y me-3",role:"status"},Qs={class:"table-responsive"},Xs={class:"table table-bordered align-middle text-center"},Zs={key:0},el={key:1},tl={colspan:"9",class:"text-danger text-center"},sl={class:"text-start"},ll={class:"status-cell"},ol={class:"status-toggle"},al={class:"toggle-switch"},nl=["checked","onChange"],rl={class:"status-cell"},il={class:"status-toggle"},dl={class:"toggle-switch"},ul=["data-member-id","checked","onClick"],cl={class:"actions-column"},ml={class:"action-buttons-large"},vl=["onClick"],bl=["onClick"],pl={class:"action-buttons-small"},fl=["onClick"],gl={key:2},yl={class:"pagination-wrapper mt-3 mb-5"},_l={class:"pagination-controls"},hl=["onClick","innerHTML"],$l={class:"list-unstyled m-0"},kl={class:"modal fade",id:"editMember",tabindex:"-1"},wl={class:"modal-dialog modal-lg"},Ml={class:"modal-content"},xl={class:"modal-body"},Cl={class:"custom-modal"},Sl={class:"custom-modal-header"},Al={class:"custom-modal-body"},Nl={key:2,class:"custom-loading-modal"},Bl={class:"loading-content"},Tl={class:"mt-2"},Ul=400,Vl={__name:"RegisteredMember",props:{members:{type:Object,default:()=>({data:[],links:[],prev_page_url:null,next_page_url:null})},deceasedMember:{type:Array,default:()=>[]}},setup(U){const w=ve(),t=U,y=r([]),v=r(!1),M=r({top:"0px",left:"0px"}),p=r(null),i=r(!1),h=r(""),V=r(""),b=r([]),I=r({}),f=r(!1),l=r({}),d=r(!1),j=r(""),P=r(null);r(!1),r([]);const R=r(!1),x=r("");r([]),O(()=>t.members,_=>{y.value=_.data||[]},{immediate:!0}),O(()=>t.deceasedMember,_=>{b.value=_.data||[]},{immediate:!0});let s=null;O(V,_=>{s&&clearTimeout(s),s=setTimeout(()=>u(String(_||"").trim()),Ul)});async function u(_){if(!_){y.value=t.members.data,console.log("Search cleared â€” showing default members:",y.value),d.value=!1;return}d.value=!0,j.value="",console.log(`ðŸ” Searching for: "${_}"`);try{const m=await oe.get(route("members.search"),{params:{query:_}});console.log(" Raw Axios response:",m),console.log(" Response data:",m.data);let g=[];const N=(m==null?void 0:m.data)||{};if(Array.isArray(N.members))g=N.members;else if(N.members&&Array.isArray(N.members.data))g=N.members.data;else if(N.member&&typeof N.member=="object")g=[N.member];else if(Array.isArray(N.data))g=N.data;else{const F=Object.values(N).find(ae=>{var K;return Array.isArray(ae)&&((K=ae[0])==null?void 0:K.id)});F&&(g=F)}console.log("ðŸ§¾ Normalized members array to display:",g),y.value=g}catch{}finally{d.value=!1}}const E=_=>{confirm("Are you sure you want to trash this member?")&&se.delete(route("deleteMember",{id:_}),{onSuccess:()=>{alert("Member trashed"),v.value=!1}})},B=async _=>{const m=_.status==="active"?"inactive":"active";x.value=`${_.first_name} ${_.middle_name} ${_.last_name}`,R.value=!0;try{se.put(route("toggleMemberStatus",{id:_.id}),{status:m},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const g=y.value.map(N=>N.id===_.id?{...N,status:m}:N);y.value=g,i.value=m==="active",h.value=x.value},onError:g=>{console.error("Failed to toggle status:",g)},onFinish:()=>{setTimeout(()=>{R.value=!1},1500)}})}catch(g){console.error("Failed to toggle status:",g),setTimeout(()=>{R.value=!1},1500)}},C=(_,m)=>{if(v.value&&p.value===m){v.value=!1,p.value=null;return}p.value=m,v.value=!0,$e(()=>{const g=_.currentTarget.getBoundingClientRect(),N=document.querySelector(".actions-popup");if(!N)return;const F=N.offsetWidth,ae=window.innerWidth;let K=g.right+window.scrollX+10;K+F>ae&&(K=g.left+window.scrollX-F-10,K<0&&(K=10)),M.value={top:`${g.top+window.scrollY}px`,left:`${K}px`}})},D=_=>{v.value&&_.target&&!_.target.closest(".actions-popup")&&!_.target.closest(".three-dots-button")&&(v.value=!1,p.value=null)};le(()=>document.addEventListener("click",D)),ye(()=>document.removeEventListener("click",D));const ee=_=>{_&&se.visit(_,{preserveState:!0})},L=_=>{I.value=_||null,f.value=!0,P.value=(_==null?void 0:_.id)||null},$=()=>{if(f.value=!1,P.value){const _=document.querySelector(`input[type="checkbox"][data-member-id="${P.value}"]`);_&&(_.checked=!1),P.value=null}w.setText("Add Deceased Info.")},T=_=>{v.value=!1,l.value={..._}};document.getElementById("memberModalOverlay"),document.getElementById("memberModal"),document.getElementById("createBtn"),document.getElementById("closeBtn");const Y=z(()=>{var _;return y.value.length<=5?[{label:"1",url:((_=t.members.links[0])==null?void 0:_.url)||null,active:!0}]:t.members.links});return(_,m)=>(a(),n(W,null,[q(o(_e),{title:"Registered members"}),q(ke,null,{default:X(()=>[e("div",Gs,[q(Mt),q(Ct,{status:i.value,name:h.value},null,8,["status","name"]),e("div",Ys,[e("div",Ks,[k(e("input",{type:"text",class:"form-control search-input",placeholder:"Search members by name, contact, or purok...","onUpdate:modelValue":m[0]||(m[0]=g=>V.value=g)},null,512),[[A,V.value]]),d.value?(a(),n("div",Js,m[3]||(m[3]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):S("",!0)]),e("div",Qs,[e("table",Xs,[m[12]||(m[12]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"NAME"),e("th",null,"GENDER"),e("th",null,"AGE"),e("th",null,"CONTACT NO."),e("th",null,"STREET"),e("th",null,"STATUS"),e("th",null,"DECEASED"),e("th",null,"ACTION")])],-1)),e("tbody",null,[d.value?(a(),n("tr",Zs,m[4]||(m[4]=[e("td",{colspan:"9",class:"text-center"},[e("div",{class:"spinner-border text-info",role:"status"}),e("p",{class:"mt-2 text-muted"},"Searching...")],-1)]))):S("",!0),j.value&&!d.value?(a(),n("tr",el,[e("td",tl,c(j.value),1)])):S("",!0),(a(!0),n(W,null,Z(y.value,(g,N)=>(a(),n("tr",{key:N},[e("td",sl,c(g.first_name)+" "+c(g.middle_name)+" "+c(g.last_name),1),e("td",null,c(g.gender||"N/A"),1),e("td",null,c(g.age),1),e("td",null,c(g.contact_number),1),e("td",null,c(g.purok),1),e("td",ll,[e("div",ol,[e("label",al,[e("input",{type:"checkbox",checked:g.status==="active",onChange:F=>B(g)},null,40,nl),m[5]||(m[5]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:G(["status-label",g.status==="active"?"active":"inactive"])},c(g.status==="active"?"Active":"Inactive"),3)])]),e("td",rl,[e("div",il,[e("label",dl,[e("input",{type:"checkbox","data-member-id":g.id,checked:b.value.some(F=>F.member_id===g.id),onClick:F=>L(g)},null,8,ul),m[6]||(m[6]=e("span",{class:"toggle-slider"},null,-1))])])]),e("td",cl,[e("div",ml,[q(o(de),{href:_.route("viewMemberInfo",{id:g.id}),class:"me-1"},{default:X(()=>m[7]||(m[7]=[e("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"]),e("button",{"data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:F=>T(g),class:"me-1"},m[8]||(m[8]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,vl),e("button",{onClick:F=>E(g.id)},m[9]||(m[9]=[e("i",{class:"bi bi-trash"},null,-1)]),8,bl)]),e("div",pl,[e("button",{class:"btn btn-sm btn-outline-dark three-dots-button",onClick:J(F=>C(F,g.id),["stop"])},m[10]||(m[10]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)]),8,fl)])])]))),128)),!d.value&&y.value.length===0?(a(),n("tr",gl,m[11]||(m[11]=[e("td",{colspan:"9",class:"text-center text-muted"},"No members found",-1)]))):S("",!0)])])]),e("div",yl,[e("div",_l,[(a(!0),n(W,null,Z(Y.value,(g,N)=>(a(),n("button",{key:N,class:G(["btn pagination-btn",g.active?"btn-primary":"btn-outline-primary"]),onClick:F=>ee(g.url),innerHTML:g.label},null,10,hl))),128))])])])]),v.value?(a(),n("div",{key:0,class:"actions-popup bg-white border rounded shadow-sm p-2",style:he({top:M.value.top,left:M.value.left})},[e("ul",$l,[e("li",null,[q(o(de),{href:_.route("viewMemberInfo",{id:p.value}),class:"dropdown-item"},{default:X(()=>m[13]||(m[13]=[e("i",{class:"bi bi-eye me-2"},null,-1),H(" View")])),_:1},8,["href"])]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start","data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:m[1]||(m[1]=g=>T(y.value.find(N=>N.id===p.value)))},m[14]||(m[14]=[e("i",{class:"bi bi-pencil me-2"},null,-1),H(" Edit")]))]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start text-danger",onClick:m[2]||(m[2]=g=>E(p.value))},m[15]||(m[15]=[e("i",{class:"bi bi-trash me-2"},null,-1),H(" Delete")]))])])],4)):S("",!0),e("div",kl,[e("div",wl,[e("div",Ml,[m[16]||(m[16]=e("div",{class:"modal-header"},[e("h5",null,"Edit Member Info"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",xl,[q(zs,{member:l.value},null,8,["member"])])])])]),f.value?(a(),n("div",{key:1,class:"custom-modal-overlay",onClick:J($,["self"])},[e("div",Cl,[e("div",Sl,[e("h3",null,c(o(w).currentText||""),1),e("span",{class:"close-icon",onClick:$},"Ã—")]),e("div",Al,[q(cs,{deceasedMember:I.value},null,8,["deceasedMember"])])])])):S("",!0),R.value?(a(),n("div",Nl,[e("div",Bl,[m[17]||(m[17]=e("div",{class:"spinner-border text-primary",role:"status"},null,-1)),e("p",Tl,"Updating status for "+c(x.value)+"...",1)])])):S("",!0)]),_:1})],64))}},Rl=Q(Vl,[["__scopeId","data-v-24941e2b"]]);export{Rl as default};
