import{A as $}from"./AdminLayout-CPy_5tl1.js";import{r as i,s as v,j as w,f as n,o as r,b as e,e as O,h as g,t as c,F as D,G as C,n as A,l as k,z as N,m as L,a as m,u as f,g as M,w as j}from"./app-BKViIBP_.js";import{i as R,C as z,_ as S,M as I}from"./MonthlyOverviewCard-87F9Z8sk.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const E={class:"card-header"},T={class:"card-title"},V={key:0,class:"record-count"},B={class:"table-container"},F={class:"table-responsive"},J={class:"deceased-table"},H={key:0,class:"no-data-row"},U={class:"index-cell"},G={class:"name-cell"},Y={class:"date-cell"},q={class:"address-cell"},K={class:"expand-toggle"},P={class:"toggle-text"},Q={__name:"CurrentDeceased",props:{data:{type:Array,default:()=>[]}},setup(b){const d=b,s=i([]),a=i(!1);v(()=>d.data,t=>{s.value=t,console.log("current deceased: ",s.value)},{immediate:!0});const _=w(()=>a.value||s.value.length<=5?s.value:s.value.slice(0,5)),h=w(()=>Math.max(0,s.value.length-5)),u=()=>{a.value=!a.value},l=t=>{if(!t||t==="N/A")return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return t}};return(t,o)=>(r(),n("div",{class:A(["table-card",{"is-expanded":a.value}])},[e("div",E,[e("h5",T,[o[0]||(o[0]=O(" Current Deceased Records ")),s.value.length>0?(r(),n("span",V,c(s.value.length),1)):g("",!0)])]),e("div",B,[e("div",F,[e("table",J,[o[2]||(o[2]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Date of Death"),e("th",null,"Last Night")])],-1)),e("tbody",null,[s.value.length===0?(r(),n("tr",H,o[1]||(o[1]=[e("td",{colspan:"4",class:"no-data"}," No current deceased record found. ",-1)]))):g("",!0),(r(!0),n(D,null,C(_.value,(p,y)=>(r(),n("tr",{key:y,class:"data-row"},[e("td",U,c(y+1),1),e("td",G,c(p.deceased_name),1),e("td",Y,c(l(p.date_of_death||"N/A")),1),e("td",q,c(l(p.last_night||"N/A")),1)]))),128))])])]),s.value.length>5?(r(),n("div",{key:0,class:"expand-section",onClick:u},[e("div",K,[e("span",P,c(a.value?"Show Less":`Show ${h.value} More Records`),1),e("i",{class:A(["toggle-icon",a.value?"icon-eye-off":"icon-eye"])},null,2)])])):g("",!0)])],2))}},W=x(Q,[["__scopeId","data-v-d68a9773"]]),X={class:"chart-card"},Z={class:"modal fade",id:"viewAll",tabindex:"-1","aria-labelledby":"viewAllLabel","aria-hidden":"true"},ee={class:"modal-dialog modal-lg"},te={class:"modal-content"},ae={class:"modal-body"},se={key:0},le={class:"table table-striped table-bordered"},oe={key:1,class:"text-center text-muted"},de={__name:"DeceasedRecorded",props:{records:{type:Array,default:()=>[]}},setup(b){const d=b,s=i(null);let a=null;const _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],h=()=>{if(!a)return;const u=Array(12).fill(0);d.records.forEach(p=>{const y=new Date(p.date_of_death).getMonth();u[y]++});const l="Count Of Deceased Members Recorded In This System",t=35,o=l.length>t?l.slice(0,t)+"...":l;a.setOption({title:{text:o,left:"center",textStyle:{fontSize:16,overflow:"truncate",width:250}},tooltip:{trigger:"axis"},xAxis:{type:"category",data:_},yAxis:{type:"value",minInterval:1},series:[{name:"Recorded",type:"bar",data:u,itemStyle:{color:"#0000ff"}}],grid:{left:"3%",right:"4%",bottom:"8%",containLabel:!0}}),a.resize()};return v(()=>d.records,()=>h(),{immediate:!0}),k(async()=>{await N(),s.value&&(a=R(s.value),h(),window.addEventListener("resize",a.resize))}),L(()=>{a&&(window.removeEventListener("resize",a.resize),a.dispose(),a=null)}),(u,l)=>(r(),n("div",null,[l[3]||(l[3]=e("div",{class:"d-flex justify-content-end view-all-btn me-2"},[e("button",{type:"button",class:"btn btn-primary view-all-btn","data-bs-toggle":"modal","data-bs-target":"#viewAll"},[e("span",{class:"d-none d-sm-none d-lg-block"},"View All"),e("span",{class:"d-block d-sm-block d-lg-none bi bi-eye"})])],-1)),e("div",X,[e("div",{ref_key:"chartRef",ref:s,class:"chart"},null,512)]),e("div",Z,[e("div",ee,[e("div",te,[l[1]||(l[1]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"viewAllLabel"},"All Deceased Records"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",ae,[d.records.length>0?(r(),n("div",se,[e("table",le,[l[0]||(l[0]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Deceased Name"),e("th",null,"Date of Death"),e("th",null,"Member ID")])],-1)),e("tbody",null,[(r(!0),n(D,null,C(d.records,(t,o)=>(r(),n("tr",{key:t.report_id},[e("td",null,c(o+1),1),e("td",null,c(t.deceased_name),1),e("td",null,c(new Date(t.date_of_death).toLocaleDateString()),1),e("td",null,c(t.member_id),1)]))),128))])])])):(r(),n("div",oe," No records found. "))]),l[2]||(l[2]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])]))}},ne=x(de,[["__scopeId","data-v-dc211ca3"]]),re={class:"container-fluid mx-0 px-0 home-container"},ce={class:"row g-4"},ie={class:"col-md-8 responsive-card"},ue={class:"col-md-4 responsive-card"},me={class:"row mt-4"},ve={class:"col-12"},he={class:"dashboard-container"},_e={__name:"Home",props:{currentMonthData:{type:Object,default:()=>({})},yearData:{type:Object,default:()=>({})},monthlyOverview:{type:Object,default:()=>({})},currentDeceasedMembers:{type:Array,default:()=>[]},allDeceased:{type:Array,default:()=>[]},currentDeceasedMember:{type:Object,default:()=>({})}},setup(b){const d=b;let s=i([]),a=i([]),_=i([]);const h=i([]),u=i([]),l=i({});return v(()=>d.currentMonthData,t=>{s.value=t?Object.values(t):[]},{immediate:!0}),v(()=>d.yearData,t=>{a.value=t?Object.values(t):[]},{immediate:!0}),v(()=>d.monthlyOverview,t=>{_.value=t?Object.values(t):[]},{immediate:!0}),v(()=>d.currentDeceasedMembers,t=>{h.value=t?Object.values(t):[]},{immediate:!0}),v(()=>d.allDeceased,t=>{u.value=t?Object.values(t):[]},{immediate:!0}),v(()=>d.currentDeceasedMember,t=>{l.value=t||{}},{immediate:!0}),(t,o)=>(r(),n(D,null,[m(f(M),{title:"Dashboard"}),m($,null,{default:j(()=>[m(f(M),{title:"Dashboard"}),e("div",re,[o[0]||(o[0]=e("h2",{class:"fw-normal fs-5 my-4 ms-3"},"Analytics Dashboard",-1)),e("div",ce,[e("div",ie,[m(z,{data:f(s)},null,8,["data"])]),e("div",ue,[m(S,{data:f(a)},null,8,["data"])])]),e("div",me,[e("div",ve,[m(I,{data:f(_)},null,8,["data"])])]),e("div",he,[m(W,{data:h.value},null,8,["data"]),m(ne,{records:u.value},null,8,["records"])]),o[1]||(o[1]=e("div",{class:"add-space-at-bottom"},null,-1))])]),_:1})],64))}},De=x(_e,[["__scopeId","data-v-9e64775e"]]);export{De as default};
