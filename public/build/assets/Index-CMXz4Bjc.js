import{C as $}from"./CollectorLayout-LRuKipK6.js";import{l as r,q as u,f as g,o as v,b as t,t as p,u as m,n as y,F as S,E as P,W as M,i as k,a as h,g as I,w as N}from"./app-lJPr0_lx.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const R={class:"container-fluid header-container mt-3"},T={class:"table"},U={class:"tbody"},D={style:{"border-top":"1px solid #000","border-bottom":"1px solid #000"}},E={class:"bg-light"},F={class:"bg-light"},O={class:"bg-light"},B={class:"bg-light"},j={class:"bg-light"},w={__name:"SubHeaderForCollectorReport",props:{membersCount:{type:Number,default:0},amount:{type:Number,default:0},activePurok:{type:String,default:""},paidMembers:{type:Number,default:0},unpaidMembers:{type:Number,default:0}},setup(_){const s=_;let n=r(0),c=r(0),i=r(""),b=r(""),o=r("");return u(()=>s.amount,e=>{c.value=e},{immediate:!0}),u(()=>s.membersCount,e=>{n.value=e},{immediate:!0}),u(()=>s.activePurok,e=>{i.value=e},{immediate:!0}),u(()=>s.paidMembers,e=>{b.value=e.toString()+(e===1?" Member":" Members")},{immediate:!0}),u(()=>s.unpaidMembers,e=>{o.value=e.toString()+(e===1?" Member":" Members")},{immediate:!0}),(e,a)=>(v(),g("div",null,[t("div",R,[t("table",T,[a[0]||(a[0]=t("thead",{class:"thead"},[t("tr",{style:{"border-top":"1px solid #000","border-bottom":"1px solid #000"}},[t("td",{class:"bg-light"},"MEMBERS"),t("td",{class:"bg-light"},"AMOUNT"),t("td",{class:"bg-light"},"PUROK"),t("td",{class:"bg-light"},"PAID"),t("td",{class:"bg-light"},"UN PAID")])],-1)),t("tbody",U,[t("tr",D,[t("td",E,p(m(n))+" Members",1),t("td",F,p(m(c)),1),t("td",O,p(m(i)[5]),1),t("td",B,p(m(b)),1),t("td",j,p(m(o)),1)])])])])]))}},K={class:"container-fluid d-flex gap-3 align-items-center mb-3"},L={class:"table-responsive table-container"},V={key:0,class:"table"},W={class:"bg-light"},q={class:"bg-light"},z={class:"bg-light"},H={class:"bg-light"},G={class:"bg-light text-center"},J={key:0,class:"bi bi-check-circle text-success fs-5"},Q={key:1,class:"bi bi-ban text-danger fs-5"},X={key:1,class:"text-center p-3"},Y={__name:"ReportTable",props:{activeStatus:{type:String,default:"paid"},activePurok:{type:String,default:"all"},members:{type:Array,default:()=>[]},contributionsIds:{type:Array,default:()=>[]}},setup(_){const s=_,n=r([]),c=r("all"),i=r(s.activeStatus),b=()=>{i.value==="paid"?n.value=s.members.filter(e=>s.contributionsIds.includes(e.id)):i.value==="not_paid"?n.value=s.members.filter(e=>!s.contributionsIds.includes(e.id)):n.value=s.members};u(()=>[s.members,i.value],()=>{b()},{immediate:!0,deep:!0}),u(()=>s.activePurok,e=>{c.value=e},{immediate:!0});const o=e=>{if(i.value=e,c.value==="all"){b();return}M.get(route("collector.toggleStatus",{status:e,purok:c.value}),{},{preserveState:!0,replace:!0})};return(e,a)=>(v(),g("div",null,[t("div",K,[t("h5",{class:y(["choice",{"text-success":i.value==="paid"}]),onClick:a[0]||(a[0]=d=>o("paid"))}," PAID ",2),t("h5",{class:y(["choice",{"text-success":i.value==="not_paid"}]),onClick:a[1]||(a[1]=d=>o("not_paid"))}," UNPAID ",2)]),t("div",L,[n.value.length>0?(v(),g("table",V,[a[2]||(a[2]=t("thead",null,[t("tr",null,[t("th",{class:"bg-light"},"ID"),t("th",{class:"bg-light"},"NAME"),t("th",{class:"bg-light"},"CONTACT NO."),t("th",{class:"bg-light"},"PUROK"),t("th",{class:"bg-light"},"STATUS")])],-1)),t("tbody",null,[(v(!0),g(S,null,P(n.value,d=>(v(),g("tr",{key:d.id},[t("td",W,p(d.id),1),t("td",q,p(d.first_name)+" "+p(d.middle_name)+" "+p(d.last_name),1),t("td",z,p(d.contact_number),1),t("td",H,p(d.purok),1),t("td",G,[s.contributionsIds.includes(d.id)?(v(),g("i",J)):(v(),g("i",Q))])]))),128))])])):(v(),g("div",X,a[3]||(a[3]=[t("p",{class:"text-muted"},"No members found.",-1)])))])]))}},Z=x(Y,[["__scopeId","data-v-df4b6d54"]]),tt={class:"d-flex flex-row justify-content-between align-items-center px-0"},et=["onClick"],st={__name:"PurokComponentForCollectorReport",props:{activePurok:{type:String,default:()=>"all"},activeStatus:{type:String,default:()=>"paid"}},setup(_){const s=_;let n=r(""),c=r("all");u(()=>s.activePurok,o=>{c.value=o},{immediate:!0}),u(()=>s.activeStatus,o=>{n.value=o},{immediate:!0});const i=["purok1","purok2","purok3","purok4"],b=o=>{M.get(route("collector.togglePurok",{status:n.value,purok:o}),{onSuccess:()=>console.log("changing purok"),onError:e=>console.log("An error occured: ",e)})};return(o,e)=>(v(),g("div",tt,[t("div",null,[(v(),g(S,null,P(i,a=>t("span",{key:a,class:y(["mx-2 purok",{"fw-bold active":a===m(c)}]),onClick:d=>b(a)},p(a),11,et)),64))])]))}},at=x(st,[["__scopeId","data-v-b89b0c21"]]),ot={class:"purok-container container-fluid d-flex justify-content-end align-items-center"},nt={__name:"Index",props:{contributions:{type:Array,default:()=>[]},activePurok:{type:String,default:()=>"all"},activeStatus:{type:String,default:()=>"paid"},contributionsIds:{type:Array,default:()=>[]},members:{type:Array,default:()=>[]}},setup(_){const s=_;let n=r([]),c=r("all"),i=r(0),b=r("paid"),o=r([]);const e=r([]);u(()=>s.contributions,l=>{n.value=l,i.value=parseInt(l.reduce((f,C)=>f+parseFloat(C.amount),0))},{immediate:!0}),u(()=>s.activePurok,l=>{c.value=l},{immediate:!0}),u(()=>s.activeStatus,l=>{b.value=l},{immediate:!0}),u(()=>s.contributionsIds,l=>{o.value=Array.isArray(l)?[...l]:[]},{immediate:!0}),u(()=>s.members,l=>{e.value=l},{immediate:!0});const a=k(()=>e.value.filter(l=>o.value.includes(l.id)).length),d=k(()=>e.value.filter(l=>!o.value.includes(l.id)).length),A=k(()=>e.value.length);return(l,f)=>(v(),g("div",null,[h(m(I),{title:"Report"}),h($,null,{default:N(()=>[f[0]||(f[0]=t("div",{class:"head container"},[t("h5",{class:"mb-0"},"Report"),t("p",null,"Contribution Report")],-1)),t("div",ot,[h(at,{activePurok:m(c),activeStatus:m(b)},null,8,["activePurok","activeStatus"])]),h(w,{membersCount:A.value,amount:Number(m(i)),activePurok:m(c),paidMembers:a.value,unpaidMembers:d.value},null,8,["membersCount","amount","activePurok","paidMembers","unpaidMembers"]),h(Z,{activeStatus:m(b),contributionsIds:m(o),members:e.value},null,8,["activeStatus","contributionsIds","members"])]),_:1})]))}};export{nt as default};
