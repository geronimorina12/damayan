import{A as O}from"./AdminLayout-M0Y88O6V.js";import{r,s as C,f as u,o as d,b as t,F as w,G as $,e as N,t as i,x as L,i as k,D as R,u as a,n as y,I as T,h as A,d as F,l as B,j as I,J as U,a as x,g as H,w as z,c as V}from"./app-BEsV2jyy.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as j}from"./html2pdf-BdPH3okQ.js";import"./logo1-BZ0h4foK.js";const Y={key:0,class:"mb-4"},G={class:"container"},K={class:"table-responsive-wrapper"},q={class:"responsive-table"},J={"data-label":"Collector"},Z={"data-label":"Purok"},Q={"data-label":"Assigned Members"},W={"data-label":"Paid"},X={"data-label":"Unpaid"},tt={key:1,class:"container text-muted text-center"},et={__name:"ContributionReportForAdmin",props:{contributions:{type:Array,default:()=>[]}},setup(f){const v=f,o=r([]),b=r([]),c=r([]),m=r([]),_=r([]);return C(()=>v.contributions,l=>{o.value=l,b.value=o.value.filter(s=>s.purok=="purok1"),c.value=o.value.filter(s=>s.purok=="purok2"),m.value=o.value.filter(s=>s.purok=="purok3"),_.value=o.value.filter(s=>s.purok=="purok4")},{immediate:!0}),(l,s)=>(d(),u("div",null,[o.value.length>0?(d(),u("div",Y,[t("div",G,[t("div",K,[t("table",q,[s[1]||(s[1]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{"data-label":"Collector"},"COLLECTOR"),t("th",{"data-label":"Purok"},"PUROK"),t("th",{"data-label":"Assigned Members"},"ASSIGNED MEMBERS"),t("th",{"data-label":"Paid"},"PAID"),t("th",{"data-label":"Unpaid"},"UNPAID")])],-1)),t("tbody",null,[(d(!0),u(w,null,$(f.contributions,(h,g)=>(d(),u("tr",{key:g},[t("td",J,[s[0]||(s[0]=t("i",{class:"bi bi-person me-2"},null,-1)),N(i(h.collector),1)]),t("td",Z,i(h.purok),1),t("td",Q,i(h.members),1),t("td",W,i(h.paid),1),t("td",X,i(h.not_paid),1)]))),128))])])]),s[2]||(s[2]=t("div",{class:"container w-50 h-50"},null,-1))])])):(d(),u("div",tt,s[3]||(s[3]=[t("p",null,"No contribution data.",-1)])))]))}},ot=M(et,[["__scopeId","data-v-3f65da40"]]),st={key:0,class:"container"},lt={class:"table-responsive-wrapper"},at={class:"responsive-table"},nt={"data-label":"Amount"},rt={"data-label":"Members"},dt={"data-label":"Collector"},it={"data-label":"Purok"},ut={key:1,class:"container text-muted text-center"},ct={__name:"RecentContributionForAdmin",props:{recent:{type:Array,default:()=>[]}},setup(f){const v=f,o=r([]);return C(()=>v.recent,b=>{o.value=b},{immediate:!0}),(b,c)=>(d(),u("div",null,[o.value.length>0?(d(),u("div",st,[t("div",lt,[t("table",at,[c[0]||(c[0]=t("thead",{class:"table-light"},[t("tr",null,[t("th",{"data-label":"Amount"},"AMOUNT"),t("th",{"data-label":"Members"},"MEMBERS"),t("th",{"data-label":"Collector"},"COLLECTOR"),t("th",{"data-label":"Purok"},"PUROK")])],-1)),t("tbody",null,[(d(!0),u(w,null,$(f.recent,(m,_)=>(d(),u("tr",{key:_},[t("td",nt,i(m.total_amount),1),t("td",rt,i(m.members),1),t("td",dt,i(m.collector),1),t("td",it,i(m.purok),1)]))),128))])])])])):(d(),u("div",ut,c[1]||(c[1]=[t("p",null,"No recent contribution data.",-1)])))]))}},mt=M(ct,[["__scopeId","data-v-a455ffd6"]]),pt={class:"container"},bt={class:"mb-3"},vt={class:"invalid-feedback"},_t={class:"mb-3"},ft={class:"invalid-feedback"},ht={class:"mb-3"},kt={class:"invalid-feedback"},Ct={class:"mb-3"},yt={class:"mb-3"},wt=["value"],gt={class:"invalid-feedback"},$t=["disabled"],At={key:0,class:"spinner-border spinner-border-sm me-1"},Mt={__name:"AddCollector",emits:["submitted"],setup(f,{emit:v}){const o=L({name:"",email:"",password:"",role:"collector",purok:"1"}),b=v,c=["1","2","3","4"],m=()=>{o.post(route("reports.storeCollector"),{onSuccess:()=>{o.reset(),b("submitted"),alert("Collector added successfully!")},onError:_=>console.log(_)})};return(_,l)=>(d(),u("div",pt,[t("form",{onSubmit:F(m,["prevent"]),class:"bg-white rounded"},[t("div",bt,[l[5]||(l[5]=t("label",{for:"name",class:"form-label"},"Name",-1)),k(t("input",{type:"text",id:"name","onUpdate:modelValue":l[0]||(l[0]=s=>a(o).name=s),class:y(["form-control",{"is-invalid":a(o).errors.name}])},null,2),[[R,a(o).name]]),t("div",vt,i(a(o).errors.name),1)]),t("div",_t,[l[6]||(l[6]=t("label",{for:"email",class:"form-label"},"Email",-1)),k(t("input",{type:"email",id:"email","onUpdate:modelValue":l[1]||(l[1]=s=>a(o).email=s),class:y(["form-control",{"is-invalid":a(o).errors.email}])},null,2),[[R,a(o).email]]),t("div",ft,i(a(o).errors.email),1)]),t("div",ht,[l[7]||(l[7]=t("label",{for:"password",class:"form-label"},"Password",-1)),k(t("input",{type:"password",id:"password","onUpdate:modelValue":l[2]||(l[2]=s=>a(o).password=s),class:y(["form-control",{"is-invalid":a(o).errors.password}])},null,2),[[R,a(o).password]]),t("div",kt,i(a(o).errors.password),1)]),t("div",Ct,[l[8]||(l[8]=t("label",{for:"role",class:"form-label"},"Role",-1)),k(t("input",{type:"text",id:"role","onUpdate:modelValue":l[3]||(l[3]=s=>a(o).role=s),class:"form-control",readonly:""},null,512),[[R,a(o).role]])]),t("div",yt,[l[10]||(l[10]=t("label",{for:"purok",class:"form-label"},"Purok",-1)),k(t("select",{id:"purok","onUpdate:modelValue":l[4]||(l[4]=s=>a(o).purok=s),class:y(["form-select",{"is-invalid":a(o).errors.purok}])},[l[9]||(l[9]=t("option",{disabled:"",value:""},"Select Purok",-1)),(d(),u(w,null,$(c,s=>t("option",{key:s,value:s},i(s),9,wt)),64))],2),[[T,a(o).purok]]),t("div",gt,i(a(o).errors.purok),1)]),t("button",{type:"submit",class:"btn btn-primary",disabled:a(o).processing},[a(o).processing?(d(),u("span",At)):A("",!0),l[11]||(l[11]=N(" Submit "))],8,$t)],32)]))}},Rt=M(Mt,[["__scopeId","data-v-ff4066de"]]),xt={key:0,class:"select-wrapper"},Dt={class:"select-box"},Nt=["value"],St={key:1},Et={class:"header"},Pt={class:"deceased-name"},Ut={class:"table-container"},Vt={class:"members-table"},Tt={class:"total-amount"},Bt={__name:"View",setup(f){const v=r([]),o=r(null);r(null);const b=r(""),c=r(!1),m=r([]),_=r(null),l=async n=>{try{const e=await U.get(`/reports/contributions/${n}`);m.value=e.data.contributions}catch(e){console.error("Error fetching contributions:",e)}};B(async()=>{try{const n=await U.get("/reports/deceased");v.value=n.data.deceased}catch(n){console.error("An error occurred while fetching deceased:",n)}});const h=()=>{l(o.value);const n=v.value.find(e=>e.member_id==o.value);b.value=(n==null?void 0:n.deceased_name)||"",c.value=!0},g=I(()=>m.value.reduce((n,e)=>n+parseFloat(e.amount||0),0)),D=()=>{const n=_.value,e={filename:`${b.value}_Report.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};j().from(n).set(e).save()};return(n,e)=>(d(),u(w,null,[c.value?A("",!0):(d(),u("div",xt,[e[2]||(e[2]=t("label",{class:"select-label"},"Select Deceased Member:",-1)),t("div",Dt,[k(t("select",{"onUpdate:modelValue":e[0]||(e[0]=p=>o.value=p),onChange:h},[e[1]||(e[1]=t("option",{disabled:"",value:""},"Select...",-1)),(d(!0),u(w,null,$(v.value,p=>(d(),u("option",{key:p.member_id,value:p.member_id},i(p.deceased_name),9,Nt))),128))],544),[[T,o.value]])])])),c.value?(d(),u("div",St,[t("button",{onClick:D,class:"download-btn",title:"Download PDF"},e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:`M12 3a1 1 0 011 1v9.586l3.293-3.293a1 1 0 011.414 1.414l-5 
            5a1 1 0 01-1.414 0l-5-5a1 1 0 
            011.414-1.414L11 13.586V4a1 1 0 011-1zm-7 
            14a1 1 0 100 2h14a1 1 0 100-2H5z`})],-1)])),t("div",{ref_key:"pdfContent",ref:_,class:"document-container"},[t("div",Et,[e[4]||(e[4]=t("div",{class:"organization-name"},"BULAN P.R.O.T.E.C DAMAYAN FEDERATION",-1)),e[5]||(e[5]=t("div",{class:"organization-subtitle"},"(People's Responsible Organization Transforming Community)",-1)),e[6]||(e[6]=t("div",{class:"chapter-info"},"Affiliated Bulan, Sorsogon Chapter Brgy. ______ C.Y 2021",-1)),e[7]||(e[7]=t("div",{class:"established"},"Since 2016",-1)),t("div",Pt," Deceased Name: "+i(b.value),1)]),t("div",Ut,[e[9]||(e[9]=t("div",{class:"mb-3"},[t("strong",null,"MEMBERS")],-1)),t("table",Vt,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"NAME"),t("th",null,"STATUS"),t("th",null,"AMOUNT")])],-1)),t("tbody",null,[(d(!0),u(w,null,$(m.value,(p,S)=>{var E,P;return d(),u("tr",{key:S},[t("td",null,i(S+1),1),t("td",null,i(((E=p==null?void 0:p.member_contribution)==null?void 0:E.first_name)||"member")+" "+i(((P=p==null?void 0:p.member_contribution)==null?void 0:P.last_name)||""),1),t("td",null,i(p.status),1),t("td",null,i(Math.floor(p.amount)||"0"),1)])}),128))])]),t("div",Tt," TOTAL AMOUNT: â‚±"+i(g.value.toLocaleString()),1)]),e[10]||(e[10]=t("div",{class:"signature"},[t("div",null,"Noted By:"),t("div",{class:"president-name"},"Melva Canale Delariarte"),t("div",null,"DAMAYAN PRESIDENT")],-1))],512)])):A("",!0)],64))}},Ot=M(Bt,[["__scopeId","data-v-5599dfff"]]),Lt={class:"modern-report-container"},Ft={class:"tab-navigation"},It={class:"content-area"},Ht={class:"modal fade",id:"viewReportModal",tabindex:"-1","aria-labelledby":"viewReportModalLabel","aria-hidden":"true"},zt={class:"modal-dialog modern-modal-dialog"},jt={class:"modal-content modern-modal-content"},Yt={class:"modal-body"},Gt={class:"modal fade",id:"addCollectorModal",tabindex:"-1","aria-labelledby":"addCollectorModalLabel","aria-hidden":"true"},Kt={class:"modal-dialog",style:{"max-width":"700px"}},qt={class:"modal-content"},Jt={class:"modal-body"},Zt={__name:"ReportHome",props:{contributions:{type:Array,default:()=>[]},memberContributions:{type:Array,default:()=>[]},deathReports:{type:Array,default:()=>[]},president:{type:Object,default:()=>({})}},setup(f){const v=f;let o=r([]),b=r(!0),c=r(!1),m=r([]),_=r([]);r(!1),r(null);let l=r(0);r(null);const s=r("");C(()=>v.contributions,n=>{o.value=n},{immediate:!0}),C(()=>v.memberContributions,n=>{m.value=n.filter(e=>e.member_contribution!==null),console.log("member contributions:",m.value),l.value=m.value.reduce((e,p)=>e+Number(p.amount||0),0)},{immediate:!0}),C(()=>v.deathReports,n=>{_.value=n},{immediate:!0}),C(()=>v.president,n=>{s.value=n==null?void 0:n.name},{immediate:!0});const h=()=>{c.value=!0,b.value=!1},g=()=>{c.value=!1,b.value=!0};B(()=>{document.getElementById("addCollectorModal")});const D=()=>{};return(n,e)=>(d(),u("div",null,[x(a(H),{title:"Report"}),x(O,null,{default:z(()=>[t("div",Lt,[e[2]||(e[2]=t("div",{class:"modern-header"},[t("div",{class:"header-content"},[t("h5",{class:"fw-light"},"Reports Dashboard")]),t("div",{class:"header-actions"},[t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#viewReportModal"},[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 17H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M9 13H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M9 9H13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M3 5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5Z",stroke:"currentColor","stroke-width":"2"})]),N(" View Reports ")])])],-1)),t("div",Ft,[t("button",{class:y(a(c)?"tab-btn active":"tab-btn"),onClick:h}," Recent Contributions ",2),t("button",{class:y(a(b)?"tab-btn active":"tab-btn"),onClick:g}," Contributions Report ",2)]),t("div",It,[a(b)?(d(),V(ot,{key:0,contributions:a(o)},null,8,["contributions"])):A("",!0),a(c)?(d(),V(mt,{key:1,recent:a(o)},null,8,["recent"])):A("",!0)]),t("div",Ht,[t("div",zt,[t("div",jt,[e[0]||(e[0]=t("div",{class:"modal-header modern-modal-header"},[t("div",{class:"header-content"}),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Yt,[x(Ot)])])])]),t("div",Gt,[t("div",Kt,[t("div",qt,[e[1]||(e[1]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"addCollectorModalLabel"}," Add Collector "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Jt,[x(Rt,{onSubmitted:D})])])])]),e[3]||(e[3]=t("div",{class:"extra-space"},null,-1))])]),_:1})]))}},oe=M(Zt,[["__scopeId","data-v-279a1c35"]]);export{oe as default};
