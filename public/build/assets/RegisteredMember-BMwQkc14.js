import{q as ue,r,j as H,x as ie,s as P,C as ce,f as n,o as a,b as e,h as A,e as W,t as c,d as K,i as w,D as S,u as o,n as Y,I as ee,E as re,F as z,G as X,l as se,J as le,a as F,K as pe,L as be,W as te,w as Q,T as ae,c as fe,M as ge,m as ye,g as _e,S as de,N as he,z as $e}from"./app-FxwxEWAe.js";import{A as we}from"./AdminLayout-BCYaNr7W.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const me=ue("modalStore",()=>{const T=r(!1);return{closeAddMemberModal:T,triggerCloseMemberModal:()=>{T.value=!0},resetModal:()=>{T.value=!1}}}),ke={class:"container-fluid d-flex flex-row justify-content-center main-container"},Me={class:"container mt-5"},xe={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},Ce={class:"row g-3"},Se={class:"col-md-6"},Ae={class:"col-md-6"},Ne=["max"],Be={key:0,class:"invalid-feedback d-block"},Te={class:"col-md-6"},De={class:"col-md-6"},Ue={class:"col-md-6"},Ve={class:"col-md-6"},Ee={class:"col-md-6"},Ie={class:"col-md-6"},Le={class:"col-md-6"},Re={class:"col-md-6"},Fe={key:0,class:"text-danger small mt-1"},qe={class:"col-12"},Oe={class:"mt-4"},Pe={key:0,class:"text-center mt-3 text-muted"},je={key:1,class:"table-responsive mt-2"},He={class:"table table-bordered table-striped align-middle"},We=["onClick"],ze={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},Ge={key:1,class:"card mt-4 p-3 shadow-sm"},Ye={class:"col-md-6"},Ke={class:"col-md-6"},Je={class:"col-md-6"},Qe={class:"col-md-6"},Xe=["max"],Ze={class:"col-12 d-flex justify-content-end gap-2 mt-3"},et=["disabled"],tt={__name:"AddNewMember",props:{show:{},showModifiers:{}},emits:["update:show"],setup(T){const M=me(),t=r({name:"",relation:"",age:"",birth_date:""}),y=r([]),p=r(!1),x=r(""),_=r(""),i=r("");r(!1),H(()=>new Date().getFullYear());const h=C=>{if(!C)return"";const s=new Date,u=new Date(C);let N=s.getFullYear()-u.getFullYear();const k=s.getMonth()-u.getMonth();return(k<0||k===0&&s.getDate()<u.getDate())&&N--,console.log("Calculated age: ",N.toString()),N.toString()},V=(C,s)=>{if(!C)return s.value="",!0;const u=new Date(C),N=new Date;return u.setHours(0,0,0,0),N.setHours(0,0,0,0),u>N?(s.value="Birth date cannot be in the future.",!1):(s.value="",!0)},b=ie({first_name:"",last_name:"",address:"Bonga, Bulan, Sorsogon",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"active",occupation:"",gender:"",beneficiaries:[]});P(()=>b.date_of_birth,C=>{const s=V(C,i);C&&s?b.age=h(C):b.age=""}),P(()=>t.value.birth_date,C=>{const s=V(C,_);C&&s?t.value.age=h(C):t.value.age=""});const I=()=>{if(b.clearErrors(),!/^0\d{10}$/.test(b.contact_number)){b.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}M.triggerCloseMemberModal(),V(b.date_of_birth,i)&&(M.triggerCloseMemberModal(),b.beneficiaries=y.value,b.post(route("addMemberPost"),{onSuccess:()=>{x.value="Member added successfully!",q.value=!0,L.value=!0,setTimeout(()=>x.value="",4e3)},onError:s=>console.log("An error occurred => ",s)}))},f=()=>{V(t.value.birth_date,_)&&(y.value.push({...t.value}),t.value={name:"",relation:"",age:"",birth_date:""},_.value="",p.value=!1)},l=C=>{y.value.splice(C,1)},d=C=>{const s={year:"numeric",month:"long",day:"numeric"};return new Date(C).toLocaleDateString(void 0,s)},j=H(()=>{const C=new Date,s=C.getFullYear()-16,u=String(C.getMonth()+1).padStart(2,"0"),N=String(C.getDate()).padStart(2,"0");return`${s}-${u}-${N}`}),q=ce(T,"show"),L=r(!1);M.triggerCloseMemberModal();const O=H(()=>new Date().toISOString().split("T")[0]);return(C,s)=>(a(),n("div",ke,[e("div",Me,[x.value?(a(),n("div",xe,[W(c(x.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:s[0]||(s[0]=u=>x.value="")})])):A("",!0),e("form",{onSubmit:K(I,["prevent"]),class:"form"},[e("div",Ce,[e("div",Se,[s[21]||(s[21]=e("label",{class:"form-label"},"Last name",-1)),w(e("input",{type:"text",class:"form-control",placeholder:"Marinda","onUpdate:modelValue":s[1]||(s[1]=u=>o(b).last_name=u)},null,512),[[S,o(b).last_name]])]),e("div",Ae,[s[22]||(s[22]=e("label",{class:"form-label"},"Birth date",-1)),w(e("input",{type:"date",id:"birthDate",class:Y(["form-control",{"is-invalid":i.value}]),"onUpdate:modelValue":s[2]||(s[2]=u=>o(b).date_of_birth=u),max:j.value},null,10,Ne),[[S,o(b).date_of_birth]]),i.value?(a(),n("div",Be,c(i.value),1)):A("",!0)]),e("div",Te,[s[23]||(s[23]=e("label",{class:"form-label"},"First name",-1)),w(e("input",{type:"text",class:"form-control",placeholder:"Jovan","onUpdate:modelValue":s[3]||(s[3]=u=>o(b).first_name=u),required:""},null,512),[[S,o(b).first_name]])]),e("div",De,[s[24]||(s[24]=e("label",{class:"form-label"},"Age",-1)),w(e("input",{type:"number",class:"form-control",placeholder:"0","onUpdate:modelValue":s[4]||(s[4]=u=>o(b).age=u),required:"",disabled:""},null,512),[[S,o(b).age]])]),e("div",Ue,[s[25]||(s[25]=e("label",{class:"form-label"},"Middle name",-1)),w(e("input",{type:"text",class:"form-control",placeholder:"Munticalbo","onUpdate:modelValue":s[5]||(s[5]=u=>o(b).middle_name=u)},null,512),[[S,o(b).middle_name]])]),e("div",Ve,[s[27]||(s[27]=e("label",{class:"form-label"},"Gender",-1)),w(e("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=u=>o(b).gender=u),required:""},s[26]||(s[26]=[e("option",{value:"",disabled:""},"Select gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[ee,o(b).gender]])]),e("div",Ee,[s[29]||(s[29]=e("label",{class:"form-label"},"status",-1)),w(e("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=u=>o(b).status=u),disabled:""},s[28]||(s[28]=[e("option",{value:"active",selected:""},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[ee,o(b).status]])]),e("div",Ie,[s[31]||(s[31]=e("label",{class:"form-label"},"Purok",-1)),w(e("select",{class:"form-select","onUpdate:modelValue":s[8]||(s[8]=u=>o(b).purok=u),required:""},s[30]||(s[30]=[re('<option value="" disabled selected data-v-a7f000ad>Select Purok</option><option value="Purok 1" data-v-a7f000ad>Purok 1</option><option value="Purok 2" data-v-a7f000ad>Purok 2</option><option value="Purok 3" data-v-a7f000ad>Purok 3</option><option value="Purok 4" data-v-a7f000ad>Purok 4</option>',5)]),512),[[ee,o(b).purok]])]),e("div",Le,[s[32]||(s[32]=e("label",{class:"form-label"},"Occupation",-1)),w(e("input",{type:"text",class:"form-control",placeholder:"Farmer","onUpdate:modelValue":s[9]||(s[9]=u=>o(b).occupation=u),required:""},null,512),[[S,o(b).occupation]])]),e("div",Re,[s[33]||(s[33]=e("label",{class:"form-label"},"Contact no.",-1)),w(e("input",{type:"text",class:"form-control",placeholder:"09768734123","onUpdate:modelValue":s[10]||(s[10]=u=>o(b).contact_number=u),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[S,o(b).contact_number]]),o(b).errors.contact_number?(a(),n("div",Fe,c(o(b).errors.contact_number),1)):A("",!0)]),e("div",qe,[s[34]||(s[34]=e("label",{class:"form-label"},"Address",-1)),w(e("input",{type:"text",class:"form-control",placeholder:"Bonga, Bulan, Sorsogon","onUpdate:modelValue":s[11]||(s[11]=u=>o(b).address=u),required:"",disabled:""},null,512),[[S,o(b).address]])])]),e("div",Oe,[s[36]||(s[36]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),y.value.length===0?(a(),n("div",Pe," No beneficiary added ")):(a(),n("div",je,[e("table",He,[s[35]||(s[35]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),n(z,null,X(y.value,(u,N)=>(a(),n("tr",{key:N},[e("td",null,c(u.name),1),e("td",null,c(u.relation),1),e("td",null,c(u.age),1),e("td",null,c(d(u.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:k=>l(N)}," Delete ",8,We)])]))),128))])])]))]),e("div",ze,[p.value?A("",!0):(a(),n("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:s[12]||(s[12]=u=>p.value=!0)}," Add Beneficiary ")),s[37]||(s[37]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Submit",-1))])],32),p.value?(a(),n("div",Ge,[s[43]||(s[43]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:K(f,["prevent"]),class:"row g-2"},[e("div",Ye,[s[38]||(s[38]=e("label",null,"Name",-1)),w(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=u=>t.value.name=u),required:""},null,512),[[S,t.value.name]])]),e("div",Ke,[s[40]||(s[40]=e("label",null,"Relation",-1)),w(e("select",{name:"selectRelation",id:"selectRelation",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=u=>t.value.relation=u),required:""},s[39]||(s[39]=[re('<option value="" disabled data-v-a7f000ad>Select relation</option><option value="mother" data-v-a7f000ad>Mother</option><option value="father" data-v-a7f000ad>Father</option><option value="son" data-v-a7f000ad>Son</option><option value="daughter" data-v-a7f000ad>Daughter</option><option value="adopted" data-v-a7f000ad>Adopted</option>',6)]),512),[[ee,t.value.relation]])]),e("div",Je,[s[41]||(s[41]=e("label",null,"Age",-1)),w(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=u=>t.value.age=u),disabled:"",required:""},null,512),[[S,t.value.age]])]),e("div",Qe,[s[42]||(s[42]=e("label",{class:"form-label small"},"Birthdate",-1)),w(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[16]||(s[16]=u=>t.value.birth_date=u),max:O.value,required:""},null,8,Xe),[[S,t.value.birth_date]])]),e("div",Ze,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[17]||(s[17]=u=>p.value=!1)}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:!!_.value||!t.value.birth_date}," Save Beneficiary ",8,et)])],32)])):A("",!0)]),q.value?(a(),n("div",{key:0,class:"modal-overlay",onClick:s[20]||(s[20]=(...u)=>L.value&&L.value(...u))},[e("div",{class:"modal-box",onClick:s[19]||(s[19]=K(()=>{},["stop"]))},[s[44]||(s[44]=e("p",null,"Member created",-1)),e("button",{class:"close-btn",onClick:s[18]||(s[18]=(...u)=>L.value&&L.value(...u))},"OK")])])):A("",!0)]))}},st=J(tt,[["__scopeId","data-v-a7f000ad"]]),lt={class:"container mt-4"},ot={key:0,class:"text-center my-5"},at={key:1,class:"alert alert-danger"},nt={key:2,class:"table-responsive"},rt={class:"table table-striped table-bordered shadow-sm"},it={key:3,class:"alert alert-info"},dt={__name:"NewlyCreated",setup(T){const M=r([]),t=r(!0),y=r(null),p=async()=>{var _,i;try{const h=await le.get("/member/new");M.value=h.data.data}catch(h){y.value=((i=(_=h.response)==null?void 0:_.data)==null?void 0:i.message)||"Failed to fetch latest members."}finally{t.value=!1}},x=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return se(p),(_,i)=>(a(),n("div",lt,[t.value?(a(),n("div",ot,i[0]||(i[0]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):y.value?(a(),n("div",at,c(y.value),1)):M.value.length?(a(),n("div",nt,[e("table",rt,[i[1]||(i[1]=e("thead",{class:"table-primary"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Contact"),e("th",null,"Age"),e("th",null,"Gender"),e("th",null,"Registration Date")])],-1)),e("tbody",null,[(a(!0),n(z,null,X(M.value,h=>(a(),n("tr",{key:h.id},[e("td",null,c(h.first_name)+" "+c(h.middle_name)+" "+c(h.last_name),1),e("td",null,c(h.address),1),e("td",null,c(h.contact_number),1),e("td",null,c(h.age),1),e("td",null,c(h.gender),1),e("td",null,c(x(h.created_at)),1)]))),128))])])])):(a(),n("div",it," No newly registered members found. "))]))}},ut=J(dt,[["__scopeId","data-v-cb085a94"]]),ct={class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-2"},mt={id:"addNewMemberModal",class:"custom-modal"},vt={class:"modal-content",style:{"min-width":"60%",height:"auto"}},pt={class:"modal-header"},bt={class:"modal-body"},ft={id:"newCreatedMemberModal",class:"custom-modal",style:{"padding-top":"0"}},gt={class:"modal-content",style:{"min-width":"60%",height:"auto"}},yt={class:"modal-header alig-items-center"},_t={class:"modal-body"},ht={key:0,class:"modal-overlay"},$t={class:"modal-box"},wt={style:{"font-size":"0.9rem",color:"#555"}},kt={__name:"Header",setup(T){const M=me(),t=r(!1),y=r(3),p=_=>{document.getElementById(_).classList.add("show")},x=_=>{document.getElementById(_).classList.remove("show")};return P(()=>M.closeAddMemberModal,_=>{_&&(x("addNewMemberModal"),M.resetModal())}),window.addEventListener("click",_=>{document.querySelectorAll(".custom-modal").forEach(i=>{_.target===i&&i.classList.remove("show")})}),P(t,_=>{if(_){y.value=3;const i=setInterval(()=>{y.value--,y.value<=0&&(t.value=!1,clearInterval(i))},1e3)}}),(_,i)=>(a(),n("div",null,[e("div",ct,[i[8]||(i[8]=e("div",null,[e("h5",{class:"ms-3 fw-light"},[e("span",{class:"d-none d-sm-none d-lg-inline-block me-2"},"Registered"),e("span",null,"Members")])],-1)),e("div",null,[e("button",{class:"modern-btn me-3",onClick:i[0]||(i[0]=K(h=>p("addNewMemberModal"),["prevent"]))},i[6]||(i[6]=[e("i",{class:"bi bi-person-plus"},null,-1),e("span",null,"Add Member",-1)])),e("button",{class:"modern-btn secondary",onClick:i[1]||(i[1]=h=>p("newCreatedMemberModal"))},i[7]||(i[7]=[e("i",{class:"bi bi-person-lines-fill"},null,-1),e("span",null,"Newly Created",-1)]))])]),e("div",mt,[e("div",vt,[e("div",pt,[i[9]||(i[9]=e("h3",null,"Add New Member",-1)),e("button",{class:"close-btn",onClick:i[2]||(i[2]=h=>x("addNewMemberModal"))},"Ã—")]),e("div",bt,[F(st,{show:t.value,"onUpdate:show":i[3]||(i[3]=h=>t.value=h)},null,8,["show"])])])]),e("div",ft,[e("div",gt,[e("div",yt,[i[10]||(i[10]=e("div",{class:""},[e("h4",{class:"mb-3 text-dark fw-bold d-flex align-items-center"}," Newly Registered Member ")],-1)),e("button",{class:"close-btn2 fs-2",onClick:i[4]||(i[4]=h=>x("newCreatedMemberModal"))},"Ã—")]),e("div",_t,[F(ut)])])]),t.value?(a(),n("div",ht,[e("div",$t,[i[11]||(i[11]=e("p",null,"Member created successfully!",-1)),e("p",wt," Closing in "+c(y.value)+"s... ",1),e("button",{class:"close-btn",onClick:i[5]||(i[5]=h=>t.value=!1)}," OK ("+c(y.value)+") ",1)])])):A("",!0)]))}},Mt=J(kt,[["__scopeId","data-v-4e8a56c0"]]),xt={__name:"Alert",props:{status:{type:Boolean,default:!1},name:{type:String,default:""}},setup(T){const M=T,t=r(!1),y=r(null),p=r("");return P(()=>M.status,x=>{y.value=x,p.value="bounce-in",t.value=!0,setTimeout(()=>{p.value="slide-out",setTimeout(()=>{t.value=!1},500)},3e3)}),(x,_)=>(a(),n("div",null,[t.value?(a(),n("div",{key:0,class:Y(["alert alert-info",p.value]),role:"alert"},[W(c(T.name)+"'s status has been changed to ",1),e("strong",null,c(y.value?"Active":"Inactive"),1)],2)):A("",!0)]))}},Ct=J(xt,[["__scopeId","data-v-f19df27b"]]),St={key:0,class:"confirmation-container"},At={class:"confirmation-content"},Nt={class:"message-preview"},Bt={class:"preview-item"},Tt={class:"value"},Dt={class:"preview-item"},Ut={class:"value"},Vt={class:"recipients-section"},Et={class:"recipients-list"},It={key:1,class:"container mt-4"},Lt={class:"mb-3"},Rt={class:"d-flex justify-content-between align-items-center mb-3"},Ft={class:"d-flex justify-content-between align-items-center gap-3"},qt={class:"d-flex flex-row gap-2"},Ot={key:0,class:"alert alert-info",role:"alert"},Pt={class:"table-scroll-container"},jt={class:"table-responsive"},Ht={class:"table table-bordered table-hover"},Wt=["value"],zt={key:0},Gt={key:2,class:"status-container"},Yt={__name:"SendToAllSelectedComponent",props:pe({members:{type:Array,default:()=>[]},type:{type:String,default:"deathReport"},message:{type:String,default:""},deceased:{type:String},last:{type:String}},{closeCaret:{},closeCaretModifiers:{}}),emits:["update:closeCaret"],setup(T){const M=T,t=r([]),y=r(""),p=r(M.type),x=r(""),_=r(M.message||""),i=r(!1),h=r(!1),V=r(M.members||[]),b=ce(T,"closeCaret"),I=r(!1),f=r({});let l=r(!1);const d=H(()=>{if(!Array.isArray(V.value))return[];if(!y.value)return V.value;const N=y.value.toLowerCase();return V.value.filter(E=>`${E.first_name} ${E.last_name}`.toLowerCase().includes(N))});function j(){t.value=[...d.value],i.value=!0}function q(){t.value=[],i.value=!1}function L(){if(b.value=!0,t.value.length===0){x.value="Please select at least one member first.";return}I.value=!0}function O(){if(x.value="",t.value.length===0){x.value="Please select at least one member first.";return}const N=t.value.map(k=>k.id);te.post(route(`smsSelectMember.${p.value}`),{member_ids:N,message:_.value,deceased:M.deceased||0,last:M.last},{onSuccess:()=>{x.value=`${p.value} SMS sent successfully.`,t.value=[],i.value=!1,I.value=!1,l.value=!0,setTimeout(()=>{window.location.reload()},2e3)},onError:k=>{console.error(k),x.value=`Failed to send ${p.value} SMS.`}})}const C=async()=>{h.value=!0;try{const N=await le.get(route("smsNotification.members"));V.value=N.data.members||N.data}catch(N){console.error("Error fetching members:",N)}finally{h.value=!1}},s=async N=>{h.value=!0;try{const k=await le.get(route("smsNotification.deceased",N));f.value=k.data.deceased||k.data}catch(k){console.error("Error fetching deceased:",k)}finally{h.value=!1}};se(()=>{M.deceased&&s(M.deceased)}),H(()=>h.value?[]:V.value.map(N=>({id:N.id,fullName:`${N.first_name} ${N.last_name}`}))),se(()=>{(!M.members||M.members.length===0)&&C()});const u=()=>{I.value=!1,b.value=!1};return(N,k)=>(a(),n(z,null,[I.value&&!o(l)?(a(),n("div",St,[k[5]||(k[5]=e("div",{class:"confirmation-header"},[e("h4",{class:"confirmation-title"},"Review Message"),e("p",{class:"confirmation-subtitle"},"Please review before sending")],-1)),e("div",At,[e("div",Nt,[e("div",Bt,[k[2]||(k[2]=e("span",{class:"label"},"Message",-1)),e("p",Tt,c(_.value),1)]),e("div",Dt,[k[3]||(k[3]=e("span",{class:"label"},"Deceased",-1)),e("p",Ut,c(f.value.first_name||"")+" "+c(f.value.middle_name||"")+" "+c(f.value.last_name||""),1)])]),e("div",Vt,[k[4]||(k[4]=e("span",{class:"label"},"Selected Members",-1)),e("div",Et,[(a(!0),n(z,null,X(t.value,E=>(a(),n("div",{key:E.id,class:"recipient-item"},c(E.first_name)+" "+c(E.last_name),1))),128))])])]),e("div",{class:"confirmation-actions"},[e("button",{class:"btn btn-outline",onClick:u}," Cancel "),e("button",{class:"btn btn-primary",onClick:O}," Send Message ")])])):A("",!0),!I.value&&!o(l)?(a(),n("div",It,[e("div",Lt,[w(e("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=E=>y.value=E),class:"form-control",placeholder:"Search by name..."},null,512),[[S,y.value]])]),e("div",Rt,[e("div",Ft,[e("p",null,[k[6]||(k[6]=e("span",{class:"fw-bold"},"Selected:",-1)),W(" "+c(t.value.length),1)])]),e("div",qt,[i.value?(a(),n("button",{key:1,class:"btn btn-warning py-0 button-unselect",onClick:q}," Unselect All ")):(a(),n("button",{key:0,class:"btn btn-success button-select-all w-auto",onClick:j}," Select All ")),e("button",{class:"btn btn-primary py-0 button-done",onClick:L}," Done ")])]),x.value?(a(),n("div",Ot,c(x.value),1)):A("",!0),e("div",Pt,[e("div",jt,[e("table",Ht,[k[8]||(k[8]=e("thead",null,[e("tr",null,[e("th",null,"Select"),e("th",null,"Name")])],-1)),e("tbody",null,[(a(!0),n(z,null,X(d.value,E=>(a(),n("tr",{key:E.id},[e("td",null,[w(e("input",{type:"checkbox",value:E,"onUpdate:modelValue":k[1]||(k[1]=Z=>t.value=Z)},null,8,Wt),[[be,t.value]])]),e("td",null,c(E.first_name)+" "+c(E.last_name),1)]))),128)),d.value.length===0?(a(),n("tr",zt,k[7]||(k[7]=[e("td",{colspan:"3",class:"text-center"},"No members found.",-1)]))):A("",!0)])])])])])):A("",!0),o(l)?(a(),n("div",Gt,k[9]||(k[9]=[re('<div class="status-alert success" data-v-7c6cc3d8><svg class="status-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7c6cc3d8><path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7c6cc3d8></path></svg><div class="status-content" data-v-7c6cc3d8><p class="status-message" data-v-7c6cc3d8>Messages sent successfully</p><p class="status-description" data-v-7c6cc3d8>SMS notifications have been delivered to all selected members.</p></div></div>',1)]))):A("",!0)],64))}},Kt=J(Yt,[["__scopeId","data-v-7c6cc3d8"]]),ve=ue("deceased title",{state:()=>({currentText:"Add Deceased Info."}),actions:{setText(T){this.currentText=T,console.log(`Text updated in store: ${this.currentText}`)}}}),Jt={key:0,class:"d-flex align-items-center gap-2"},Qt=["disabled"],Xt=["disabled"],Zt={key:1,class:"reminder-wrapper"},es={class:"card shadow-sm pt-0 p-4 rounded-4 bg-white border-0"},ts={key:0,class:"mb-4 text-center"},ss={class:"fw-bold text-primary mb-1"},ls={class:"text-muted mb-0"},os={class:"row g-3"},as={class:"col-md-6"},ns=["min"],rs={key:0,class:"invalid-feedback d-block"},is={class:"col-md-6"},ds={key:0,class:"mt-4"},us={key:0,class:"mt-4 d-flex flex-wrap gap-3 justify-content-center"},cs={__name:"IsDeceased",props:{deceasedMember:{type:Object,default:()=>({})}},setup(T){const M=ve(),t=ie({message:"",type:"deathReport",memberId:null,lastNight:"",startOfContribution:""}),y=T,p=r({}),x=r(""),_=r(""),i=r(!1);let h=r(!0),V=r(!1),b=r(!1);const I=r(!1),f=r(""),l=H(()=>!!f.value),d=H(()=>t.lastNight&&t.startOfContribution&&!l.value);se(()=>{const D=new Date;t.startOfContribution=D.toISOString().split("T")[0]}),P(()=>y.deceasedMember,D=>{p.value=D},{immediate:!0}),P(()=>t.lastNight,D=>{if(!D){f.value="";return}const $=new Date(D),U=new Date;$.setHours(0,0,0,0),U.setHours(0,0,0,0),$<=U?f.value="The last night date cannot be set today or a past date.":f.value=""}),P([()=>t.lastNight,()=>t.startOfContribution],([D,$])=>{var U;if(D&&$&&((U=p.value)!=null&&U.first_name)&&!l.value){const m=p.value;t.message=`We regret to inform you that ${m.first_name} ${m.last_name} has passed away. Last night is on ${C(D)}, and the collection for burial assistance starts on ${C($)}.`,t.memberId=m.id}else t.message=""},{immediate:!0});function q(){if(!t.memberId){O("Missing member ID. Please select a member first.","danger");return}if(l.value){O("Please fix the validation errors before sending.","danger");return}te.post(route("smsNotification.sendReminders"),{message:t.message,type:t.type,memberId:t.memberId,lastNight:t.lastNight,startOfContribution:t.startOfContribution},{onSuccess:()=>O("SMS sent successfully."),onError:()=>O("An error occurred while sending SMS.")})}async function L(){M.setText("Select Members"),I.value=!0,h.value=!1,V.value=!0}function O(D,$){x.value=D,_.value=$,i.value=!0,setTimeout(()=>i.value=!1,4e3)}const C=D=>{const $={year:"numeric",month:"long",day:"numeric"};return new Date(D).toLocaleDateString(void 0,$)},s=r(!1),u=r(!1),N=H(()=>s.value?"bi bi-caret-left-fill":"bi bi-caret-left"),k=H(()=>u.value?"bi bi-caret-right-fill":"bi bi-caret-right"),E=()=>{M.setText("Add Deceased Info."),h.value=!0,I.value=!1,V.value=!0},Z=()=>{M.setText("Select Members"),h.value=!1,I.value=!0},ne=H(()=>{const D=new Date;return D.setDate(D.getDate()+1),D.toISOString().split("T")[0]});return(D,$)=>(a(),n(z,null,[o(V)&&!o(b)?(a(),n("div",Jt,[e("button",{class:"caret-wrapper btn btn-outline-dark py-0",onMouseenter:$[0]||($[0]=U=>s.value=!0),onMouseleave:$[1]||($[1]=U=>s.value=!1),onClick:E,disabled:o(h)},[e("i",{class:Y([N.value,"fs-4"])},null,2)],40,Qt),e("button",{class:"caret-wrapper btn btn-outline-dark py-0",onMouseenter:$[2]||($[2]=U=>u.value=!0),onMouseleave:$[3]||($[3]=U=>u.value=!1),onClick:Z,disabled:!o(h)},[e("i",{class:Y([k.value,"fs-4"])},null,2)],40,Xt)])):A("",!0),o(h)?(a(),n("div",Zt,[e("div",es,[F(ae,{name:"fade"},{default:Q(()=>[i.value?(a(),n("div",{key:0,class:Y([["alert",_.value==="success"?"alert-success":"alert-danger"],"alert-dismissible fade show mb-3"]),role:"alert"},[W(c(x.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:$[4]||($[4]=U=>i.value=!1)})],2)):A("",!0)]),_:1}),p.value.first_name?(a(),n("div",ts,[e("h4",ss,c(p.value.first_name)+" "+c(p.value.middle_name)+" "+c(p.value.last_name),1),e("p",ls,c(p.value.address),1)])):A("",!0),e("div",os,[e("div",as,[$[9]||($[9]=e("label",{class:"form-label fw-semibold text-secondary"},"Enter last night:",-1)),w(e("input",{type:"date",class:Y(["form-control",{"is-invalid":l.value}]),"onUpdate:modelValue":$[5]||($[5]=U=>o(t).lastNight=U),min:ne.value},null,10,ns),[[S,o(t).lastNight]]),l.value?(a(),n("div",rs,c(f.value),1)):A("",!0)]),e("div",is,[$[10]||($[10]=e("label",{class:"form-label fw-semibold text-secondary"},"Start of contribution:",-1)),w(e("input",{type:"date",class:"form-control","onUpdate:modelValue":$[6]||($[6]=U=>o(t).startOfContribution=U)},null,512),[[S,o(t).startOfContribution]])])]),F(ae,{name:"fade"},{default:Q(()=>[o(t).message&&!l.value?(a(),n("div",ds,[$[11]||($[11]=e("label",{class:"form-label fw-semibold text-secondary"},"Message:",-1)),w(e("textarea",{class:"form-control","onUpdate:modelValue":$[7]||($[7]=U=>o(t).message=U),rows:"4",style:{resize:"vertical","min-height":"100px"}},null,512),[[S,o(t).message]])])):A("",!0)]),_:1}),F(ae,{name:"fade"},{default:Q(()=>[d.value?(a(),n("div",us,[e("button",{class:"btn-modern",onClick:L},$[12]||($[12]=[e("i",{class:"bi bi-people-fill me-2"},null,-1),W(" Send to all selected ")])),e("button",{class:"btn-modern",onClick:q},$[13]||($[13]=[e("i",{class:"bi bi-send-fill me-2"},null,-1),W("Send to all ")]))])):A("",!0)]),_:1})])])):A("",!0),F(ae,{name:"fade"},{default:Q(()=>{var U;return[I.value?(a(),fe(Kt,{key:0,members:[],type:o(t).type,message:o(t).message,deceased:(U=p.value)==null?void 0:U.id,last:o(t).lastNight,closeCaret:o(b),"onUpdate:closeCaret":$[8]||($[8]=m=>ge(b)?b.value=m:b=m),class:"mt-4"},null,8,["type","message","deceased","last","closeCaret"])):A("",!0)]}),_:1})],64))}},ms=J(cs,[["__scopeId","data-v-96cea339"]]),vs={class:"container-fluid d-flex flex-row justify-content-center main-container"},ps={class:"container mt-5"},bs={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},fs={class:"row g-3"},gs={class:"col-12 d-md-none"},ys={class:"row g-2"},_s={class:"col-12"},hs={class:"col-12"},$s={class:"col-12"},ws={class:"col-md-4 d-none d-md-block"},ks={class:"col-md-4 d-none d-md-block"},Ms={class:"col-md-4 d-none d-md-block"},xs={class:"col-12 col-md-6"},Cs={class:"col-12 col-md-6"},Ss={class:"col-12 col-md-6"},As={class:"col-12 col-md-6"},Ns={class:"col-12 col-md-6"},Bs={class:"col-12 col-md-6"},Ts={class:"col-12 col-md-6"},Ds={key:0,class:"text-danger small mt-1"},Us={class:"col-12"},Vs={class:"mt-4"},Es={key:0,class:"text-center mt-3 text-muted"},Is={key:1,class:"table-responsive mt-2"},Ls={class:"table table-bordered table-striped align-middle"},Rs=["onClick"],Fs={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},qs={key:1,class:"card mt-4 p-3 shadow-sm"},Os={class:"col-md-6"},Ps={class:"col-md-6"},js={class:"col-md-6"},Hs={class:"col-md-6"},Ws={class:"col-12 d-flex justify-content-end gap-2 mt-3"},zs={__name:"EditMember",props:{member:{type:Object,default:()=>({})}},setup(T){const M=T,t=ie({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),y=r([]),p=r({name:"",relation:"",age:"",birth_date:""}),x=r(!1),_=r(""),i=async f=>{if(!f){console.log("No member ID provided");return}try{const l=await le.get(route("beneficiaries.fetch",{member:f}));l.data.success?(y.value=l.data.data,console.log("Beneficiaries fetched successfully:",l.data.data)):console.error("Failed to fetch beneficiaries:",l.data.message)}catch(l){console.error("Error fetching beneficiaries:",l)}};P(()=>M.member,f=>{f&&(t.first_name=f.first_name||"",t.last_name=f.last_name||"",t.address=f.address||"",t.contact_number=f.contact_number||"",t.date_of_birth=f.date_of_birth||"",t.purok=f.purok||"",t.age=f.age||"",t.middle_name=f.middle_name||"",t.status=f.status||"",t.occupation=f.occupation||"",t.gender=f.gender||"",t.beneficiaries=f.beneficiaries||[],f.id&&i(f.id))},{immediate:!0,deep:!0});const h=()=>{if(t.clearErrors(),!/^0\d{10}$/.test(t.contact_number)){t.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}t.beneficiaries=y.value,t.put(route("members.update",M.member.id),{onSuccess:()=>{_.value="Member updated successfully!",setTimeout(()=>_.value="",4e3),i(M.member.id)},onError:l=>console.error("An error occurred => ",l)})},V=()=>{const f={...p.value,member_id:M.member.id};y.value.push(f),p.value={name:"",relation:"",age:"",birth_date:""},x.value=!1},b=f=>{y.value.splice(f,1)},I=f=>{if(!f)return"";const l={year:"numeric",month:"long",day:"numeric"};return new Date(f).toLocaleDateString(void 0,l)};return(f,l)=>(a(),n("div",vs,[e("div",ps,[_.value?(a(),n("div",bs,[W(c(_.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=d=>_.value="")})])):A("",!0),e("form",{onSubmit:K(h,["prevent"]),class:"form"},[e("div",fs,[e("div",gs,[e("div",ys,[e("div",_s,[w(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":l[1]||(l[1]=d=>o(t).first_name=d),required:""},null,512),[[S,o(t).first_name]])]),e("div",hs,[w(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":l[2]||(l[2]=d=>o(t).middle_name=d)},null,512),[[S,o(t).middle_name]])]),e("div",$s,[w(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":l[3]||(l[3]=d=>o(t).last_name=d)},null,512),[[S,o(t).last_name]])])])]),e("div",ws,[w(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":l[4]||(l[4]=d=>o(t).first_name=d),required:""},null,512),[[S,o(t).first_name]])]),e("div",ks,[w(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":l[5]||(l[5]=d=>o(t).middle_name=d)},null,512),[[S,o(t).middle_name]])]),e("div",Ms,[w(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":l[6]||(l[6]=d=>o(t).last_name=d)},null,512),[[S,o(t).last_name]])]),e("div",xs,[l[21]||(l[21]=e("label",{class:"form-label"},"Birth date",-1)),w(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[7]||(l[7]=d=>o(t).date_of_birth=d)},null,512),[[S,o(t).date_of_birth]])]),e("div",Cs,[w(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":l[8]||(l[8]=d=>o(t).age=d),required:""},null,512),[[S,o(t).age]])]),e("div",Ss,[w(e("select",{class:"form-select","onUpdate:modelValue":l[9]||(l[9]=d=>o(t).gender=d),required:""},l[22]||(l[22]=[e("option",{value:"",disabled:""},"Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[ee,o(t).gender]])]),e("div",As,[w(e("select",{class:"form-select","onUpdate:modelValue":l[10]||(l[10]=d=>o(t).status=d),required:""},l[23]||(l[23]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[ee,o(t).status]])]),e("div",Ns,[w(e("input",{type:"text",class:"form-control",placeholder:"Purok","onUpdate:modelValue":l[11]||(l[11]=d=>o(t).purok=d),required:""},null,512),[[S,o(t).purok]])]),e("div",Bs,[w(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":l[12]||(l[12]=d=>o(t).occupation=d),required:""},null,512),[[S,o(t).occupation]])]),e("div",Ts,[w(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":l[13]||(l[13]=d=>o(t).contact_number=d),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[S,o(t).contact_number]]),o(t).errors.contact_number?(a(),n("div",Ds,c(o(t).errors.contact_number),1)):A("",!0)]),e("div",Us,[w(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":l[14]||(l[14]=d=>o(t).address=d),required:""},null,512),[[S,o(t).address]])])]),e("div",Vs,[l[25]||(l[25]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),y.value.length===0?(a(),n("div",Es," No beneficiary added ")):(a(),n("div",Is,[e("table",Ls,[l[24]||(l[24]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),n(z,null,X(y.value,(d,j)=>(a(),n("tr",{key:j},[e("td",null,c(d.name),1),e("td",null,c(d.relation),1),e("td",null,c(d.age),1),e("td",null,c(I(d.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:q=>b(j)}," Delete ",8,Rs)])]))),128))])])]))]),e("div",Fs,[x.value?A("",!0):(a(),n("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:l[15]||(l[15]=d=>x.value=!0)}," Add Beneficiary ")),l[26]||(l[26]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Save",-1))])],32),x.value?(a(),n("div",qs,[l[29]||(l[29]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:K(V,["prevent"]),class:"row g-2"},[e("div",Os,[w(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":l[16]||(l[16]=d=>p.value.name=d),required:""},null,512),[[S,p.value.name]])]),e("div",Ps,[w(e("input",{type:"text",placeholder:"Relation",class:"form-control","onUpdate:modelValue":l[17]||(l[17]=d=>p.value.relation=d),required:""},null,512),[[S,p.value.relation]])]),e("div",js,[w(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":l[18]||(l[18]=d=>p.value.age=d),required:""},null,512),[[S,p.value.age]])]),e("div",Hs,[l[27]||(l[27]=e("label",{class:"form-label small"},"Birthdate",-1)),w(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[19]||(l[19]=d=>p.value.birth_date=d),required:""},null,512),[[S,p.value.birth_date]])]),e("div",Ws,[e("button",{type:"button",class:"btn btn-secondary",onClick:l[20]||(l[20]=d=>x.value=!1)}," Cancel "),l[28]||(l[28]=e("button",{type:"submit",class:"btn btn-primary"},"Save Beneficiary",-1))])],32)])):A("",!0)])]))}},Gs=J(zs,[["__scopeId","data-v-881cc22e"]]),Ys={class:"main-section bg-light"},Ks={class:"container table-container"},Js={class:"search-box mb-3 position-relative"},Qs={key:0,class:"spinner-border text-primary spinner-sm position-absolute end-0 top-50 translate-middle-y me-3",role:"status"},Xs={class:"table-responsive"},Zs={class:"table table-bordered align-middle text-center"},el={key:0},tl={key:1},sl={colspan:"9",class:"text-danger text-center"},ll={class:"text-start"},ol={class:"status-cell"},al={class:"status-toggle"},nl={class:"toggle-switch"},rl=["checked","onChange"],il={class:"status-cell"},dl={class:"status-toggle"},ul={class:"toggle-switch"},cl=["data-member-id","checked","onClick"],ml={class:"actions-column"},vl={class:"action-buttons-large"},pl=["onClick"],bl=["onClick"],fl={class:"action-buttons-small"},gl=["onClick"],yl={key:2},_l={class:"pagination-wrapper mt-3 mb-5"},hl={class:"pagination-controls"},$l=["onClick","innerHTML"],wl={class:"list-unstyled m-0"},kl={class:"modal fade",id:"editMember",tabindex:"-1"},Ml={class:"modal-dialog modal-lg"},xl={class:"modal-content"},Cl={class:"modal-body"},Sl={class:"custom-modal"},Al={class:"custom-modal-header"},Nl={class:"custom-modal-body"},Bl={key:2,class:"custom-loading-modal"},Tl={class:"loading-content"},Dl={class:"mt-2"},Ul=400,Vl={__name:"RegisteredMember",props:{members:{type:Object,default:()=>({data:[],links:[],prev_page_url:null,next_page_url:null})},deceasedMember:{type:Array,default:()=>[]}},setup(T){const M=ve(),t=T,y=r([]),p=r(!1),x=r({top:"0px",left:"0px"}),_=r(null),i=r(!1),h=r(""),V=r(""),b=r([]),I=r({}),f=r(!1),l=r({}),d=r(!1),j=r(""),q=r(null);r(!1),r([]);const L=r(!1),O=r("");r([]),P(()=>t.members,m=>{y.value=m.data||[]},{immediate:!0}),P(()=>t.deceasedMember,m=>{b.value=m.data||[]},{immediate:!0});let C=null;P(V,m=>{C&&clearTimeout(C),C=setTimeout(()=>s(String(m||"").trim()),Ul)});async function s(m){if(!m){y.value=t.members.data,console.log("Search cleared â€” showing default members:",y.value),d.value=!1;return}d.value=!0,j.value="",console.log(`ðŸ” Searching for: "${m}"`);try{const v=await le.get(route("members.search"),{params:{query:m}});console.log(" Raw Axios response:",v),console.log(" Response data:",v.data);let g=[];const B=(v==null?void 0:v.data)||{};if(Array.isArray(B.members))g=B.members;else if(B.members&&Array.isArray(B.members.data))g=B.members.data;else if(B.member&&typeof B.member=="object")g=[B.member];else if(Array.isArray(B.data))g=B.data;else{const R=Object.values(B).find(oe=>{var G;return Array.isArray(oe)&&((G=oe[0])==null?void 0:G.id)});R&&(g=R)}console.log("ðŸ§¾ Normalized members array to display:",g),y.value=g}catch{}finally{d.value=!1}}const u=m=>{confirm("Are you sure you want to trash this member?")&&te.delete(route("deleteMember",{id:m}),{onSuccess:()=>{alert("Member trashed"),p.value=!1}})},N=async m=>{const v=m.status==="active"?"inactive":"active";O.value=`${m.first_name} ${m.middle_name} ${m.last_name}`,L.value=!0;try{te.put(route("toggleMemberStatus",{id:m.id}),{status:v},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const g=y.value.map(B=>B.id===m.id?{...B,status:v}:B);y.value=g,i.value=v==="active",h.value=O.value},onError:g=>{console.error("Failed to toggle status:",g)},onFinish:()=>{setTimeout(()=>{L.value=!1},1500)}})}catch(g){console.error("Failed to toggle status:",g),setTimeout(()=>{L.value=!1},1500)}},k=(m,v)=>{if(p.value&&_.value===v){p.value=!1,_.value=null;return}_.value=v,p.value=!0,$e(()=>{const g=m.currentTarget.getBoundingClientRect(),B=document.querySelector(".actions-popup");if(!B)return;const R=B.offsetWidth,oe=window.innerWidth;let G=g.right+window.scrollX+10;G+R>oe&&(G=g.left+window.scrollX-R-10,G<0&&(G=10)),x.value={top:`${g.top+window.scrollY}px`,left:`${G}px`}})},E=m=>{p.value&&m.target&&!m.target.closest(".actions-popup")&&!m.target.closest(".three-dots-button")&&(p.value=!1,_.value=null)};se(()=>document.addEventListener("click",E)),ye(()=>document.removeEventListener("click",E));const Z=m=>{m&&te.visit(m,{preserveState:!0})},ne=m=>{I.value=m||null,f.value=!0,q.value=(m==null?void 0:m.id)||null},D=()=>{if(f.value=!1,q.value){const m=document.querySelector(`input[type="checkbox"][data-member-id="${q.value}"]`);m&&(m.checked=!1),q.value=null}M.setText("Add Deceased Info.")},$=m=>{p.value=!1,l.value={...m}};document.getElementById("memberModalOverlay"),document.getElementById("memberModal"),document.getElementById("createBtn"),document.getElementById("closeBtn");const U=H(()=>{var m;return y.value.length<=5?[{label:"1",url:((m=t.members.links[0])==null?void 0:m.url)||null,active:!0}]:t.members.links});return(m,v)=>(a(),n(z,null,[F(o(_e),{title:"Registered members"}),F(we,null,{default:Q(()=>[e("div",Ys,[F(Mt),F(Ct,{status:i.value,name:h.value},null,8,["status","name"]),e("div",Ks,[e("div",Js,[w(e("input",{type:"text",class:"form-control search-input",placeholder:"Search members by name, contact, or purok...","onUpdate:modelValue":v[0]||(v[0]=g=>V.value=g)},null,512),[[S,V.value]]),d.value?(a(),n("div",Qs,v[3]||(v[3]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):A("",!0)]),e("div",Xs,[e("table",Zs,[v[12]||(v[12]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"NAME"),e("th",null,"GENDER"),e("th",null,"AGE"),e("th",null,"CONTACT NO."),e("th",null,"STREET"),e("th",null,"STATUS"),e("th",null,"DECEASED"),e("th",null,"ACTION")])],-1)),e("tbody",null,[d.value?(a(),n("tr",el,v[4]||(v[4]=[e("td",{colspan:"9",class:"text-center"},[e("div",{class:"spinner-border text-info",role:"status"}),e("p",{class:"mt-2 text-muted"},"Searching...")],-1)]))):A("",!0),j.value&&!d.value?(a(),n("tr",tl,[e("td",sl,c(j.value),1)])):A("",!0),(a(!0),n(z,null,X(y.value,(g,B)=>(a(),n("tr",{key:B},[e("td",ll,c(g.first_name)+" "+c(g.middle_name)+" "+c(g.last_name),1),e("td",null,c(g.gender||"N/A"),1),e("td",null,c(g.age),1),e("td",null,c(g.contact_number),1),e("td",null,c(g.purok),1),e("td",ol,[e("div",al,[e("label",nl,[e("input",{type:"checkbox",checked:g.status==="active",onChange:R=>N(g)},null,40,rl),v[5]||(v[5]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:Y(["status-label",g.status==="active"?"active":"inactive"])},c(g.status==="active"?"Active":"Inactive"),3)])]),e("td",il,[e("div",dl,[e("label",ul,[e("input",{type:"checkbox","data-member-id":g.id,checked:b.value.some(R=>R.member_id===g.id),onClick:R=>ne(g)},null,8,cl),v[6]||(v[6]=e("span",{class:"toggle-slider"},null,-1))])])]),e("td",ml,[e("div",vl,[F(o(de),{href:m.route("viewMemberInfo",{id:g.id}),class:"me-1"},{default:Q(()=>v[7]||(v[7]=[e("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"]),e("button",{"data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:R=>$(g),class:"me-1"},v[8]||(v[8]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,pl),e("button",{onClick:R=>u(g.id)},v[9]||(v[9]=[e("i",{class:"bi bi-trash"},null,-1)]),8,bl)]),e("div",fl,[e("button",{class:"btn btn-sm btn-outline-dark three-dots-button",onClick:K(R=>k(R,g.id),["stop"])},v[10]||(v[10]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)]),8,gl)])])]))),128)),!d.value&&y.value.length===0?(a(),n("tr",yl,v[11]||(v[11]=[e("td",{colspan:"9",class:"text-center text-muted"},"No members found",-1)]))):A("",!0)])])]),e("div",_l,[e("div",hl,[(a(!0),n(z,null,X(U.value,(g,B)=>(a(),n("button",{key:B,class:Y(["btn pagination-btn",g.active?"btn-primary":"btn-outline-primary"]),onClick:R=>Z(g.url),innerHTML:g.label},null,10,$l))),128))])])])]),p.value?(a(),n("div",{key:0,class:"actions-popup bg-white border rounded shadow-sm p-2",style:he({top:x.value.top,left:x.value.left})},[e("ul",wl,[e("li",null,[F(o(de),{href:m.route("viewMemberInfo",{id:_.value}),class:"dropdown-item"},{default:Q(()=>v[13]||(v[13]=[e("i",{class:"bi bi-eye me-2"},null,-1),W(" View")])),_:1},8,["href"])]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start","data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:v[1]||(v[1]=g=>$(y.value.find(B=>B.id===_.value)))},v[14]||(v[14]=[e("i",{class:"bi bi-pencil me-2"},null,-1),W(" Edit")]))]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start text-danger",onClick:v[2]||(v[2]=g=>u(_.value))},v[15]||(v[15]=[e("i",{class:"bi bi-trash me-2"},null,-1),W(" Delete")]))])])],4)):A("",!0),e("div",kl,[e("div",Ml,[e("div",xl,[v[16]||(v[16]=e("div",{class:"modal-header"},[e("h5",null,"Edit Member Info"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",Cl,[F(Gs,{member:l.value},null,8,["member"])])])])]),f.value?(a(),n("div",{key:1,class:"custom-modal-overlay",onClick:K(D,["self"])},[e("div",Sl,[e("div",Al,[e("h3",null,c(o(M).currentText||""),1),e("span",{class:"close-icon",onClick:D},"Ã—")]),e("div",Nl,[F(ms,{deceasedMember:I.value},null,8,["deceasedMember"])])])])):A("",!0),L.value?(a(),n("div",Bl,[e("div",Tl,[v[17]||(v[17]=e("div",{class:"spinner-border text-primary",role:"status"},null,-1)),e("p",Dl,"Updating status for "+c(O.value)+"...",1)])])):A("",!0)]),_:1})],64))}},Fl=J(Vl,[["__scopeId","data-v-24941e2b"]]);export{Fl as default};
