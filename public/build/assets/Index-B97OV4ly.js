import{K as M,C as $,f,o as u,b as e,i as b,h as k,I as V,F as O,G as T,t as N,D as c,r as d,s as w,x as A,j as I,a as R,w as j,u as r,g as E,c as F}from"./app-D992eeml.js";import{A as B}from"./AdminLayout-ZvRHMoB5.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const H={class:"container d-flex flex-column gap-2 justify-content-center ps-0 mb-3"},P={class:"d-flex align-items-center gap-2"},q=["value"],G={class:"d-flex align-items-center gap-2"},K={class:"d-flex align-items-center gap-2"},W={__name:"DeathReportInput",props:M({members:Array},{dead:{},deadModifiers:{},lastNight:{},lastNightModifiers:{},startOfContribution:{},startOfContributionModifiers:{}}),emits:["update:dead","update:lastNight","update:startOfContribution"],setup(p){const v=p,C=$(p,"dead"),g=$(p,"lastNight"),y=$(p,"startOfContribution");return(i,o)=>(u(),f("div",null,[e("div",H,[e("div",P,[o[3]||(o[3]=e("label",null,"Name of dead: ",-1)),v.members.length>0?b((u(),f("select",{key:0,class:"form-control","onUpdate:modelValue":o[0]||(o[0]=l=>C.value=l)},[(u(!0),f(O,null,T(v.members,l=>(u(),f("option",{value:l,key:l.id},N(l.first_name)+" "+N(l.last_name),9,q))),128))],512)),[[V,C.value]]):k("",!0)]),e("div",G,[o[4]||(o[4]=e("label",null,"Enter last night: ",-1)),b(e("input",{type:"date",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=l=>g.value=l)},null,512),[[c,g.value]])]),e("div",K,[o[5]||(o[5]=e("label",null,"Start of contribution: ",-1)),b(e("input",{type:"date",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=l=>y.value=l)},null,512),[[c,y.value]])])]),o[6]||(o[6]=e("hr",null,null,-1))]))}},z={class:"container"},J={class:"scroll-content"},Q={class:"mb-4 position-relative"},X={class:"container-fluid d-flex flex-row justify-content-between align-items-center"},Y={class:"mb-4 position-relative"},Z={class:"container-fluid d-flex flex-row justify-content-between align-items-center"},_={class:"mb-4 position-relative"},tt={class:"container-fluid d-flex flex-row justify-content-between align-items-center"},et={class:"mb-4 position-relative"},st={class:"container-fluid d-flex flex-row justify-content-between align-items-center"},ot={class:"modal fade",id:"suggestionModal",tabindex:"-1","aria-hidden":"true"},nt={class:"modal-dialog"},lt={class:"modal-content"},at={class:"modal-header"},it={class:"modal-title fs-5"},rt={class:"modal-body"},dt={key:2,class:"text-dark rounded py-1 px-2",title:"Text copied"},ut={__name:"Index",props:{deathReport:Object,disbursed:String,members:Array},setup(p){const v=p,C=d([]),g=d(""),y=d([]),i=d(""),o=d(""),l=d(""),x=d(!1);w(()=>v.deathReport,n=>{C.value=n},{immediate:!0}),w(()=>v.disbursed,n=>{g.value=n},{immediate:!0}),w(()=>v.members,n=>{y.value=n},{immediate:!0});const a=A({deathReport:"",scheduleContribution:"",reminders:"",fundUpdates:"",type:"",deceasedName:"",dateOfDeath:"",memberId:null,lastNight:null}),m=d(""),U=I(()=>{var n,t;return m.value==="Death Report Suggestion"?`We regret to inform you that ${((n=i.value)==null?void 0:n.first_name)||"[Name of Dead]"} ${((t=i.value)==null?void 0:t.last_name)||""} has passed away. Last night will be held on ${o.value||"[Date]"}. Collection for burial assistance starts on ${l.value||"[Date]"}.'`:m.value==="Schedule Contribution Suggestion"?"Hello [Name], thank you for paying your contribution. This message confirms your payment for the upcoming schedule.":m.value==="Reminder Suggestion"?"Hello, our records show you still have an unpaid balance for the contribution (Damayan). Please settle it at your earliest convenience. Thank you.":m.value==="Fund Update Suggestion"?`Total money disbursed so far is â‚±${g.value}. Thank you for your continuous support.`:""});function S(n){m.value=n==="deathReport"?"Death Report Suggestion":n==="scheduleContribution"?"Schedule Contribution Suggestion":n==="reminders"?"Reminder Suggestion":n==="fundUpdates"?"Fund Update Suggestion":"",x.value=!1}function h(n){a.type=n,a.deceasedName=i.value?`${i.value.first_name} ${i.value.last_name}`:"",a.dateOfDeath=l.value||"",a.memberId=i.value?i.value.id:null,a.lastNight=o.value||null,a.post(route("smsNotificationSaved.send"),{preserveScroll:!0,onSuccess:()=>alert("Notification saved."),onError:()=>alert("An error occurred, please try again.")})}async function D(n){try{await navigator.clipboard.writeText(n),x.value=!0,setTimeout(()=>{x.value=!1},4e3)}catch(t){console.error("Failed to copy text: ",t),alert("Failed to copy text. Please try again or copy manually.")}}return(n,t)=>(u(),f("div",null,[R(B,null,{default:j(()=>[R(r(E),{title:"Sms notification"}),e("div",z,[t[21]||(t[21]=e("h4",{class:"mb-4 fw-bold sticky-header text-start ps-2 pt-3"},"SMS Notification",-1)),e("div",J,[e("div",Q,[e("div",X,[t[16]||(t[16]=e("label",{class:"form-label"},"Death Report",-1)),e("i",{class:"bi bi-info-circle","data-bs-toggle":"modal","data-bs-target":"#suggestionModal",onClick:t[0]||(t[0]=s=>S("deathReport"))})]),b(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>r(a).deathReport=s),class:"form-control"},null,512),[[c,r(a).deathReport]]),e("button",{class:"save-btn",onClick:t[2]||(t[2]=s=>h("deathReport"))},"SAVE")]),e("div",Y,[e("div",Z,[t[17]||(t[17]=e("label",{class:"form-label"},"Schedule Contribution",-1)),e("i",{class:"bi bi-info-circle","data-bs-toggle":"modal","data-bs-target":"#suggestionModal",onClick:t[3]||(t[3]=s=>S("scheduleContribution"))})]),b(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>r(a).scheduleContribution=s),class:"form-control"},null,512),[[c,r(a).scheduleContribution]]),e("button",{class:"save-btn",onClick:t[5]||(t[5]=s=>h("scheduleContribution"))},"SAVE")]),e("div",_,[e("div",tt,[t[18]||(t[18]=e("label",{class:"form-label"},"Reminders",-1)),e("i",{class:"bi bi-info-circle","data-bs-toggle":"modal","data-bs-target":"#suggestionModal",onClick:t[6]||(t[6]=s=>S("reminders"))})]),b(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=s=>r(a).reminders=s),class:"form-control"},null,512),[[c,r(a).reminders]]),e("button",{class:"save-btn",onClick:t[8]||(t[8]=s=>h("reminders"))},"SAVE")]),e("div",et,[e("div",st,[t[19]||(t[19]=e("label",{class:"form-label"},"Fund Updates",-1)),e("i",{class:"bi bi-info-circle","data-bs-toggle":"modal","data-bs-target":"#suggestionModal",onClick:t[9]||(t[9]=s=>S("fundUpdates"))})]),b(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>r(a).fundUpdates=s),class:"form-control"},null,512),[[c,r(a).fundUpdates]]),e("button",{class:"save-btn",onClick:t[11]||(t[11]=s=>h("fundUpdates"))},"SAVE")]),t[20]||(t[20]=e("div",{class:"container extra-space w-100"},null,-1))])]),e("div",ot,[e("div",nt,[e("div",lt,[e("div",at,[e("h1",it,N(m.value),1),t[22]||(t[22]=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"},null,-1))]),e("div",rt,[m.value==="Death Report Suggestion"?(u(),F(W,{key:0,members:y.value,dead:i.value,"onUpdate:dead":t[12]||(t[12]=s=>i.value=s),startOfContribution:l.value,"onUpdate:startOfContribution":t[13]||(t[13]=s=>l.value=s),lastNight:o.value,"onUpdate:lastNight":t[14]||(t[14]=s=>o.value=s)},null,8,["members","dead","startOfContribution","lastNight"])):k("",!0),e("p",null,N(U.value),1),x.value?k("",!0):(u(),f("span",{key:1,class:"text-dark rounded copy",onClick:t[15]||(t[15]=s=>D(U.value)),title:"Copy text"},t[23]||(t[23]=[e("i",{class:"bi bi-copy"},null,-1)]))),x.value?(u(),f("span",dt,t[24]||(t[24]=[e("i",{class:"bi bi-check-square"},null,-1)]))):k("",!0)]),t[25]||(t[25]=e("div",{class:"modal-footer d-flex justify-content-between align-items-center"},[e("p",{class:"text-muted mt-3"},"Copy it and paste to the input field"),e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])]),_:1})]))}},vt=L(ut,[["__scopeId","data-v-0b694f1c"]]);export{vt as default};
