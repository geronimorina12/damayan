import{A as U}from"./AdminLayout-BfAzXtKV.js";import{l as r,q as k,f as u,o as d,b as t,F as g,E as A,e as N,t as i,x as P,m as C,C as $,u as n,n as y,H as L,h as R,d as F,j as O,i as I,I as V,a as x,g as H,w as z,c as B}from"./app-lJPr0_lx.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as j}from"./html2pdf-DZ1RazyZ.js";import"./logo1-BZ0h4foK.js";const Y={key:0,class:"mb-4"},q={class:"container"},K={class:"table table-responsive table-bordered table-striped"},G={key:1,class:"container text-muted text-center"},Z={__name:"ContributionReportForAdmin",props:{contributions:{type:Array,default:()=>[]}},setup(_){const v=_,o=r([]),f=r([]),m=r([]),c=r([]),b=r([]);return k(()=>v.contributions,s=>{o.value=s,f.value=o.value.filter(l=>l.purok=="purok1"),m.value=o.value.filter(l=>l.purok=="purok2"),c.value=o.value.filter(l=>l.purok=="purok3"),b.value=o.value.filter(l=>l.purok=="purok4")},{immediate:!0}),(s,l)=>(d(),u("div",null,[o.value.length>0?(d(),u("div",Y,[t("div",q,[t("table",K,[l[1]||(l[1]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"COLLECTOR"),t("th",null,"PUROK"),t("th",null,"ASSIGNED MEMBERS"),t("th",null,"PAID"),t("th",null,"UNPAID")])],-1)),t("tbody",null,[(d(!0),u(g,null,A(_.contributions,(h,w)=>(d(),u("tr",{key:w},[t("td",null,[l[0]||(l[0]=t("i",{class:"bi bi-person me-2"},null,-1)),N(i(h.collector),1)]),t("td",null,i(h.purok),1),t("td",null,i(h.members),1),t("td",null,i(h.paid),1),t("td",null,i(h.not_paid),1)]))),128))])]),l[2]||(l[2]=t("div",{class:"container w-50 h-50"},null,-1))])])):(d(),u("div",G,l[3]||(l[3]=[t("p",null,"No contribution data.",-1)])))]))}},J=M(Z,[["__scopeId","data-v-4f953dde"]]),Q={key:0,class:"container"},W={class:"table table-bordered table-striped"},X={key:1,class:"container text-muted text-center"},tt={__name:"RecentContributionForAdmin",props:{recent:{type:Array,default:()=>[]}},setup(_){const v=_,o=r([]);k(()=>v.recent,m=>{o.value=m},{immediate:!0});const f=m=>{const c={year:"numeric",month:"long",day:"numeric"};return new Date(m).toLocaleDateString(void 0,c)};return(m,c)=>(d(),u("div",null,[o.value.length>0?(d(),u("div",Q,[t("table",W,[c[0]||(c[0]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"DATE"),t("th",null,"AMOUNT"),t("th",null,"MEMBERS"),t("th",null,"COLLECTOR"),t("th",null,"PUROK")])],-1)),t("tbody",null,[(d(!0),u(g,null,A(_.recent,(b,s)=>(d(),u("tr",{key:s},[t("td",null,i(f(b.date)),1),t("td",null,i(b.total_amount),1),t("td",null,i(b.members),1),t("td",null,i(b.collector),1),t("td",null,i(b.purok),1)]))),128))])])])):(d(),u("div",X,c[1]||(c[1]=[t("p",null,"No recent contribution data.",-1)])))]))}},et=M(tt,[["__scopeId","data-v-8e37cdba"]]),ot={class:"container"},st={class:"mb-3"},lt={class:"invalid-feedback"},nt={class:"mb-3"},at={class:"invalid-feedback"},rt={class:"mb-3"},it={class:"invalid-feedback"},dt={class:"mb-3"},ut={class:"mb-3"},ct=["value"],mt={class:"invalid-feedback"},pt=["disabled"],bt={key:0,class:"spinner-border spinner-border-sm me-1"},vt={__name:"AddCollector",emits:["submitted"],setup(_,{emit:v}){const o=P({name:"",email:"",password:"",role:"collector",purok:"1"}),f=v,m=["1","2","3","4"],c=()=>{o.post(route("reports.storeCollector"),{onSuccess:()=>{o.reset(),f("submitted"),alert("Collector added successfully!")},onError:b=>console.log(b)})};return(b,s)=>(d(),u("div",ot,[t("form",{onSubmit:F(c,["prevent"]),class:"bg-white rounded"},[t("div",st,[s[5]||(s[5]=t("label",{for:"name",class:"form-label"},"Name",-1)),C(t("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=l=>n(o).name=l),class:y(["form-control",{"is-invalid":n(o).errors.name}])},null,2),[[$,n(o).name]]),t("div",lt,i(n(o).errors.name),1)]),t("div",nt,[s[6]||(s[6]=t("label",{for:"email",class:"form-label"},"Email",-1)),C(t("input",{type:"email",id:"email","onUpdate:modelValue":s[1]||(s[1]=l=>n(o).email=l),class:y(["form-control",{"is-invalid":n(o).errors.email}])},null,2),[[$,n(o).email]]),t("div",at,i(n(o).errors.email),1)]),t("div",rt,[s[7]||(s[7]=t("label",{for:"password",class:"form-label"},"Password",-1)),C(t("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=l=>n(o).password=l),class:y(["form-control",{"is-invalid":n(o).errors.password}])},null,2),[[$,n(o).password]]),t("div",it,i(n(o).errors.password),1)]),t("div",dt,[s[8]||(s[8]=t("label",{for:"role",class:"form-label"},"Role",-1)),C(t("input",{type:"text",id:"role","onUpdate:modelValue":s[3]||(s[3]=l=>n(o).role=l),class:"form-control",readonly:""},null,512),[[$,n(o).role]])]),t("div",ut,[s[10]||(s[10]=t("label",{for:"purok",class:"form-label"},"Purok",-1)),C(t("select",{id:"purok","onUpdate:modelValue":s[4]||(s[4]=l=>n(o).purok=l),class:y(["form-select",{"is-invalid":n(o).errors.purok}])},[s[9]||(s[9]=t("option",{disabled:"",value:""},"Select Purok",-1)),(d(),u(g,null,A(m,l=>t("option",{key:l,value:l},i(l),9,ct)),64))],2),[[L,n(o).purok]]),t("div",mt,i(n(o).errors.purok),1)]),t("button",{type:"submit",class:"btn btn-primary",disabled:n(o).processing},[n(o).processing?(d(),u("span",bt)):R("",!0),s[11]||(s[11]=N(" Submit "))],8,pt)],32)]))}},ft=M(vt,[["__scopeId","data-v-ff4066de"]]),_t={key:0,class:"select-wrapper"},ht={class:"select-box"},Ct=["value"],kt={key:1},yt={class:"header"},gt={class:"deceased-name"},wt={class:"table-container"},At={class:"members-table"},Rt={class:"total-amount"},Mt={__name:"View",setup(_){const v=r([]),o=r(null);r(null);const f=r(""),m=r(!1),c=r([]),b=r(null),s=async a=>{try{const e=await V.get(`/reports/contributions/${a}`);c.value=e.data.contributions}catch(e){console.error("Error fetching contributions:",e)}};O(async()=>{try{const a=await V.get("/reports/deceased");v.value=a.data.deceased}catch(a){console.error("An error occurred while fetching deceased:",a)}});const h=()=>{s(o.value);const a=v.value.find(e=>e.member_id==o.value);f.value=(a==null?void 0:a.deceased_name)||"",m.value=!0},w=I(()=>c.value.reduce((a,e)=>a+parseFloat(e.amount||0),0)),D=()=>{const a=b.value,e={filename:`${f.value}_Report.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}};j().from(a).set(e).save()};return(a,e)=>(d(),u(g,null,[m.value?R("",!0):(d(),u("div",_t,[e[2]||(e[2]=t("label",{class:"select-label"},"Select Deceased Member:",-1)),t("div",ht,[C(t("select",{"onUpdate:modelValue":e[0]||(e[0]=p=>o.value=p),onChange:h},[e[1]||(e[1]=t("option",{disabled:"",value:""},"Select...",-1)),(d(!0),u(g,null,A(v.value,p=>(d(),u("option",{key:p.member_id,value:p.member_id},i(p.deceased_name),9,Ct))),128))],544),[[L,o.value]])])])),m.value?(d(),u("div",kt,[t("button",{onClick:D,class:"download-btn",title:"Download PDF"},e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:`M12 3a1 1 0 011 1v9.586l3.293-3.293a1 1 0 011.414 1.414l-5 
            5a1 1 0 01-1.414 0l-5-5a1 1 0 
            011.414-1.414L11 13.586V4a1 1 0 011-1zm-7 
            14a1 1 0 100 2h14a1 1 0 100-2H5z`})],-1)])),t("div",{ref_key:"pdfContent",ref:b,class:"document-container"},[t("div",yt,[e[4]||(e[4]=t("div",{class:"organization-name"},"BULAN P.R.O.T.E.C DAMAYAN FERERATION",-1)),e[5]||(e[5]=t("div",{class:"organization-subtitle"},"(People's Responsible Organization Transforming Community)",-1)),e[6]||(e[6]=t("div",{class:"chapter-info"},"Affiliated Bulan, Sorsogon Chapter Brgy. ______ C.Y 2021",-1)),e[7]||(e[7]=t("div",{class:"established"},"Since 2016",-1)),t("div",gt," Deceased Name: "+i(f.value),1)]),t("div",wt,[e[9]||(e[9]=t("div",{class:"mb-3"},[t("strong",null,"MEMBERS")],-1)),t("table",At,[e[8]||(e[8]=t("thead",null,[t("tr",null,[t("th",null,"No."),t("th",null,"NAME"),t("th",null,"STATUS"),t("th",null,"AMOUNT")])],-1)),t("tbody",null,[(d(!0),u(g,null,A(c.value,(p,E)=>{var S,T;return d(),u("tr",{key:E},[t("td",null,i(E+1),1),t("td",null,i(((S=p==null?void 0:p.member_contribution)==null?void 0:S.first_name)||"member")+" "+i(((T=p==null?void 0:p.member_contribution)==null?void 0:T.last_name)||""),1),t("td",null,i(p.status),1),t("td",null,i(Math.floor(p.amount)||"0"),1)])}),128))])]),t("div",Rt," TOTAL AMOUNT: â‚±"+i(w.value.toLocaleString()),1)]),e[10]||(e[10]=t("div",{class:"signature"},[t("div",null,"Noted By:"),t("div",{class:"president-name"},"Melva Canale Delariarte"),t("div",null,"DAMAYAN PRESIDENT")],-1))],512)])):R("",!0)],64))}},$t=M(Mt,[["__scopeId","data-v-1b8c6a11"]]),xt={class:"modern-report-container"},Dt={class:"tab-navigation"},Nt={class:"content-area"},Et={class:"modal fade",id:"viewReportModal",tabindex:"-1","aria-labelledby":"viewReportModalLabel","aria-hidden":"true"},St={class:"modal-dialog modern-modal-dialog"},Tt={class:"modal-content modern-modal-content"},Vt={class:"modal-body"},Bt={class:"modal fade",id:"addCollectorModal",tabindex:"-1","aria-labelledby":"addCollectorModalLabel","aria-hidden":"true"},Lt={class:"modal-dialog",style:{"max-width":"700px"}},Ot={class:"modal-content"},Ut={class:"modal-body"},Pt={__name:"ReportHome",props:{contributions:{type:Array,default:()=>[]},memberContributions:{type:Array,default:()=>[]},deathReports:{type:Array,default:()=>[]},president:{type:Object,default:()=>({})}},setup(_){const v=_;let o=r([]),f=r(!0),m=r(!1),c=r([]),b=r([]);r(!1),r(null);let s=r(0);r(null);const l=r("");k(()=>v.contributions,a=>{o.value=a},{immediate:!0}),k(()=>v.memberContributions,a=>{c.value=a.filter(e=>e.member_contribution!==null),console.log("member contributions:",c.value),s.value=c.value.reduce((e,p)=>e+Number(p.amount||0),0)},{immediate:!0}),k(()=>v.deathReports,a=>{b.value=a},{immediate:!0}),k(()=>v.president,a=>{l.value=a==null?void 0:a.name},{immediate:!0});const h=()=>{m.value=!0,f.value=!1},w=()=>{m.value=!1,f.value=!0};O(()=>{document.getElementById("addCollectorModal")});const D=()=>{};return(a,e)=>(d(),u("div",null,[x(n(H),{title:"Report"}),x(U,null,{default:z(()=>[t("div",xt,[e[2]||(e[2]=t("div",{class:"modern-header"},[t("div",{class:"header-content"},[t("h5",{class:"page-title fw-light"},"Reports Dashboard")]),t("div",{class:"header-actions"},[t("button",{class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#viewReportModal"},[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 17H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M9 13H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M9 9H13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M3 5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5Z",stroke:"currentColor","stroke-width":"2"})]),N(" View Reports ")])])],-1)),t("div",Dt,[t("button",{class:y(n(m)?"tab-btn active":"tab-btn"),onClick:h}," Recent Contributions ",2),t("button",{class:y(n(f)?"tab-btn active":"tab-btn"),onClick:w}," Contributions Report ",2)]),t("div",Nt,[n(f)?(d(),B(J,{key:0,contributions:n(o)},null,8,["contributions"])):R("",!0),n(m)?(d(),B(et,{key:1,recent:n(o)},null,8,["recent"])):R("",!0)]),t("div",Et,[t("div",St,[t("div",Tt,[e[0]||(e[0]=t("div",{class:"modal-header modern-modal-header"},[t("div",{class:"header-content"}),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Vt,[x($t)])])])]),t("div",Bt,[t("div",Lt,[t("div",Ot,[e[1]||(e[1]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"addCollectorModalLabel"}," Add Collector "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",Ut,[x(ft,{onSubmitted:D})])])])]),e[3]||(e[3]=t("div",{class:"extra-space"},null,-1))])]),_:1})]))}},Yt=M(Pt,[["__scopeId","data-v-c15e68e7"]]);export{Yt as default};
