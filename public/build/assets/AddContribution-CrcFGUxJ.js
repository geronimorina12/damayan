import{r as m,s as U,x as w,f as a,o as n,a as C,u as o,g as M,w as F,b as t,d as P,i,h as p,n as c,F as v,G as N,t as d,I as b,D as g}from"./app-CusA85jy.js";import{A as B}from"./AdminLayout-Bd_DvGCJ.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const $={class:"contri-container py-1"},j={class:"row justify-content-center"},D={class:"col-md-8"},I={class:"card rounded-4"},L={class:"card-body p-4"},z={class:"mb-3"},G=["value"],T={key:0,class:"invalid-feedback"},q={class:"mb-3"},H={key:0,class:"invalid-feedback"},J={class:"mb-3"},K={key:0,class:"invalid-feedback"},O={class:"mb-3"},Q=["value"],R={key:0,class:"invalid-feedback"},W={class:"mb-3"},X={class:"mb-3"},Y={__name:"AddContribution",props:{members:{type:Array,default:()=>[]},users:{type:Array,default:()=>[]}},setup(x){const f=x;let A=m([]),y=m([]);const _=m([]),k=m([]);U([()=>f.members,()=>f.users],([u,e])=>{A.value=u||[];const l=(u||[]).map(r=>({id:r.id,fullName:`${r.first_name} ${r.middle_name??""} ${r.last_name}`.replace(/\s+/g," ").trim()})),S=(e||[]).map(r=>({id:r.id,fullName:r.name}));y.value=[...l,...S],k.value=e||[],_.value=(k.value||[]).filter(r=>r.role==="collector")},{immediate:!0});const s=w({member_id:"",amount:"",payment_date:"",collector:"",status:"",purok:""}),V=()=>{s.post(route("contributions.store"),{onSuccess:()=>alert("Contribution created!"),onError:u=>console.log("An error occured: ",u)})};return(u,e)=>(n(),a(v,null,[C(o(M),{title:"Add Contribution"}),C(B,null,{default:F(()=>[t("div",$,[t("div",j,[t("div",D,[t("div",I,[e[17]||(e[17]=t("div",{class:"card-header text-center"},[t("h4",{class:"mb-0"},"Create Contribution")],-1)),t("div",L,[t("form",{onSubmit:P(V,["prevent"])},[t("div",z,[e[7]||(e[7]=t("label",{for:"member_id",class:"form-label"},"Member Name",-1)),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>o(s).member_id=l),id:"member_id",class:c(["form-select",{"is-invalid":o(s).errors.member_id}])},[e[6]||(e[6]=t("option",{disabled:"",value:""}," -- Select Member -- ",-1)),(n(!0),a(v,null,N(o(y),l=>(n(),a("option",{key:l.id,value:l.id},d(l.fullName),9,G))),128))],2),[[b,o(s).member_id]]),o(s).errors.member_id?(n(),a("div",T,d(o(s).errors.member_id),1)):p("",!0)]),t("div",q,[e[8]||(e[8]=t("label",{for:"amount",class:"form-label"},"Amount",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>o(s).amount=l),type:"number",step:"0.01",id:"amount",class:c(["form-control",{"is-invalid":o(s).errors.amount}]),placeholder:"Enter amount"},null,2),[[g,o(s).amount]]),o(s).errors.amount?(n(),a("div",H,d(o(s).errors.amount),1)):p("",!0)]),t("div",J,[e[9]||(e[9]=t("label",{for:"payment_date",class:"form-label"},"Payment Date",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>o(s).payment_date=l),type:"datetime-local",id:"payment_date",class:c(["form-control",{"is-invalid":o(s).errors.payment_date}])},null,2),[[g,o(s).payment_date]]),o(s).errors.payment_date?(n(),a("div",K,d(o(s).errors.payment_date),1)):p("",!0)]),t("div",O,[e[11]||(e[11]=t("label",{for:"collector",class:"form-label"},"Collector",-1)),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>o(s).collector=l),id:"collector",class:c(["form-control",{"is-invalid":o(s).errors.collector}])},[e[10]||(e[10]=t("option",{disabled:"",value:""}," -- Select Collector -- ",-1)),(n(!0),a(v,null,N(_.value,l=>(n(),a("option",{key:l.id,value:l.name},d(l.name),9,Q))),128))],2),[[b,o(s).collector]]),o(s).errors.collector?(n(),a("div",R,d(o(s).errors.collector),1)):p("",!0)]),t("div",W,[e[13]||(e[13]=t("label",{for:"status",class:"form-label"},"Status",-1)),i(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>o(s).status=l),class:"form-control"},e[12]||(e[12]=[t("option",{value:"",disabled:""},"Paid or Not",-1),t("option",{value:"paid"},"Paid",-1),t("option",{value:"not_paid"},"Not",-1)]),512),[[b,o(s).status]])]),t("div",X,[e[15]||(e[15]=t("label",{for:"purok",class:"form-label"},"Purok",-1)),i(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>o(s).purok=l),class:"form-control"},e[14]||(e[14]=[t("option",{value:"purok1"},"1",-1),t("option",{value:"purok2"},"2",-1),t("option",{value:"purok3"},"3",-1),t("option",{value:"purok4"},"4",-1)]),512),[[b,o(s).purok]])]),e[16]||(e[16]=t("div",{class:"d-flex justify-content-end"},[t("button",{type:"submit",class:"btn btn-success px-4 rounded-pill"}," Submit ")],-1))],32)])])])]),e[18]||(e[18]=t("div",{class:"container-bottom"},null,-1))])]),_:1})],64))}},oe=E(Y,[["__scopeId","data-v-e2f93147"]]);export{oe as default};
