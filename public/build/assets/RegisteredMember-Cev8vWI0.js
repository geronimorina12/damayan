import{r as _,x as W,f as c,o as m,b as e,h as k,e as N,t as b,d as B,i as v,D as g,u as n,I as O,F as I,G as R,l as J,J as K,a as x,s as L,n as T,j as Q,w as U,T as j,S as P,W as F,m as te,g as se,K as le,z as oe}from"./app-ukGeU6Fu.js";import{A as ne}from"./AdminLayout-CxBBxh6C.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const ae={class:"container-fluid d-flex flex-row justify-content-center main-container"},de={class:"container mt-5"},ie={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},re={class:"row g-3"},ue={class:"col-md-6"},ce={class:"col-md-6"},me={class:"col-md-6"},pe={class:"col-md-6"},be={class:"col-md-6"},ve={class:"col-md-6"},fe={class:"col-md-6"},_e={class:"col-md-6"},ge={class:"col-md-6"},ye={class:"col-md-6"},he={key:0,class:"text-danger small mt-1"},$e={class:"col-12"},we={class:"mt-4"},ke={key:0,class:"text-center mt-3 text-muted"},xe={key:1,class:"table-responsive mt-2"},Me={class:"table table-bordered table-striped align-middle"},Ce=["onClick"],Ae={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},Ne={key:1,class:"card mt-4 p-3 shadow-sm"},Se={class:"col-md-6"},Ve={class:"col-md-6"},Ue={class:"col-md-6"},Be={class:"col-md-6"},Ee={class:"col-12 d-flex justify-content-end gap-2 mt-3"},Ie={__name:"AddNewMember",setup(C){const r=_({name:"",relation:"",age:"",birth_date:""}),o=_([]),u=_(!1),d=_(""),a=W({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),$=()=>{if(a.clearErrors(),!/^0\d{10}$/.test(a.contact_number)){a.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}a.beneficiaries=o.value,a.post(route("addMemberPost"),{onSuccess:()=>{d.value="Member added successfully!",setTimeout(()=>d.value="",4e3)},onError:l=>console.log("An error occurred => ",l)})},w=()=>{o.value.push({...r.value}),r.value={name:"",relation:"",age:"",birth_date:""},u.value=!1},h=M=>{o.value.splice(M,1)},S=M=>{const l={year:"numeric",month:"long",day:"numeric"};return new Date(M).toLocaleDateString(void 0,l)};return(M,l)=>(m(),c("div",ae,[e("div",de,[d.value?(m(),c("div",ie,[N(b(d.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=t=>d.value="")})])):k("",!0),e("form",{onSubmit:B($,["prevent"]),class:"form"},[e("div",re,[e("div",ue,[v(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":l[1]||(l[1]=t=>n(a).last_name=t)},null,512),[[g,n(a).last_name]])]),e("div",ce,[l[18]||(l[18]=e("label",{class:"form-label"},"Birth date",-1)),v(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[2]||(l[2]=t=>n(a).date_of_birth=t)},null,512),[[g,n(a).date_of_birth]])]),e("div",me,[v(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":l[3]||(l[3]=t=>n(a).first_name=t),required:""},null,512),[[g,n(a).first_name]])]),e("div",pe,[v(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":l[4]||(l[4]=t=>n(a).age=t),required:""},null,512),[[g,n(a).age]])]),e("div",be,[v(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":l[5]||(l[5]=t=>n(a).middle_name=t)},null,512),[[g,n(a).middle_name]])]),e("div",ve,[v(e("select",{class:"form-select","onUpdate:modelValue":l[6]||(l[6]=t=>n(a).gender=t),required:""},l[19]||(l[19]=[e("option",{value:"",disabled:""},"Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[O,n(a).gender]])]),e("div",fe,[v(e("select",{class:"form-select","onUpdate:modelValue":l[7]||(l[7]=t=>n(a).status=t),required:""},l[20]||(l[20]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[O,n(a).status]])]),e("div",_e,[v(e("input",{type:"number",class:"form-control",placeholder:"Purok","onUpdate:modelValue":l[8]||(l[8]=t=>n(a).purok=t),required:""},null,512),[[g,n(a).purok]])]),e("div",ge,[v(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":l[9]||(l[9]=t=>n(a).occupation=t),required:""},null,512),[[g,n(a).occupation]])]),e("div",ye,[v(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":l[10]||(l[10]=t=>n(a).contact_number=t),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[g,n(a).contact_number]]),n(a).errors.contact_number?(m(),c("div",he,b(n(a).errors.contact_number),1)):k("",!0)]),e("div",$e,[v(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":l[11]||(l[11]=t=>n(a).address=t),required:""},null,512),[[g,n(a).address]])])]),e("div",we,[l[22]||(l[22]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),o.value.length===0?(m(),c("div",ke," No beneficiary added ")):(m(),c("div",xe,[e("table",Me,[l[21]||(l[21]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(m(!0),c(I,null,R(o.value,(t,s)=>(m(),c("tr",{key:s},[e("td",null,b(t.name),1),e("td",null,b(t.relation),1),e("td",null,b(t.age),1),e("td",null,b(S(t.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:i=>h(s)}," Delete ",8,Ce)])]))),128))])])]))]),e("div",Ae,[u.value?k("",!0):(m(),c("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:l[12]||(l[12]=t=>u.value=!0)}," Add Beneficiary ")),l[23]||(l[23]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Submit",-1))])],32),u.value?(m(),c("div",Ne,[l[26]||(l[26]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:B(w,["prevent"]),class:"row g-2"},[e("div",Se,[v(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":l[13]||(l[13]=t=>r.value.name=t),required:""},null,512),[[g,r.value.name]])]),e("div",Ve,[v(e("input",{type:"text",placeholder:"Relation",class:"form-control","onUpdate:modelValue":l[14]||(l[14]=t=>r.value.relation=t),required:""},null,512),[[g,r.value.relation]])]),e("div",Ue,[v(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":l[15]||(l[15]=t=>r.value.age=t),required:""},null,512),[[g,r.value.age]])]),e("div",Be,[l[24]||(l[24]=e("label",{class:"form-label small"},"Birthdate",-1)),v(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[16]||(l[16]=t=>r.value.birth_date=t),required:""},null,512),[[g,r.value.birth_date]])]),e("div",Ee,[e("button",{type:"button",class:"btn btn-secondary",onClick:l[17]||(l[17]=t=>u.value=!1)}," Cancel "),l[25]||(l[25]=e("button",{type:"submit",class:"btn btn-primary"},"Save Beneficiary",-1))])],32)])):k("",!0)])]))}},Le=E(Ie,[["__scopeId","data-v-6f62a135"]]),qe={class:"container mt-4"},Te={key:0,class:"text-center my-5"},Re={key:1,class:"alert alert-danger"},De={key:2,class:"table-responsive"},Fe={class:"table table-striped table-bordered shadow-sm"},Oe={key:3,class:"alert alert-info"},je={__name:"NewlyCreated",setup(C){const r=_([]),o=_(!0),u=_(null),d=async()=>{var $,w;try{const h=await K.get("/member/new");r.value=h.data.data}catch(h){u.value=((w=($=h.response)==null?void 0:$.data)==null?void 0:w.message)||"Failed to fetch latest members."}finally{o.value=!1}},a=$=>new Date($).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return J(d),($,w)=>(m(),c("div",qe,[o.value?(m(),c("div",Te,w[0]||(w[0]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):u.value?(m(),c("div",Re,b(u.value),1)):r.value.length?(m(),c("div",De,[e("table",Fe,[w[1]||(w[1]=e("thead",{class:"table-primary"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Contact"),e("th",null,"Age"),e("th",null,"Gender"),e("th",null,"Registration Date")])],-1)),e("tbody",null,[(m(!0),c(I,null,R(r.value,h=>(m(),c("tr",{key:h.id},[e("td",null,b(h.first_name)+" "+b(h.middle_name)+" "+b(h.last_name),1),e("td",null,b(h.address),1),e("td",null,b(h.contact_number),1),e("td",null,b(h.age),1),e("td",null,b(h.gender),1),e("td",null,b(a(h.created_at)),1)]))),128))])])])):(m(),c("div",Oe," No newly registered members found. "))]))}},Pe=E(je,[["__scopeId","data-v-cb085a94"]]),We={class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-2"},Ge={id:"addNewMemberModal",class:"custom-modal"},He={class:"modal-content",style:{"min-width":"60%",height:"auto"}},ze={class:"modal-header"},Xe={class:"modal-body"},Je={id:"newCreatedMemberModal",class:"custom-modal",style:{"padding-top":"0"}},Ke={class:"modal-content",style:{"min-width":"60%",height:"auto"}},Qe={class:"modal-header alig-items-center"},Ye={class:"modal-body"},Ze={__name:"Header",setup(C){const r=u=>{document.getElementById(u).classList.add("show")},o=u=>{document.getElementById(u).classList.remove("show")};return window.addEventListener("click",u=>{document.querySelectorAll(".custom-modal").forEach(d=>{u.target===d&&d.classList.remove("show")})}),(u,d)=>(m(),c("div",null,[e("div",We,[d[6]||(d[6]=e("div",null,[e("h5",{class:"ms-3 fw-light"},[e("span",{class:"d-none d-sm-none d-lg-inline-block me-2"},"Registered"),e("span",null,"Members")])],-1)),e("div",null,[e("button",{class:"modern-btn me-3",onClick:d[0]||(d[0]=B(a=>r("addNewMemberModal"),["prevent"]))},d[4]||(d[4]=[e("i",{class:"bi bi-person-plus"},null,-1),e("span",null,"Add Member",-1)])),e("button",{class:"modern-btn secondary",onClick:d[1]||(d[1]=a=>r("newCreatedMemberModal"))},d[5]||(d[5]=[e("i",{class:"bi bi-person-lines-fill"},null,-1),e("span",null,"Newly Created",-1)]))])]),e("div",Ge,[e("div",He,[e("div",ze,[d[7]||(d[7]=e("h3",null,"Add New Member",-1)),e("button",{class:"close-btn",onClick:d[2]||(d[2]=a=>o("addNewMemberModal"))},"×")]),e("div",Xe,[x(Le)])])]),e("div",Je,[e("div",Ke,[e("div",Qe,[d[8]||(d[8]=e("div",{class:""},[e("h4",{class:"mb-3 text-dark fw-bold d-flex align-items-center"}," Newly Registered Member ")],-1)),e("button",{class:"close-btn2 fs-2",onClick:d[3]||(d[3]=a=>o("newCreatedMemberModal"))},"×")]),e("div",Ye,[x(Pe)])])])]))}},et=E(Ze,[["__scopeId","data-v-ff43b7b9"]]),tt={__name:"Alert",props:{status:{type:Boolean,default:!1},name:{type:String,default:""}},setup(C){const r=C,o=_(!1),u=_(null),d=_("");return L(()=>r.status,a=>{u.value=a,d.value="bounce-in",o.value=!0,setTimeout(()=>{d.value="slide-out",setTimeout(()=>{o.value=!1},500)},3e3)}),(a,$)=>(m(),c("div",null,[o.value?(m(),c("div",{key:0,class:T(["alert alert-info",d.value]),role:"alert"},[N(b(C.name)+"'s status has been changed to ",1),e("strong",null,b(u.value?"Active":"Inactive"),1)],2)):k("",!0)]))}},st=E(tt,[["__scopeId","data-v-f19df27b"]]),lt={class:"reminder-wrapper"},ot={class:"card shadow-sm p-4 rounded-4 bg-white border-0"},nt={key:0,class:"mb-4 text-center"},at={class:"fw-bold text-primary mb-1"},dt={class:"text-muted mb-0"},it={class:"row g-3"},rt={class:"col-md-6"},ut={class:"col-md-6"},ct={key:0,class:"mt-4 bg-light p-3 rounded border-start border-4 border-primary"},mt={key:0,class:"mt-4 d-flex flex-wrap gap-3 justify-content-center"},pt={__name:"IsDeceased",props:{deceasedMember:{type:Object,default:()=>({})}},setup(C){const r=W({message:"",type:"deathReport",memberId:null,lastNight:"",startOfContribution:""}),o=C,u=_({}),d=_(""),a=_(""),$=_(!1);L(()=>o.deceasedMember,l=>{u.value=l},{immediate:!0}),L([()=>r.lastNight,()=>r.startOfContribution],([l,t])=>{var s;if(l&&t&&((s=u.value)!=null&&s.first_name)){const i=u.value;r.message=`We regret to inform you that ${i.first_name} ${i.last_name} has passed away. Last night is on ${M(l)}, and the collection for burial assistance starts on ${M(t)}.`,r.memberId=i.id}else r.message=""},{immediate:!0});function w(){if(!r.memberId){h("Missing member ID. Please select a member first.","danger");return}F.post(route("smsNotification.sendReminders"),{message:r.message,type:r.type,memberId:r.memberId,lastNight:r.lastNight,startOfContribution:r.startOfContribution},{onSuccess:()=>h("SMS send successfully."),onError:()=>h("An error while sending sms.")})}function h(l,t){d.value=l,a.value=t,$.value=!0,setTimeout(()=>$.value=!1,4e3)}const S=Q(()=>r.lastNight&&r.startOfContribution),M=l=>{const t={year:"numeric",month:"long",day:"numeric"};return new Date(l).toLocaleDateString(void 0,t)};return(l,t)=>(m(),c("div",lt,[e("div",ot,[x(j,{name:"fade"},{default:U(()=>[$.value?(m(),c("div",{key:0,class:T([["alert",a.value==="success"?"alert-success":"alert-danger"],"alert-dismissible fade show mb-3"]),role:"alert"},[N(b(d.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=s=>$.value=!1),"aria-label":"Close"})],2)):k("",!0)]),_:1}),u.value.first_name?(m(),c("div",nt,[e("h4",at,b(u.value.first_name)+" "+b(u.value.middle_name)+" "+b(u.value.last_name),1),e("p",dt,b(u.value.address),1)])):k("",!0),e("div",it,[e("div",rt,[t[3]||(t[3]=e("label",{class:"form-label fw-semibold text-secondary"},"Enter last night:",-1)),v(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=s=>n(r).lastNight=s)},null,512),[[g,n(r).lastNight]])]),e("div",ut,[t[4]||(t[4]=e("label",{class:"form-label fw-semibold text-secondary"},"Start of contribution:",-1)),v(e("input",{type:"date",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=s=>n(r).startOfContribution=s)},null,512),[[g,n(r).startOfContribution]])])]),x(j,{name:"fade"},{default:U(()=>[n(r).message?(m(),c("p",ct,b(n(r).message),1)):k("",!0)]),_:1}),x(j,{name:"fade"},{default:U(()=>{var s;return[S.value?(m(),c("div",mt,[x(n(P),{href:l.route("smsNotification.sendToAllSelectedV2",{type:"deathReport",message:n(r).message,deceased:(s=u.value)==null?void 0:s.id,last:n(r).lastNight}),class:"btn-modern text-decoration-none"},{default:U(()=>t[5]||(t[5]=[e("i",{class:"bi bi-people-fill me-2"},null,-1),N("Send to all selected ")])),_:1},8,["href"]),e("button",{class:"btn-modern",onClick:w},t[6]||(t[6]=[e("i",{class:"bi bi-send-fill me-2"},null,-1),N("Send ")]))])):k("",!0)]}),_:1})])]))}},bt=E(pt,[["__scopeId","data-v-3301459a"]]),vt={class:"container-fluid d-flex flex-row justify-content-center main-container"},ft={class:"container mt-5"},_t={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},gt={class:"row g-3"},yt={class:"col-12 d-md-none"},ht={class:"row g-2"},$t={class:"col-12"},wt={class:"col-12"},kt={class:"col-12"},xt={class:"col-md-4 d-none d-md-block"},Mt={class:"col-md-4 d-none d-md-block"},Ct={class:"col-md-4 d-none d-md-block"},At={class:"col-12 col-md-6"},Nt={class:"col-12 col-md-6"},St={class:"col-12 col-md-6"},Vt={class:"col-12 col-md-6"},Ut={class:"col-12 col-md-6"},Bt={class:"col-12 col-md-6"},Et={class:"col-12 col-md-6"},It={key:0,class:"text-danger small mt-1"},Lt={class:"col-12"},qt={class:"mt-4"},Tt={key:0,class:"text-center mt-3 text-muted"},Rt={key:1,class:"table-responsive mt-2"},Dt={class:"table table-bordered table-striped align-middle"},Ft=["onClick"],Ot={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},jt={key:1,class:"card mt-4 p-3 shadow-sm"},Pt={class:"col-md-6"},Wt={class:"col-md-6"},Gt={class:"col-md-6"},Ht={class:"col-md-6"},zt={class:"col-12 d-flex justify-content-end gap-2 mt-3"},Xt={__name:"EditMember",props:{member:{type:Object,default:()=>({})}},setup(C){const r=C,o=W({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),u=_([]),d=_({name:"",relation:"",age:"",birth_date:""}),a=_(!1),$=_(""),w=async t=>{if(!t){console.log("No member ID provided");return}try{const s=await K.get(route("beneficiaries.fetch",{member:t}));s.data.success?(u.value=s.data.data,console.log("Beneficiaries fetched successfully:",s.data.data)):console.error("Failed to fetch beneficiaries:",s.data.message)}catch(s){console.error("Error fetching beneficiaries:",s)}};L(()=>r.member,t=>{t&&(o.first_name=t.first_name||"",o.last_name=t.last_name||"",o.address=t.address||"",o.contact_number=t.contact_number||"",o.date_of_birth=t.date_of_birth||"",o.purok=t.purok||"",o.age=t.age||"",o.middle_name=t.middle_name||"",o.status=t.status||"",o.occupation=t.occupation||"",o.gender=t.gender||"",o.beneficiaries=t.beneficiaries||[],t.id&&w(t.id))},{immediate:!0,deep:!0});const h=()=>{if(o.clearErrors(),!/^0\d{10}$/.test(o.contact_number)){o.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}o.beneficiaries=u.value,o.put(route("members.update",r.member.id),{onSuccess:()=>{$.value="Member updated successfully!",setTimeout(()=>$.value="",4e3),w(r.member.id)},onError:s=>console.error("An error occurred => ",s)})},S=()=>{const t={...d.value,member_id:r.member.id};u.value.push(t),d.value={name:"",relation:"",age:"",birth_date:""},a.value=!1},M=t=>{u.value.splice(t,1)},l=t=>{if(!t)return"";const s={year:"numeric",month:"long",day:"numeric"};return new Date(t).toLocaleDateString(void 0,s)};return(t,s)=>(m(),c("div",vt,[e("div",ft,[$.value?(m(),c("div",_t,[N(b($.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:s[0]||(s[0]=i=>$.value="")})])):k("",!0),e("form",{onSubmit:B(h,["prevent"]),class:"form"},[e("div",gt,[e("div",yt,[e("div",ht,[e("div",$t,[v(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":s[1]||(s[1]=i=>n(o).first_name=i),required:""},null,512),[[g,n(o).first_name]])]),e("div",wt,[v(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":s[2]||(s[2]=i=>n(o).middle_name=i)},null,512),[[g,n(o).middle_name]])]),e("div",kt,[v(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":s[3]||(s[3]=i=>n(o).last_name=i)},null,512),[[g,n(o).last_name]])])])]),e("div",xt,[v(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":s[4]||(s[4]=i=>n(o).first_name=i),required:""},null,512),[[g,n(o).first_name]])]),e("div",Mt,[v(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":s[5]||(s[5]=i=>n(o).middle_name=i)},null,512),[[g,n(o).middle_name]])]),e("div",Ct,[v(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":s[6]||(s[6]=i=>n(o).last_name=i)},null,512),[[g,n(o).last_name]])]),e("div",At,[s[21]||(s[21]=e("label",{class:"form-label"},"Birth date",-1)),v(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[7]||(s[7]=i=>n(o).date_of_birth=i)},null,512),[[g,n(o).date_of_birth]])]),e("div",Nt,[v(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":s[8]||(s[8]=i=>n(o).age=i),required:""},null,512),[[g,n(o).age]])]),e("div",St,[v(e("select",{class:"form-select","onUpdate:modelValue":s[9]||(s[9]=i=>n(o).gender=i),required:""},s[22]||(s[22]=[e("option",{value:"",disabled:""},"Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[O,n(o).gender]])]),e("div",Vt,[v(e("select",{class:"form-select","onUpdate:modelValue":s[10]||(s[10]=i=>n(o).status=i),required:""},s[23]||(s[23]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[O,n(o).status]])]),e("div",Ut,[v(e("input",{type:"text",class:"form-control",placeholder:"Purok","onUpdate:modelValue":s[11]||(s[11]=i=>n(o).purok=i),required:""},null,512),[[g,n(o).purok]])]),e("div",Bt,[v(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":s[12]||(s[12]=i=>n(o).occupation=i),required:""},null,512),[[g,n(o).occupation]])]),e("div",Et,[v(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":s[13]||(s[13]=i=>n(o).contact_number=i),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[g,n(o).contact_number]]),n(o).errors.contact_number?(m(),c("div",It,b(n(o).errors.contact_number),1)):k("",!0)]),e("div",Lt,[v(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":s[14]||(s[14]=i=>n(o).address=i),required:""},null,512),[[g,n(o).address]])])]),e("div",qt,[s[25]||(s[25]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),u.value.length===0?(m(),c("div",Tt," No beneficiary added ")):(m(),c("div",Rt,[e("table",Dt,[s[24]||(s[24]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(m(!0),c(I,null,R(u.value,(i,D)=>(m(),c("tr",{key:D},[e("td",null,b(i.name),1),e("td",null,b(i.relation),1),e("td",null,b(i.age),1),e("td",null,b(l(i.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:G=>M(D)}," Delete ",8,Ft)])]))),128))])])]))]),e("div",Ot,[a.value?k("",!0):(m(),c("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:s[15]||(s[15]=i=>a.value=!0)}," Add Beneficiary ")),s[26]||(s[26]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Save",-1))])],32),a.value?(m(),c("div",jt,[s[29]||(s[29]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:B(S,["prevent"]),class:"row g-2"},[e("div",Pt,[v(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":s[16]||(s[16]=i=>d.value.name=i),required:""},null,512),[[g,d.value.name]])]),e("div",Wt,[v(e("input",{type:"text",placeholder:"Relation",class:"form-control","onUpdate:modelValue":s[17]||(s[17]=i=>d.value.relation=i),required:""},null,512),[[g,d.value.relation]])]),e("div",Gt,[v(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":s[18]||(s[18]=i=>d.value.age=i),required:""},null,512),[[g,d.value.age]])]),e("div",Ht,[s[27]||(s[27]=e("label",{class:"form-label small"},"Birthdate",-1)),v(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[19]||(s[19]=i=>d.value.birth_date=i),required:""},null,512),[[g,d.value.birth_date]])]),e("div",zt,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[20]||(s[20]=i=>a.value=!1)}," Cancel "),s[28]||(s[28]=e("button",{type:"submit",class:"btn btn-primary"},"Save Beneficiary",-1))])],32)])):k("",!0)])]))}},Jt=E(Xt,[["__scopeId","data-v-881cc22e"]]),Kt={class:"main-section bg-light"},Qt={class:"container table-container"},Yt={class:"search-box mb-3"},Zt={class:"table-responsive"},es={class:"table table-bordered align-middle text-center"},ts={class:"text-start"},ss={class:"status-cell"},ls={class:"status-toggle"},os={class:"toggle-switch"},ns=["checked","onChange"],as={class:"status-cell"},ds={class:"status-toggle"},is={class:"toggle-switch"},rs=["checked","onClick"],us={class:"actions-column"},cs={class:"action-buttons-large"},ms=["onClick"],ps=["onClick"],bs={class:"action-buttons-small"},vs=["onClick"],fs={key:0},_s={class:"pagination-wrapper mt-3 mb-5"},gs={class:"pagination-controls"},ys=["onClick","innerHTML"],hs={class:"list-unstyled m-0"},$s={class:"modal fade",id:"editMember",tabindex:"-1"},ws={class:"modal-dialog modal-lg"},ks={class:"modal-content"},xs={class:"modal-body"},Ms={class:"custom-modal"},Cs={class:"custom-modal-body"},As={__name:"RegisteredMember",props:{members:{type:Object,default:()=>({data:[],links:[],prev_page_url:null,next_page_url:null})},deceasedMember:{type:Array,default:()=>[]}},setup(C){const r=C,o=_([]),u=_(!1),d=_({top:"0px",left:"0px"}),a=_(null);_({});const $=_(!1),w=_(""),h=_(""),S=_([]),M=_({}),l=_(!1),t=_({});_(null),_(!1),_(""),L(()=>r.members,f=>{o.value=f.data||[]},{immediate:!0}),L(()=>r.deceasedMember,f=>{S.value=f.data||[]},{immediate:!0});const s=Q(()=>h.value?o.value.filter(f=>`${f.first_name} ${f.middle_name||""} ${f.last_name}`.toLowerCase().includes(h.value.toLowerCase())||(f.contact_number||"").toLowerCase().includes(h.value.toLowerCase())||(f.purok||"").toLowerCase().includes(h.value.toLowerCase())):o.value),i=f=>{confirm("Are you sure you want to trash this member?")&&F.delete(route("deleteMember",{id:f}),{onSuccess:()=>{alert("Member trashed"),u.value=!1}})},D=f=>{const p=f.status==="active"?"inactive":"active";F.put(route("toggleMemberStatus",{id:f.id}),{status:p},{onSuccess:()=>{f.status=p,$.value=p==="active",w.value=`${f.first_name} ${f.middle_name} ${f.last_name}`}})},G=(f,p)=>{if(u.value&&a.value===p){u.value=!1,a.value=null;return}a.value=p,u.value=!0,oe(()=>{const y=f.currentTarget.getBoundingClientRect(),V=document.querySelector(".actions-popup");if(!V)return;const A=V.offsetWidth,ee=window.innerWidth;let q=y.right+window.scrollX+10;q+A>ee&&(q=y.left+window.scrollX-A-10,q<0&&(q=10)),d.value={top:`${y.top+window.scrollY}px`,left:`${q}px`}})},H=f=>{u.value&&f.target&&!f.target.closest(".actions-popup")&&!f.target.closest(".three-dots-button")&&(u.value=!1,a.value=null)};J(()=>document.addEventListener("click",H)),te(()=>document.removeEventListener("click",H));const Y=f=>{f&&F.visit(f,{preserveState:!0})},Z=f=>{M.value=f||null,l.value=!0},z=()=>{l.value=!1},X=f=>{u.value=!1,t.value={...f}};return(f,p)=>(m(),c(I,null,[x(n(se),{title:"Registered members"}),x(ne,null,{default:U(()=>[e("div",Kt,[x(et),x(st,{status:$.value,name:w.value},null,8,["status","name"]),e("div",Qt,[e("div",Yt,[v(e("input",{type:"text",class:"form-control search-input",placeholder:"Search members by name, contact, or purok...","onUpdate:modelValue":p[0]||(p[0]=y=>h.value=y)},null,512),[[g,h.value]])]),e("div",Zt,[e("table",es,[p[10]||(p[10]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"ID"),e("th",null,"NAME"),e("th",null,"GENDER"),e("th",null,"AGE"),e("th",null,"CONTACT NO."),e("th",null,"STREET"),e("th",null,"STATUS"),e("th",null,"DECEASED"),e("th",null,"ACTION")])],-1)),e("tbody",null,[(m(!0),c(I,null,R(s.value,(y,V)=>(m(),c("tr",{key:V},[e("td",null,b(y.id),1),e("td",ts,b(y.first_name)+" "+b(y.middle_name)+" "+b(y.last_name),1),e("td",null,b(y.gender||"N/A"),1),e("td",null,b(y.age),1),e("td",null,b(y.contact_number),1),e("td",null,b(y.purok),1),e("td",ss,[e("div",ls,[e("label",os,[e("input",{type:"checkbox",checked:y.status==="active",onChange:A=>D(y)},null,40,ns),p[3]||(p[3]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:T(["status-label",y.status==="active"?"active":"inactive"])},b(y.status==="active"?"Active":"Inactive"),3)])]),e("td",as,[e("div",ds,[e("label",is,[e("input",{type:"checkbox",checked:S.value.some(A=>A.member_id===y.id),onClick:A=>Z(y)},null,8,rs),p[4]||(p[4]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:T(["status-label",y.status==="active"?"active":"inactive"])},null,2)])]),e("td",us,[e("div",cs,[x(n(P),{href:f.route("viewMemberInfo",{id:y.id}),class:"me-1"},{default:U(()=>p[5]||(p[5]=[e("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"]),e("button",{"data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:A=>X(y),class:"me-1"},p[6]||(p[6]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,ms),e("button",{onClick:A=>i(y.id)},p[7]||(p[7]=[e("i",{class:"bi bi-trash"},null,-1)]),8,ps)]),e("div",bs,[e("button",{class:"btn btn-sm btn-outline-dark three-dots-button",onClick:B(A=>G(A,y.id),["stop"])},p[8]||(p[8]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)]),8,vs)])])]))),128)),s.value.length===0?(m(),c("tr",fs,p[9]||(p[9]=[e("td",{colspan:"9",class:"text-center text-muted"},"No members found",-1)]))):k("",!0)])])]),e("div",_s,[e("div",gs,[(m(!0),c(I,null,R(r.members.links,(y,V)=>(m(),c("button",{key:V,class:T(["btn pagination-btn",y.active?"btn-primary":"btn-outline-primary"]),onClick:A=>Y(y.url),innerHTML:y.label},null,10,ys))),128))])])])]),u.value?(m(),c("div",{key:0,class:"actions-popup bg-white border rounded shadow-sm p-2",style:le({top:d.value.top,left:d.value.left})},[e("ul",hs,[e("li",null,[x(n(P),{href:f.route("viewMemberInfo",{id:a.value}),class:"dropdown-item"},{default:U(()=>p[11]||(p[11]=[e("i",{class:"bi bi-eye me-2"},null,-1),N(" View")])),_:1},8,["href"])]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start","data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:p[1]||(p[1]=y=>X(o.value.find(V=>V.id===a.value)))},p[12]||(p[12]=[e("i",{class:"bi bi-pencil me-2"},null,-1),N(" Edit")]))]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start text-danger",onClick:p[2]||(p[2]=y=>i(a.value))},p[13]||(p[13]=[e("i",{class:"bi bi-trash me-2"},null,-1),N(" Delete")]))])])],4)):k("",!0),e("div",$s,[e("div",ws,[e("div",ks,[p[14]||(p[14]=e("div",{class:"modal-header"},[e("h5",null,"Edit Member Info"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",xs,[x(Jt,{member:t.value},null,8,["member"])])])])]),l.value?(m(),c("div",{key:1,class:"custom-modal-overlay",onClick:B(z,["self"])},[e("div",Ms,[e("div",{class:"custom-modal-header"},[p[15]||(p[15]=e("h3",null,"Add Deceased Info",-1)),e("span",{class:"close-icon",onClick:z},"×")]),e("div",Cs,[x(bt,{deceasedMember:M.value},null,8,["deceasedMember"])])])])):k("",!0)]),_:1})],64))}},Bs=E(As,[["__scopeId","data-v-72137dee"]]);export{Bs as default};
