import{r as n,s as A,f as u,o as m,b as t,F as $,G as w,e as R,n as F,t as i,W as k,a as C,u as x,g as L,w as N,E as U}from"./app-DWQox_iF.js";import{A as E}from"./AdminLayout-BiNiaMAT.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const S={class:"card mt-4"},P={class:"card-body"},V={class:"table-responsive"},D={class:"table table-bordered align-middle"},B={class:"btn btn-sm btn-light"},T=["onClick"],W={class:"modal fade",id:"action",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},z={class:"modal-dialog"},G={class:"modal-content"},J={class:"modal-footer"},j={class:"container-fluid"},q={class:"col"},H={__name:"RoleAndPermissionTable",props:{users:{type:Array,default:()=>[]}},setup(v){const b=v,o=n([]),r=n(0),c=n(0),f=n(0),p=n(0),h=n(0),_=n(0),a=n(0),e=n(null);A(()=>b.users,y=>{o.value=y,r.value=o.value.filter(s=>s.role==="admin").length,c.value=o.value.filter(s=>s.position==="secretary").length,f.value=o.value.filter(s=>s.position==="president").length,p.value=o.value.filter(s=>s.position==="vise_president").length,h.value=o.value.filter(s=>s.position==="purok_leader").length,_.value=o.value.filter(s=>s.position==="treasurer").length,a.value=o.value.filter(s=>s.position==="colector").length},{immediate:!0});const l=[{name:"Admin",description:"Full access",users:r.value+(r.value>1?" users":" user"),access:"Full modules",icon:"bi bi-person"},{name:"Collector",description:"Jurisdiction-based",users:4,access:"Status updates",icon:"bi bi-people"}],g=()=>{if(!e.value){alert("No role selected. Please select a role to view.");return}k.get(route("role.viewSpecificRole",{role:e.value})),e.value=null};return(y,s)=>(m(),u("div",null,[t("div",S,[t("div",P,[s[2]||(s[2]=t("h6",{class:"fw-semibold"},"Roles and Permissions",-1)),t("div",V,[t("table",D,[s[1]||(s[1]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"Role"),t("th",null,"Description"),t("th",null,"Users"),t("th",null,"Access"),t("th")])],-1)),t("tbody",null,[(m(),u($,null,w(l,(d,M)=>t("tr",{key:M},[t("td",null,[t("i",{class:F(d.icon)},null,2),R(" "+i(d.name),1)]),t("td",null,i(d.description),1),t("td",null,i(d.users),1),t("td",null,i(d.access),1),t("td",null,[t("button",B,[t("i",{class:"bi bi-three-dots-vertical","data-bs-toggle":"modal","data-bs-target":"#action",onClick:it=>e.value=d.name.toLocaleLowerCase()},null,8,T)])])])),64))])])])])]),t("div",W,[t("div",z,[t("div",G,[s[3]||(s[3]=t("div",{class:"modal-header"},[t("h1",{class:"modal-title fs-5",id:"exampleModalLabel"}," Action "),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),t("div",J,[t("div",j,[t("div",q,[t("button",{type:"button",class:"btn btn-primary w-100","data-bs-dismiss":"modal",onClick:s[0]||(s[0]=d=>g())}," View All ")])])])])])])]))}},K={class:"container mt-4 role-container"},O={class:"card mt-3"},Q={class:"card-body"},X={class:"table-responsive"},Y={class:"table table-bordered align-middle"},Z={class:"btn btn-sm btn-light"},tt=["onClick"],et={class:"modal fade",id:"action1Modal",tabindex:"-1","aria-labelledby":"actionModalLabel","aria-hidden":"true"},st={class:"modal-dialog modal-dialog-centered"},lt={class:"modal-content modern-modal"},at={class:"modal-footer modern-footer"},ot={class:"action-buttons"},nt={__name:"Index",props:{users:{type:Array,default:()=>[]},admins:{type:Array,default:()=>[]}},setup(v){const b=v;let o=n([]),r=n([]),c=n(null);A(()=>b.admins,a=>{r.value=a},{immediate:!0}),A(()=>b.users,a=>{o.value=a,o.value.push(...r.value)},{immediate:!0});const f=a=>{c.value=a},p=()=>{k.get(route("role.edit",{id:c.value}))},h=()=>{confirm("Are you sure you want to delete this user?")&&k.delete(route("role.deleteUser",{user:c.value}),{onSuccess:()=>{alert("User deleted successfully.")},onError:a=>{console.error("Failed to delete user.",a)}})},_=(a,e)=>a==="collector"||e==="collector"?"Status updates":a==="admin"||e==="admin"?"Full modules":a==="secretary"||e==="secretary"?"Records and Reports":a==="vise_president"||e==="vise_president"?"Review and Approval":"N/A";return(a,e)=>(m(),u("div",null,[C(x(L),{title:"Role Management"}),C(E,null,{default:N(()=>[t("div",K,[e[4]||(e[4]=t("h5",{class:"fw-light"},"User and Role Management",-1)),t("div",O,[t("div",Q,[e[3]||(e[3]=t("h6",{class:"fw-semibold"},"User Management",-1)),t("div",X,[t("table",Y,[e[2]||(e[2]=t("thead",{class:"table-light"},[t("tr",null,[t("th",null,"ID"),t("th",null,"NAME"),t("th",null,"EMAIL"),t("th",null,"Role"),t("th",null,"Access")])],-1)),t("tbody",null,[(m(!0),u($,null,w(x(o),(l,g)=>(m(),u("tr",{key:g},[t("td",null,i(l.id),1),t("td",null,i(l.name),1),t("td",null,i(l.email||"N/A"),1),t("td",null,i((l==null?void 0:l.role)||(l==null?void 0:l.position)),1),t("td",null,i(_(l.role,l.position)),1),t("td",null,[t("button",Z,[t("i",{class:"bi bi-three-dots-vertical action1","data-bs-toggle":"modal","data-bs-target":"#action1Modal",onClick:y=>f(l.id)},null,8,tt)])])]))),128))])])])])]),C(H,{users:x(o)},null,8,["users"]),e[5]||(e[5]=t("div",{class:"bottom-role-container container"},null,-1))])]),_:1}),t("div",et,[t("div",st,[t("div",lt,[e[9]||(e[9]=U('<div class="modal-header modern-header" data-v-f31a79f5><div class="header-content" data-v-f31a79f5><i class="modal-icon fas fa-exclamation-circle" data-v-f31a79f5></i><h2 class="modal-title text-dark" id="actionModalLabel" data-v-f31a79f5>Confirm Action</h2></div><button type="button" class="btn-close modern-close" data-bs-dismiss="modal" aria-label="Close" data-v-f31a79f5><i class="bi bi-x-lg text-dark" data-v-f31a79f5></i></button></div><div class="modal-body modern-body" data-v-f31a79f5><p data-v-f31a79f5>Please select an action to perform. <span class="text-danger" data-v-f31a79f5>This action cannot be undone.</span></p></div>',2)),t("div",at,[t("div",ot,[t("button",{type:"button",class:"btn btn-edit text-dark","data-bs-dismiss":"modal",onClick:e[0]||(e[0]=l=>p())},e[6]||(e[6]=[t("i",{class:"fas fa-edit"},null,-1),t("span",null,"Edit",-1)])),t("button",{type:"button",class:"btn btn-delete text-dark","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=l=>h())},e[7]||(e[7]=[t("i",{class:"fas fa-trash-alt"},null,-1),t("span",null,"Delete",-1)])),e[8]||(e[8]=t("button",{type:"button",class:"btn btn-cancel text-dark","data-bs-dismiss":"modal"},[t("i",{class:"fas fa-times"}),t("span",null,"Cancel")],-1))])])])])])]))}},mt=I(nt,[["__scopeId","data-v-f31a79f5"]]);export{mt as default};
