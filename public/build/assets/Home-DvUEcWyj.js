import{A as O}from"./AdminLayout-BfAzXtKV.js";import{l as v,q as h,i as y,f as r,o as d,b as e,e as M,h as f,t as i,F as g,E as x,n as w,j as k,y as L,k as j,m as N,C as R,I as E,a as _,u as p,g as A,w as I}from"./app-lJPr0_lx.js";import{i as S,_ as F,C as z,a as V,M as B}from"./DashboardHeader-EpXsEIe1.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const T={class:"card-header"},J={class:"card-title"},U={key:0,class:"record-count"},H={class:"table-container"},q={class:"table-responsive"},Y={class:"deceased-table"},G={key:0,class:"no-data-row"},K={class:"index-cell"},P={class:"name-cell"},Q={class:"date-cell"},W={class:"address-cell"},X={class:"expand-toggle"},Z={class:"toggle-text"},ee={__name:"CurrentDeceased",props:{data:{type:Array,default:()=>[]}},setup(b){const c=b,l=v([]),o=v(!1);h(()=>c.data,t=>{l.value=t},{immediate:!0});const m=y(()=>o.value||l.value.length<=5?l.value:l.value.slice(0,5)),u=y(()=>Math.max(0,l.value.length-5)),a=()=>{o.value=!o.value},s=t=>{if(!t||t==="N/A")return"N/A";try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return t}};return(t,n)=>(d(),r("div",{class:w(["table-card",{"is-expanded":o.value}])},[e("div",T,[e("h5",J,[n[0]||(n[0]=M(" Current Deceased Records ")),l.value.length>0?(d(),r("span",U,i(l.value.length),1)):f("",!0)])]),e("div",H,[e("div",q,[e("table",Y,[n[2]||(n[2]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Name"),e("th",null,"Date of Death"),e("th",null,"Address")])],-1)),e("tbody",null,[l.value.length===0?(d(),r("tr",G,n[1]||(n[1]=[e("td",{colspan:"4",class:"no-data"}," No current deceased record found. ",-1)]))):f("",!0),(d(!0),r(g,null,x(m.value,($,C)=>(d(),r("tr",{key:C,class:"data-row"},[e("td",K,i(C+1),1),e("td",P,i($.deceased_name),1),e("td",Q,i(s($.date_of_death)),1),e("td",W,i($.address||"Bonga, Bulan, Sor."),1)]))),128))])])]),l.value.length>5?(d(),r("div",{key:0,class:"expand-section",onClick:a},[e("div",X,[e("span",Z,i(o.value?"Show Less":`Show ${u.value} More Records`),1),e("i",{class:w(["toggle-icon",o.value?"icon-eye-off":"icon-eye"])},null,2)])])):f("",!0)])],2))}},te=D(ee,[["__scopeId","data-v-bfdbcaa8"]]),se={class:"chart-card"},ae={class:"modal fade",id:"viewAll",tabindex:"-1","aria-labelledby":"viewAllLabel","aria-hidden":"true"},le={class:"modal-dialog modal-lg"},oe={class:"modal-content"},ne={class:"modal-body"},re={key:0},de={class:"table table-striped table-bordered"},ce={key:1,class:"text-center text-muted"},ie={__name:"DeceasedRecorded",props:{records:{type:Array,default:()=>[]}},setup(b){const c=b,l=v(null);let o=null;const m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],u=()=>{if(!o)return;const a=Array(12).fill(0);c.records.forEach(s=>{const t=new Date(s.date_of_death).getMonth();a[t]++}),o.setOption({title:{text:"Count Of Deceased Members Recorded In This System",left:"center"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:m},yAxis:{type:"value",minInterval:1},series:[{name:"Recorded",type:"bar",data:a,itemStyle:{color:"#0000ff"}}],grid:{left:"3%",right:"4%",bottom:"8%",containLabel:!0}}),o.resize()};return h(()=>c.records,()=>u(),{immediate:!0}),k(async()=>{await L(),l.value&&(o=S(l.value),u(),window.addEventListener("resize",o.resize))}),j(()=>{o&&(window.removeEventListener("resize",o.resize),o.dispose(),o=null)}),(a,s)=>(d(),r("div",null,[s[3]||(s[3]=e("div",{class:"d-flex justify-content-end view-all-btn me-2"},[e("button",{type:"button",class:"btn btn-primary view-all-btn","data-bs-toggle":"modal","data-bs-target":"#viewAll"}," View All ")],-1)),e("div",se,[e("div",{ref_key:"chartRef",ref:l,class:"chart"},null,512)]),e("div",ae,[e("div",le,[e("div",oe,[s[1]||(s[1]=e("div",{class:"modal-header"},[e("h1",{class:"modal-title fs-5",id:"viewAllLabel"},"All Deceased Records"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),e("div",ne,[c.records.length>0?(d(),r("div",re,[e("table",de,[s[0]||(s[0]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Deceased Name"),e("th",null,"Date of Death"),e("th",null,"Member ID")])],-1)),e("tbody",null,[(d(!0),r(g,null,x(c.records,(t,n)=>(d(),r("tr",{key:t.report_id},[e("td",null,i(n+1),1),e("td",null,i(t.deceased_name),1),e("td",null,i(new Date(t.date_of_death).toLocaleDateString()),1),e("td",null,i(t.member_id),1)]))),128))])])])):(d(),r("div",ce," No records found. "))]),s[2]||(s[2]=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close")],-1))])])])]))}},ue=D(ie,[["__scopeId","data-v-870d76c6"]]),ve={class:"table-card"},_e={class:"card-header"},me={class:"card-title"},he={key:0,class:"record-count"},be={class:"table-container"},pe={class:"mb-3"},fe={class:"table-responsive"},ye={class:"deceased-table"},ge={key:0,class:"no-data-row"},De={class:"index-cell"},$e={class:"name-cell"},xe={class:"date-cell"},Ce={__name:"Contributions",setup(b){const c=v([]),l=v(""),o=async()=>{try{const a=await E.get(route("contributions.list"));c.value=a.data}catch(a){console.error("Error fetching contributions:",a)}},m=y(()=>{let a={};return c.value.forEach(s=>{s.collector&&(a[s.collector]||(a[s.collector]=0),a[s.collector]+=parseFloat(s.amount))}),Object.keys(a).map(s=>({collector:s,collected:a[s]}))}),u=y(()=>l.value?m.value.filter(a=>a.collector.toLowerCase().includes(l.value.toLowerCase())):m.value);return k(o),(a,s)=>(d(),r("div",ve,[e("div",_e,[e("h5",me,[s[1]||(s[1]=M(" Collector Contributions Summary ")),u.value.length>0?(d(),r("span",he,i(u.value.length),1)):f("",!0)])]),e("div",be,[e("div",pe,[N(e("input",{type:"text",class:"form-control",placeholder:"Filter collector...","onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t)},null,512),[[R,l.value]])]),e("div",fe,[e("table",ye,[s[3]||(s[3]=e("thead",null,[e("tr",null,[e("th",null,"#"),e("th",null,"Collector"),e("th",null,"Collected")])],-1)),e("tbody",null,[u.value.length===0?(d(),r("tr",ge,s[2]||(s[2]=[e("td",{colspan:"3",class:"no-data"}," No contributions found. ",-1)]))):f("",!0),(d(!0),r(g,null,x(u.value,(t,n)=>(d(),r("tr",{key:t.collector,class:"data-row"},[e("td",De,i(n+1),1),e("td",$e,i(t.collector),1),e("td",xe,"â‚±"+i(t.collected.toFixed(2)),1)]))),128))])])])])]))}},we=D(Ce,[["__scopeId","data-v-8cb37c03"]]),Ae={class:"container-fluid mx-0 px-0 home-container"},Me={class:"row g-4"},ke={class:"col-md-8 responsive-card"},Oe={class:"col-md-4 responsive-card"},Le={class:"row mt-4"},je={class:"col-12"},Ne={class:"dashboard-container"},Re={__name:"Home",props:{currentMonthData:{type:Object,default:()=>({})},yearData:{type:Object,default:()=>({})},monthlyOverview:{type:Object,default:()=>({})},currentDeceasedMembers:{type:Array,default:()=>[]},allDeceased:{type:Array,default:()=>[]},currentDeceasedMember:{type:Object,default:()=>({})}},setup(b){const c=b;let l=v([]),o=v([]),m=v([]);const u=v([]),a=v([]),s=v({});return h(()=>c.currentMonthData,t=>{l.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.yearData,t=>{o.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.monthlyOverview,t=>{m.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.currentDeceasedMembers,t=>{u.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.allDeceased,t=>{a.value=t?Object.values(t):[]},{immediate:!0}),h(()=>c.currentDeceasedMember,t=>{s.value=t||{}},{immediate:!0}),(t,n)=>(d(),r(g,null,[_(p(A),{title:"Dashboard"}),_(O,null,{default:I(()=>[_(p(A),{title:"Dashboard"}),e("div",Ae,[n[0]||(n[0]=e("h2",{class:"fw-normal fs-5 my-4 ms-3"},"Analytics Dashboard",-1)),_(F,{data:s.value,allDeceased:a.value},null,8,["data","allDeceased"]),e("div",Me,[e("div",ke,[_(z,{data:p(l)},null,8,["data"])]),e("div",Oe,[_(V,{data:p(o)},null,8,["data"])])]),e("div",Le,[e("div",je,[_(B,{data:p(m)},null,8,["data"])])]),e("div",null,[_(we)]),e("div",Ne,[_(te,{data:u.value},null,8,["data"]),_(ue,{records:a.value},null,8,["records"])]),n[1]||(n[1]=e("div",{class:"add-space-at-bottom"},null,-1))])]),_:1})],64))}},Ve=D(Re,[["__scopeId","data-v-9018225e"]]);export{Ve as default};
