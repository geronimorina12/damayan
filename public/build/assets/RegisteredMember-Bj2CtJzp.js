import{q as ce,r,j as O,x as de,s as j,C as me,f as n,o as a,b as e,h as C,e as W,t as c,d as J,i as k,D as A,u as o,n as K,I as te,E as ie,F as z,G as Z,l as le,J as oe,a as F,K as pe,L as fe,W as se,w as X,T as ne,c as ge,M as ye,m as _e,g as he,S as ue,N as $e,z as ke}from"./app-DI8Sip0-.js";import{A as we}from"./AdminLayout-BLWzalW5.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./logo1-BZ0h4foK.js";const ve=ce("modalStore",()=>{const T=r(!1);return{closeAddMemberModal:T,triggerCloseMemberModal:()=>{T.value=!0},resetModal:()=>{T.value=!1}}}),Me={class:"container-fluid d-flex flex-row justify-content-center main-container"},xe={class:"container mt-5"},Ce={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},Se={class:"row g-3"},Ae={class:"col-md-6"},Ne={class:"col-md-6"},Be=["max"],Te={key:0,class:"invalid-feedback d-block"},De={class:"col-md-6"},Ue={class:"col-md-6"},Ve={class:"col-md-6"},Ee={class:"col-md-6"},Ie={class:"col-md-6"},Le={class:"col-md-6"},Re={class:"col-md-6"},Fe={class:"col-md-6"},Pe={key:0,class:"text-danger small mt-1"},qe={class:"col-12"},Oe={class:"mt-4"},je={key:0,class:"text-center mt-3 text-muted"},He={key:1,class:"table-responsive mt-2"},We={class:"table table-bordered table-striped align-middle"},ze=["onClick"],Ge={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},Ye={key:1,class:"card mt-4 p-3 shadow-sm"},Ke={class:"col-md-6"},Je={class:"col-md-6"},Qe={class:"col-md-6"},Xe={class:"col-md-6"},Ze=["max"],et={class:"col-12 d-flex justify-content-end gap-2 mt-3"},tt=["disabled"],st={__name:"AddNewMember",props:{show:{},showModifiers:{}},emits:["update:show"],setup(T){const M=ve(),t=r({name:"",relation:"",age:"",birth_date:""}),p=r([]),v=r(!1),x=r(""),_=r(""),i=r("");r(!1),O(()=>new Date().getFullYear());const h=S=>{if(!S)return"";const s=new Date,u=new Date(S);let N=s.getFullYear()-u.getFullYear();const w=s.getMonth()-u.getMonth();return(w<0||w===0&&s.getDate()<u.getDate())&&N--,console.log("Calculated age: ",N.toString()),N.toString()},D=(S,s)=>{if(!S)return s.value="",!0;const u=new Date(S),N=new Date;return u.setHours(0,0,0,0),N.setHours(0,0,0,0),u>N?(s.value="Birth date cannot be in the future.",!1):(s.value="",!0)},b=de({first_name:"",last_name:"",address:"Bonga, Bulan, Sorsogon",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"active",occupation:"",gender:"",beneficiaries:[]});j(()=>b.date_of_birth,S=>{const s=D(S,i);S&&s?b.age=h(S):b.age=""}),j(()=>t.value.birth_date,S=>{const s=D(S,_);S&&s?t.value.age=h(S):t.value.age=""});const I=()=>{if(b.clearErrors(),!/^0\d{10}$/.test(b.contact_number)){b.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}M.triggerCloseMemberModal(),D(b.date_of_birth,i)&&(M.triggerCloseMemberModal(),b.beneficiaries=p.value,b.post(route("addMemberPost"),{onSuccess:()=>{x.value="Member added successfully!",P.value=!0,L.value=!0,setTimeout(()=>x.value="",4e3)},onError:s=>console.log("An error occurred => ",s)}))},f=()=>{D(t.value.birth_date,_)&&(p.value.push({...t.value}),t.value={name:"",relation:"",age:"",birth_date:""},_.value="",v.value=!1)},l=S=>{p.value.splice(S,1)},d=S=>{const s={year:"numeric",month:"long",day:"numeric"};return new Date(S).toLocaleDateString(void 0,s)},H=O(()=>{const S=new Date,s=S.getFullYear()-16,u=String(S.getMonth()+1).padStart(2,"0"),N=String(S.getDate()).padStart(2,"0");return`${s}-${u}-${N}`}),P=me(T,"show"),L=r(!1);M.triggerCloseMemberModal();const q=O(()=>new Date().toISOString().split("T")[0]);return(S,s)=>(a(),n("div",Me,[e("div",xe,[x.value?(a(),n("div",Ce,[W(c(x.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:s[0]||(s[0]=u=>x.value="")})])):C("",!0),e("form",{onSubmit:J(I,["prevent"]),class:"form"},[e("div",Se,[e("div",Ae,[s[21]||(s[21]=e("label",{class:"form-label"},"Last name",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Marinda","onUpdate:modelValue":s[1]||(s[1]=u=>o(b).last_name=u)},null,512),[[A,o(b).last_name]])]),e("div",Ne,[s[22]||(s[22]=e("label",{class:"form-label"},"Birth date",-1)),k(e("input",{type:"date",id:"birthDate",class:K(["form-control",{"is-invalid":i.value}]),"onUpdate:modelValue":s[2]||(s[2]=u=>o(b).date_of_birth=u),max:H.value},null,10,Be),[[A,o(b).date_of_birth]]),i.value?(a(),n("div",Te,c(i.value),1)):C("",!0)]),e("div",De,[s[23]||(s[23]=e("label",{class:"form-label"},"First name",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Jovan","onUpdate:modelValue":s[3]||(s[3]=u=>o(b).first_name=u),required:""},null,512),[[A,o(b).first_name]])]),e("div",Ue,[s[24]||(s[24]=e("label",{class:"form-label"},"Age",-1)),k(e("input",{type:"number",class:"form-control",placeholder:"0","onUpdate:modelValue":s[4]||(s[4]=u=>o(b).age=u),required:"",disabled:""},null,512),[[A,o(b).age]])]),e("div",Ve,[s[25]||(s[25]=e("label",{class:"form-label"},"Middle name",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Munticalbo","onUpdate:modelValue":s[5]||(s[5]=u=>o(b).middle_name=u)},null,512),[[A,o(b).middle_name]])]),e("div",Ee,[s[27]||(s[27]=e("label",{class:"form-label"},"Gender",-1)),k(e("select",{class:"form-select","onUpdate:modelValue":s[6]||(s[6]=u=>o(b).gender=u),required:""},s[26]||(s[26]=[e("option",{value:"",disabled:""},"Select gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[te,o(b).gender]])]),e("div",Ie,[s[29]||(s[29]=e("label",{class:"form-label"},"status",-1)),k(e("select",{class:"form-select","onUpdate:modelValue":s[7]||(s[7]=u=>o(b).status=u),disabled:""},s[28]||(s[28]=[e("option",{value:"active",selected:""},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[te,o(b).status]])]),e("div",Le,[s[31]||(s[31]=e("label",{class:"form-label"},"Purok",-1)),k(e("select",{class:"form-select","onUpdate:modelValue":s[8]||(s[8]=u=>o(b).purok=u),required:""},s[30]||(s[30]=[ie('<option value="" disabled selected data-v-a7f000ad>Select Purok</option><option value="Purok 1" data-v-a7f000ad>Purok 1</option><option value="Purok 2" data-v-a7f000ad>Purok 2</option><option value="Purok 3" data-v-a7f000ad>Purok 3</option><option value="Purok 4" data-v-a7f000ad>Purok 4</option>',5)]),512),[[te,o(b).purok]])]),e("div",Re,[s[32]||(s[32]=e("label",{class:"form-label"},"Occupation",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Farmer","onUpdate:modelValue":s[9]||(s[9]=u=>o(b).occupation=u),required:""},null,512),[[A,o(b).occupation]])]),e("div",Fe,[s[33]||(s[33]=e("label",{class:"form-label"},"Contact no.",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"09768734123","onUpdate:modelValue":s[10]||(s[10]=u=>o(b).contact_number=u),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[A,o(b).contact_number]]),o(b).errors.contact_number?(a(),n("div",Pe,c(o(b).errors.contact_number),1)):C("",!0)]),e("div",qe,[s[34]||(s[34]=e("label",{class:"form-label"},"Address",-1)),k(e("input",{type:"text",class:"form-control",placeholder:"Bonga, Bulan, Sorsogon","onUpdate:modelValue":s[11]||(s[11]=u=>o(b).address=u),required:"",disabled:""},null,512),[[A,o(b).address]])])]),e("div",Oe,[s[36]||(s[36]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),p.value.length===0?(a(),n("div",je," No beneficiary added ")):(a(),n("div",He,[e("table",We,[s[35]||(s[35]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),n(z,null,Z(p.value,(u,N)=>(a(),n("tr",{key:N},[e("td",null,c(u.name),1),e("td",null,c(u.relation),1),e("td",null,c(u.age),1),e("td",null,c(d(u.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:w=>l(N)}," Delete ",8,ze)])]))),128))])])]))]),e("div",Ge,[v.value?C("",!0):(a(),n("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:s[12]||(s[12]=u=>v.value=!0)}," Add Beneficiary ")),s[37]||(s[37]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Submit",-1))])],32),v.value?(a(),n("div",Ye,[s[43]||(s[43]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:J(f,["prevent"]),class:"row g-2"},[e("div",Ke,[s[38]||(s[38]=e("label",null,"Name",-1)),k(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=u=>t.value.name=u),required:""},null,512),[[A,t.value.name]])]),e("div",Je,[s[40]||(s[40]=e("label",null,"Relation",-1)),k(e("select",{name:"selectRelation",id:"selectRelation",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=u=>t.value.relation=u),required:""},s[39]||(s[39]=[ie('<option value="" disabled data-v-a7f000ad>Select relation</option><option value="mother" data-v-a7f000ad>Mother</option><option value="father" data-v-a7f000ad>Father</option><option value="son" data-v-a7f000ad>Son</option><option value="daughter" data-v-a7f000ad>Daughter</option><option value="adopted" data-v-a7f000ad>Adopted</option>',6)]),512),[[te,t.value.relation]])]),e("div",Qe,[s[41]||(s[41]=e("label",null,"Age",-1)),k(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=u=>t.value.age=u),disabled:"",required:""},null,512),[[A,t.value.age]])]),e("div",Xe,[s[42]||(s[42]=e("label",{class:"form-label small"},"Birthdate",-1)),k(e("input",{type:"date",class:"form-control","onUpdate:modelValue":s[16]||(s[16]=u=>t.value.birth_date=u),max:q.value,required:""},null,8,Ze),[[A,t.value.birth_date]])]),e("div",et,[e("button",{type:"button",class:"btn btn-secondary",onClick:s[17]||(s[17]=u=>v.value=!1)}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:!!_.value||!t.value.birth_date}," Save Beneficiary ",8,tt)])],32)])):C("",!0)]),P.value?(a(),n("div",{key:0,class:"modal-overlay",onClick:s[20]||(s[20]=(...u)=>L.value&&L.value(...u))},[e("div",{class:"modal-box",onClick:s[19]||(s[19]=J(()=>{},["stop"]))},[s[44]||(s[44]=e("p",null,"Member created",-1)),e("button",{class:"close-btn",onClick:s[18]||(s[18]=(...u)=>L.value&&L.value(...u))},"OK")])])):C("",!0)]))}},lt=Q(st,[["__scopeId","data-v-a7f000ad"]]),ot={class:"container mt-4"},at={key:0,class:"text-center my-5"},nt={key:1,class:"alert alert-danger"},rt={key:2,class:"table-responsive"},it={class:"table table-striped table-bordered shadow-sm"},dt={key:3,class:"alert alert-info"},ut={__name:"NewlyCreated",setup(T){const M=r([]),t=r(!0),p=r(null),v=async()=>{var _,i;try{const h=await oe.get("/member/new");M.value=h.data.data}catch(h){p.value=((i=(_=h.response)==null?void 0:_.data)==null?void 0:i.message)||"Failed to fetch latest members."}finally{t.value=!1}},x=_=>new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return le(v),(_,i)=>(a(),n("div",ot,[t.value?(a(),n("div",at,i[0]||(i[0]=[e("div",{class:"spinner-border text-primary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):p.value?(a(),n("div",nt,c(p.value),1)):M.value.length?(a(),n("div",rt,[e("table",it,[i[1]||(i[1]=e("thead",{class:"table-primary"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Contact"),e("th",null,"Age"),e("th",null,"Gender"),e("th",null,"Registration Date")])],-1)),e("tbody",null,[(a(!0),n(z,null,Z(M.value,h=>(a(),n("tr",{key:h.id},[e("td",null,c(h.first_name)+" "+c(h.middle_name)+" "+c(h.last_name),1),e("td",null,c(h.address),1),e("td",null,c(h.contact_number),1),e("td",null,c(h.age),1),e("td",null,c(h.gender),1),e("td",null,c(x(h.created_at)),1)]))),128))])])])):(a(),n("div",dt," No newly registered members found. "))]))}},ct=Q(ut,[["__scopeId","data-v-cb085a94"]]),mt={class:"container-fluid d-flex flex-row justify-content-between align-items-center mb-2"},vt={id:"addNewMemberModal",class:"custom-modal"},bt={class:"modal-content",style:{"min-width":"60%",height:"auto"}},pt={class:"modal-header"},ft={class:"modal-body"},gt={id:"newCreatedMemberModal",class:"custom-modal",style:{"padding-top":"0"}},yt={class:"modal-content",style:{"min-width":"60%",height:"auto"}},_t={class:"modal-header alig-items-center"},ht={class:"modal-body"},$t={key:0,class:"modal-overlay"},kt={class:"modal-box"},wt={style:{"font-size":"0.9rem",color:"#555"}},Mt={__name:"Header",setup(T){const M=ve(),t=r(!1),p=r(3),v=_=>{document.getElementById(_).classList.add("show")},x=_=>{document.getElementById(_).classList.remove("show")};return j(()=>M.closeAddMemberModal,_=>{_&&(x("addNewMemberModal"),M.resetModal())}),window.addEventListener("click",_=>{document.querySelectorAll(".custom-modal").forEach(i=>{_.target===i&&i.classList.remove("show")})}),j(t,_=>{if(_){p.value=3;const i=setInterval(()=>{p.value--,p.value<=0&&(t.value=!1,clearInterval(i))},1e3)}}),(_,i)=>(a(),n("div",null,[e("div",mt,[i[8]||(i[8]=e("div",null,[e("h5",{class:"ms-3 fw-light"},[e("span",{class:"d-none d-sm-none d-lg-inline-block me-2"},"Registered"),e("span",null,"Members")])],-1)),e("div",null,[e("button",{class:"modern-btn me-3",onClick:i[0]||(i[0]=J(h=>v("addNewMemberModal"),["prevent"]))},i[6]||(i[6]=[e("i",{class:"bi bi-person-plus"},null,-1),e("span",null,"Add Member",-1)])),e("button",{class:"modern-btn secondary",onClick:i[1]||(i[1]=h=>v("newCreatedMemberModal"))},i[7]||(i[7]=[e("i",{class:"bi bi-person-lines-fill"},null,-1),e("span",null,"Newly Created",-1)]))])]),e("div",vt,[e("div",bt,[e("div",pt,[i[9]||(i[9]=e("h3",null,"Add New Member",-1)),e("button",{class:"close-btn",onClick:i[2]||(i[2]=h=>x("addNewMemberModal"))},"Ã—")]),e("div",ft,[F(lt,{show:t.value,"onUpdate:show":i[3]||(i[3]=h=>t.value=h)},null,8,["show"])])])]),e("div",gt,[e("div",yt,[e("div",_t,[i[10]||(i[10]=e("div",{class:""},[e("h4",{class:"mb-3 text-dark fw-bold d-flex align-items-center"}," Newly Registered Member ")],-1)),e("button",{class:"close-btn2 fs-2",onClick:i[4]||(i[4]=h=>x("newCreatedMemberModal"))},"Ã—")]),e("div",ht,[F(ct)])])]),t.value?(a(),n("div",$t,[e("div",kt,[i[11]||(i[11]=e("p",null,"Member created successfully!",-1)),e("p",wt," Closing in "+c(p.value)+"s... ",1),e("button",{class:"close-btn",onClick:i[5]||(i[5]=h=>t.value=!1)}," OK ("+c(p.value)+") ",1)])])):C("",!0)]))}},xt=Q(Mt,[["__scopeId","data-v-4e8a56c0"]]),Ct={__name:"Alert",props:{status:{type:Boolean,default:!1},name:{type:String,default:""}},setup(T){const M=T,t=r(!1),p=r(null),v=r("");return j(()=>M.status,x=>{p.value=x,v.value="bounce-in",t.value=!0,setTimeout(()=>{v.value="slide-out",setTimeout(()=>{t.value=!1},500)},3e3)}),(x,_)=>(a(),n("div",null,[t.value?(a(),n("div",{key:0,class:K(["alert alert-info",v.value]),role:"alert"},[W(c(T.name)+"'s status has been changed to ",1),e("strong",null,c(p.value?"Active":"Inactive"),1)],2)):C("",!0)]))}},St=Q(Ct,[["__scopeId","data-v-f19df27b"]]),At={key:0,class:"confirmation-container"},Nt={class:"confirmation-content"},Bt={class:"message-preview"},Tt={class:"preview-item"},Dt={class:"value"},Ut={class:"preview-item"},Vt={class:"value"},Et={class:"recipients-section"},It={class:"recipients-list"},Lt={key:1,class:"container mt-4"},Rt={class:"mb-3"},Ft={class:"d-flex justify-content-between align-items-center mb-3"},Pt={class:"d-flex justify-content-between align-items-center gap-3"},qt={class:"d-flex flex-row gap-2"},Ot={key:0,class:"alert alert-info",role:"alert"},jt={class:"table-scroll-container"},Ht={class:"table-responsive"},Wt={class:"table table-bordered table-hover"},zt=["value"],Gt={key:0},Yt={key:2,class:"status-container"},Kt={__name:"SendToAllSelectedComponent",props:pe({members:{type:Array,default:()=>[]},type:{type:String,default:"deathReport"},message:{type:String,default:""},deceased:{type:String},last:{type:String}},{closeCaret:{},closeCaretModifiers:{}}),emits:["update:closeCaret"],setup(T){const M=T,t=r([]),p=r(""),v=r(M.type),x=r(""),_=r(M.message||""),i=r(!1),h=r(!1),D=r(M.members||[]),b=me(T,"closeCaret"),I=r(!1),f=r({});let l=r(!1);const d=O(()=>{if(!Array.isArray(D.value))return[];if(!p.value)return D.value;const N=p.value.toLowerCase();return D.value.filter(E=>`${E.first_name} ${E.last_name}`.toLowerCase().includes(N))});function H(){t.value=[...d.value],i.value=!0}function P(){t.value=[],i.value=!1}function L(){if(b.value=!0,t.value.length===0){x.value="Please select at least one member first.";return}I.value=!0}function q(){if(x.value="",t.value.length===0){x.value="Please select at least one member first.";return}const N=t.value.map(w=>w.id);se.post(route(`smsSelectMember.${v.value}`),{member_ids:N,message:_.value,deceased:M.deceased||0,last:M.last},{onSuccess:()=>{x.value=`${v.value} SMS sent successfully.`,t.value=[],i.value=!1,I.value=!1,l.value=!0,setTimeout(()=>{window.location.reload()},2e3)},onError:w=>{console.error(w),x.value=`Failed to send ${v.value} SMS.`}})}const S=async()=>{h.value=!0;try{const N=await oe.get(route("smsNotification.members"));D.value=N.data.members||N.data}catch(N){console.error("Error fetching members:",N)}finally{h.value=!1}},s=async N=>{h.value=!0;try{const w=await oe.get(route("smsNotification.deceased",N));f.value=w.data.deceased||w.data}catch(w){console.error("Error fetching deceased:",w)}finally{h.value=!1}};le(()=>{M.deceased&&s(M.deceased)}),O(()=>h.value?[]:D.value.map(N=>({id:N.id,fullName:`${N.first_name} ${N.last_name}`}))),le(()=>{(!M.members||M.members.length===0)&&S()});const u=()=>{I.value=!1,b.value=!1};return(N,w)=>(a(),n(z,null,[I.value&&!o(l)?(a(),n("div",At,[w[5]||(w[5]=e("div",{class:"confirmation-header"},[e("h4",{class:"confirmation-title"},"Review Message"),e("p",{class:"confirmation-subtitle"},"Please review before sending")],-1)),e("div",Nt,[e("div",Bt,[e("div",Tt,[w[2]||(w[2]=e("span",{class:"label"},"Message",-1)),e("p",Dt,c(_.value),1)]),e("div",Ut,[w[3]||(w[3]=e("span",{class:"label"},"Deceased",-1)),e("p",Vt,c(f.value.first_name||"")+" "+c(f.value.middle_name||"")+" "+c(f.value.last_name||""),1)])]),e("div",Et,[w[4]||(w[4]=e("span",{class:"label"},"Selected Members",-1)),e("div",It,[(a(!0),n(z,null,Z(t.value,E=>(a(),n("div",{key:E.id,class:"recipient-item"},c(E.first_name)+" "+c(E.last_name),1))),128))])])]),e("div",{class:"confirmation-actions"},[e("button",{class:"btn btn-outline",onClick:u}," Cancel "),e("button",{class:"btn btn-primary",onClick:q}," Send Message ")])])):C("",!0),!I.value&&!o(l)?(a(),n("div",Lt,[e("div",Rt,[k(e("input",{type:"text","onUpdate:modelValue":w[0]||(w[0]=E=>p.value=E),class:"form-control",placeholder:"Search by name..."},null,512),[[A,p.value]])]),e("div",Ft,[e("div",Pt,[e("p",null,[w[6]||(w[6]=e("span",{class:"fw-bold"},"Selected:",-1)),W(" "+c(t.value.length),1)])]),e("div",qt,[i.value?(a(),n("button",{key:1,class:"btn btn-warning py-0 button-unselect",onClick:P}," Unselect All ")):(a(),n("button",{key:0,class:"btn btn-success button-select-all w-auto",onClick:H}," Select All ")),e("button",{class:"btn btn-primary py-0 button-done",onClick:L}," Done ")])]),x.value?(a(),n("div",Ot,c(x.value),1)):C("",!0),e("div",jt,[e("div",Ht,[e("table",Wt,[w[8]||(w[8]=e("thead",null,[e("tr",null,[e("th",null,"Select"),e("th",null,"Name")])],-1)),e("tbody",null,[(a(!0),n(z,null,Z(d.value,E=>(a(),n("tr",{key:E.id},[e("td",null,[k(e("input",{type:"checkbox",value:E,"onUpdate:modelValue":w[1]||(w[1]=ee=>t.value=ee)},null,8,zt),[[fe,t.value]])]),e("td",null,c(E.first_name)+" "+c(E.last_name),1)]))),128)),d.value.length===0?(a(),n("tr",Gt,w[7]||(w[7]=[e("td",{colspan:"3",class:"text-center"},"No members found.",-1)]))):C("",!0)])])])])])):C("",!0),o(l)?(a(),n("div",Yt,w[9]||(w[9]=[ie('<div class="status-alert success" data-v-7c6cc3d8><svg class="status-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7c6cc3d8><path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7c6cc3d8></path></svg><div class="status-content" data-v-7c6cc3d8><p class="status-message" data-v-7c6cc3d8>Messages sent successfully</p><p class="status-description" data-v-7c6cc3d8>SMS notifications have been delivered to all selected members.</p></div></div>',1)]))):C("",!0)],64))}},Jt=Q(Kt,[["__scopeId","data-v-7c6cc3d8"]]),be=ce("deceased title",{state:()=>({currentText:"Add Deceased Info."}),actions:{setText(T){this.currentText=T,console.log(`Text updated in store: ${this.currentText}`)}}}),Qt={key:0,class:"d-flex align-items-center gap-2"},Xt=["disabled"],Zt=["disabled"],es={key:1,class:"reminder-wrapper"},ts={class:"card shadow-sm pt-0 p-4 rounded-4 bg-white border-0"},ss={key:0,class:"mb-4 text-center"},ls={class:"fw-bold text-primary mb-1"},os={class:"text-muted mb-0"},as={class:"row g-3"},ns={class:"col-md-6"},rs=["min"],is={key:0,class:"invalid-feedback d-block"},ds={class:"col-md-6"},us={key:0,class:"mt-4"},cs={key:0,class:"mt-4 d-flex flex-wrap gap-3 justify-content-center"},ms={__name:"IsDeceased",props:{deceasedMember:{type:Object,default:()=>({})}},setup(T){const M=be(),t=de({message:"",type:"deathReport",memberId:null,lastNight:"",startOfContribution:""}),p=T,v=r({}),x=r(""),_=r(""),i=r(!1);let h=r(!0),D=r(!1),b=r(!1);const I=r(!1),f=r(""),l=O(()=>!!f.value),d=O(()=>t.lastNight&&t.startOfContribution&&!l.value);le(()=>{const U=new Date;t.startOfContribution=U.toISOString().split("T")[0]}),j(()=>p.deceasedMember,U=>{v.value=U},{immediate:!0}),j(()=>t.lastNight,U=>{if(!U){f.value="";return}const $=new Date(U),V=new Date;$.setHours(0,0,0,0),V.setHours(0,0,0,0),$<=V?f.value="The last night date cannot be set today or a past date.":f.value=""}),j([()=>t.lastNight,()=>t.startOfContribution],([U,$])=>{var V;if(U&&$&&((V=v.value)!=null&&V.first_name)&&!l.value){const G=v.value;t.message=`We regret to inform you that ${G.first_name} ${G.last_name} has passed away. Last night is on ${S(U)}, and the collection for burial assistance starts on ${S($)}.`,t.memberId=G.id}else t.message=""},{immediate:!0});function P(){if(!t.memberId){q("Missing member ID. Please select a member first.","danger");return}if(l.value){q("Please fix the validation errors before sending.","danger");return}se.post(route("smsNotification.sendReminders"),{message:t.message,type:t.type,memberId:t.memberId,lastNight:t.lastNight,startOfContribution:t.startOfContribution},{onSuccess:()=>q("SMS sent successfully."),onError:()=>q("An error occurred while sending SMS.")})}async function L(){M.setText("Select Members"),I.value=!0,h.value=!1,D.value=!0}function q(U,$){x.value=U,_.value=$,i.value=!0,setTimeout(()=>i.value=!1,4e3)}const S=U=>{const $={year:"numeric",month:"long",day:"numeric"};return new Date(U).toLocaleDateString(void 0,$)},s=r(!1),u=r(!1),N=O(()=>s.value?"bi bi-caret-left-fill":"bi bi-caret-left"),w=O(()=>u.value?"bi bi-caret-right-fill":"bi bi-caret-right"),E=()=>{M.setText("Add Deceased Info."),h.value=!0,I.value=!1,D.value=!0},ee=()=>{M.setText("Select Members"),h.value=!1,I.value=!0},re=O(()=>{const U=new Date;return U.setDate(U.getDate()+1),U.toISOString().split("T")[0]});return(U,$)=>(a(),n(z,null,[o(D)&&!o(b)?(a(),n("div",Qt,[e("button",{class:"caret-wrapper btn btn-outline-dark py-0",onMouseenter:$[0]||($[0]=V=>s.value=!0),onMouseleave:$[1]||($[1]=V=>s.value=!1),onClick:E,disabled:o(h)},[e("i",{class:K([N.value,"fs-4"])},null,2)],40,Xt),e("button",{class:"caret-wrapper btn btn-outline-dark py-0",onMouseenter:$[2]||($[2]=V=>u.value=!0),onMouseleave:$[3]||($[3]=V=>u.value=!1),onClick:ee,disabled:!o(h)},[e("i",{class:K([w.value,"fs-4"])},null,2)],40,Zt)])):C("",!0),o(h)?(a(),n("div",es,[e("div",ts,[F(ne,{name:"fade"},{default:X(()=>[i.value?(a(),n("div",{key:0,class:K([["alert",_.value==="success"?"alert-success":"alert-danger"],"alert-dismissible fade show mb-3"]),role:"alert"},[W(c(x.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:$[4]||($[4]=V=>i.value=!1)})],2)):C("",!0)]),_:1}),v.value.first_name?(a(),n("div",ss,[e("h4",ls,c(v.value.first_name)+" "+c(v.value.middle_name)+" "+c(v.value.last_name),1),e("p",os,c(v.value.address),1)])):C("",!0),e("div",as,[e("div",ns,[$[9]||($[9]=e("label",{class:"form-label fw-semibold text-secondary"},"Enter last night:",-1)),k(e("input",{type:"date",class:K(["form-control",{"is-invalid":l.value}]),"onUpdate:modelValue":$[5]||($[5]=V=>o(t).lastNight=V),min:re.value},null,10,rs),[[A,o(t).lastNight]]),l.value?(a(),n("div",is,c(f.value),1)):C("",!0)]),e("div",ds,[$[10]||($[10]=e("label",{class:"form-label fw-semibold text-secondary"},"Start of contribution:",-1)),k(e("input",{type:"date",class:"form-control","onUpdate:modelValue":$[6]||($[6]=V=>o(t).startOfContribution=V)},null,512),[[A,o(t).startOfContribution]])])]),F(ne,{name:"fade"},{default:X(()=>[o(t).message&&!l.value?(a(),n("div",us,[$[11]||($[11]=e("label",{class:"form-label fw-semibold text-secondary"},"Message:",-1)),k(e("textarea",{class:"form-control","onUpdate:modelValue":$[7]||($[7]=V=>o(t).message=V),rows:"4",style:{resize:"vertical","min-height":"100px"}},null,512),[[A,o(t).message]])])):C("",!0)]),_:1}),F(ne,{name:"fade"},{default:X(()=>[d.value?(a(),n("div",cs,[e("button",{class:"btn-modern",onClick:L},$[12]||($[12]=[e("i",{class:"bi bi-people-fill me-2"},null,-1),W(" Send to all selected ")])),e("button",{class:"btn-modern",onClick:P},$[13]||($[13]=[e("i",{class:"bi bi-send-fill me-2"},null,-1),W("Send to all ")]))])):C("",!0)]),_:1})])])):C("",!0),F(ne,{name:"fade"},{default:X(()=>{var V;return[I.value?(a(),ge(Jt,{key:0,members:[],type:o(t).type,message:o(t).message,deceased:(V=v.value)==null?void 0:V.id,last:o(t).lastNight,closeCaret:o(b),"onUpdate:closeCaret":$[8]||($[8]=G=>ye(b)?b.value=G:b=G),class:"mt-4"},null,8,["type","message","deceased","last","closeCaret"])):C("",!0)]}),_:1})],64))}},vs=Q(ms,[["__scopeId","data-v-96cea339"]]),bs={class:"container-fluid d-flex flex-row justify-content-center main-container"},ps={class:"container mt-5"},fs={key:0,class:"alert alert-success alert-dismissible fade show",role:"alert"},gs={class:"row g-3"},ys={class:"col-12 d-md-none"},_s={class:"row g-2"},hs={class:"col-12"},$s={class:"col-12"},ks={class:"col-12"},ws={class:"col-md-4 d-none d-md-block"},Ms={class:"col-md-4 d-none d-md-block"},xs={class:"col-md-4 d-none d-md-block"},Cs={class:"col-12 col-md-6"},Ss={class:"col-12 col-md-6"},As={class:"col-12 col-md-6"},Ns={class:"col-12 col-md-6"},Bs={class:"col-12 col-md-6"},Ts={class:"col-12 col-md-6"},Ds={class:"col-12 col-md-6"},Us={key:0,class:"text-danger small mt-1"},Vs={class:"col-12"},Es={class:"mt-4"},Is={key:0,class:"text-center mt-3 text-muted"},Ls={key:1,class:"table-responsive mt-2"},Rs={class:"table table-bordered table-striped align-middle"},Fs=["onClick"],Ps={class:"d-flex flex-column flex-md-row justify-content-between align-items-center mt-4 gap-3"},qs={key:1,class:"card mt-4 p-3 shadow-sm"},Os={class:"col-md-6"},js={class:"col-md-6"},Hs={class:"col-md-6"},Ws={class:"col-md-6"},zs={class:"col-12 d-flex justify-content-end gap-2 mt-3"},Gs={__name:"EditMember",props:{member:{type:Object,default:()=>({})}},setup(T){const M=T,t=de({first_name:"",last_name:"",address:"",contact_number:"",date_of_birth:"",purok:"",age:"",middle_name:"",status:"",occupation:"",gender:"",beneficiaries:[]}),p=r([]),v=r({name:"",relation:"",age:"",birth_date:""}),x=r(!1),_=r(""),i=async f=>{if(!f){console.log("No member ID provided");return}try{const l=await oe.get(route("beneficiaries.fetch",{member:f}));l.data.success?(p.value=l.data.data,console.log("Beneficiaries fetched successfully:",l.data.data)):console.error("Failed to fetch beneficiaries:",l.data.message)}catch(l){console.error("Error fetching beneficiaries:",l)}};j(()=>M.member,f=>{f&&(t.first_name=f.first_name||"",t.last_name=f.last_name||"",t.address=f.address||"",t.contact_number=f.contact_number||"",t.date_of_birth=f.date_of_birth||"",t.purok=f.purok||"",t.age=f.age||"",t.middle_name=f.middle_name||"",t.status=f.status||"",t.occupation=f.occupation||"",t.gender=f.gender||"",t.beneficiaries=f.beneficiaries||[],f.id&&i(f.id))},{immediate:!0,deep:!0});const h=()=>{if(t.clearErrors(),!/^0\d{10}$/.test(t.contact_number)){t.setError("contact_number","Contact number must start with 0 and be exactly 11 digits.");return}t.beneficiaries=p.value,t.put(route("members.update",M.member.id),{onSuccess:()=>{_.value="Member updated successfully!",setTimeout(()=>_.value="",4e3),i(M.member.id)},onError:l=>console.error("An error occurred => ",l)})},D=()=>{const f={...v.value,member_id:M.member.id};p.value.push(f),v.value={name:"",relation:"",age:"",birth_date:""},x.value=!1},b=f=>{p.value.splice(f,1)},I=f=>{if(!f)return"";const l={year:"numeric",month:"long",day:"numeric"};return new Date(f).toLocaleDateString(void 0,l)};return(f,l)=>(a(),n("div",bs,[e("div",ps,[_.value?(a(),n("div",fs,[W(c(_.value)+" ",1),e("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=d=>_.value="")})])):C("",!0),e("form",{onSubmit:J(h,["prevent"]),class:"form"},[e("div",gs,[e("div",ys,[e("div",_s,[e("div",hs,[k(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":l[1]||(l[1]=d=>o(t).first_name=d),required:""},null,512),[[A,o(t).first_name]])]),e("div",$s,[k(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":l[2]||(l[2]=d=>o(t).middle_name=d)},null,512),[[A,o(t).middle_name]])]),e("div",ks,[k(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":l[3]||(l[3]=d=>o(t).last_name=d)},null,512),[[A,o(t).last_name]])])])]),e("div",ws,[k(e("input",{type:"text",class:"form-control",placeholder:"First name","onUpdate:modelValue":l[4]||(l[4]=d=>o(t).first_name=d),required:""},null,512),[[A,o(t).first_name]])]),e("div",Ms,[k(e("input",{type:"text",class:"form-control",placeholder:"Middle name","onUpdate:modelValue":l[5]||(l[5]=d=>o(t).middle_name=d)},null,512),[[A,o(t).middle_name]])]),e("div",xs,[k(e("input",{type:"text",class:"form-control",placeholder:"Last name","onUpdate:modelValue":l[6]||(l[6]=d=>o(t).last_name=d)},null,512),[[A,o(t).last_name]])]),e("div",Cs,[l[21]||(l[21]=e("label",{class:"form-label"},"Birth date",-1)),k(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[7]||(l[7]=d=>o(t).date_of_birth=d)},null,512),[[A,o(t).date_of_birth]])]),e("div",Ss,[k(e("input",{type:"number",class:"form-control",placeholder:"Age","onUpdate:modelValue":l[8]||(l[8]=d=>o(t).age=d),required:""},null,512),[[A,o(t).age]])]),e("div",As,[k(e("select",{class:"form-select","onUpdate:modelValue":l[9]||(l[9]=d=>o(t).gender=d),required:""},l[22]||(l[22]=[e("option",{value:"",disabled:""},"Gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1)]),512),[[te,o(t).gender]])]),e("div",Ns,[k(e("select",{class:"form-select","onUpdate:modelValue":l[10]||(l[10]=d=>o(t).status=d),required:""},l[23]||(l[23]=[e("option",{value:"",disabled:""},"Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)]),512),[[te,o(t).status]])]),e("div",Bs,[k(e("input",{type:"text",class:"form-control",placeholder:"Purok","onUpdate:modelValue":l[11]||(l[11]=d=>o(t).purok=d),required:""},null,512),[[A,o(t).purok]])]),e("div",Ts,[k(e("input",{type:"text",class:"form-control",placeholder:"Occupation","onUpdate:modelValue":l[12]||(l[12]=d=>o(t).occupation=d),required:""},null,512),[[A,o(t).occupation]])]),e("div",Ds,[k(e("input",{type:"text",class:"form-control",placeholder:"Contact no.","onUpdate:modelValue":l[13]||(l[13]=d=>o(t).contact_number=d),pattern:"[0-9]*",inputmode:"numeric"},null,512),[[A,o(t).contact_number]]),o(t).errors.contact_number?(a(),n("div",Us,c(o(t).errors.contact_number),1)):C("",!0)]),e("div",Vs,[k(e("input",{type:"text",class:"form-control",placeholder:"Address","onUpdate:modelValue":l[14]||(l[14]=d=>o(t).address=d),required:""},null,512),[[A,o(t).address]])])]),e("div",Es,[l[25]||(l[25]=e("h5",{class:"text-dark fw-light"},"Beneficiary",-1)),p.value.length===0?(a(),n("div",Is," No beneficiary added ")):(a(),n("div",Ls,[e("table",Rs,[l[24]||(l[24]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"Name"),e("th",null,"Relation"),e("th",null,"Age"),e("th",null,"Birthdate"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),n(z,null,Z(p.value,(d,H)=>(a(),n("tr",{key:H},[e("td",null,c(d.name),1),e("td",null,c(d.relation),1),e("td",null,c(d.age),1),e("td",null,c(I(d.birth_date)),1),e("td",null,[e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:P=>b(H)}," Delete ",8,Fs)])]))),128))])])]))]),e("div",Ps,[x.value?C("",!0):(a(),n("button",{key:0,class:"btn btn-primary w-100 w-md-auto",type:"button",onClick:l[15]||(l[15]=d=>x.value=!0)}," Add Beneficiary ")),l[26]||(l[26]=e("button",{class:"btn btn-success w-100 w-md-auto",type:"submit"},"Save",-1))])],32),x.value?(a(),n("div",qs,[l[29]||(l[29]=e("h5",{class:"mb-3"},"Add Beneficiary",-1)),e("form",{onSubmit:J(D,["prevent"]),class:"row g-2"},[e("div",Os,[k(e("input",{type:"text",placeholder:"Name",class:"form-control","onUpdate:modelValue":l[16]||(l[16]=d=>v.value.name=d),required:""},null,512),[[A,v.value.name]])]),e("div",js,[k(e("input",{type:"text",placeholder:"Relation",class:"form-control","onUpdate:modelValue":l[17]||(l[17]=d=>v.value.relation=d),required:""},null,512),[[A,v.value.relation]])]),e("div",Hs,[k(e("input",{type:"number",placeholder:"Age",class:"form-control","onUpdate:modelValue":l[18]||(l[18]=d=>v.value.age=d),required:""},null,512),[[A,v.value.age]])]),e("div",Ws,[l[27]||(l[27]=e("label",{class:"form-label small"},"Birthdate",-1)),k(e("input",{type:"date",class:"form-control","onUpdate:modelValue":l[19]||(l[19]=d=>v.value.birth_date=d),required:""},null,512),[[A,v.value.birth_date]])]),e("div",zs,[e("button",{type:"button",class:"btn btn-secondary",onClick:l[20]||(l[20]=d=>x.value=!1)}," Cancel "),l[28]||(l[28]=e("button",{type:"submit",class:"btn btn-primary"},"Save Beneficiary",-1))])],32)])):C("",!0)])]))}},Ys=Q(Gs,[["__scopeId","data-v-881cc22e"]]),Ks={class:"main-section bg-light"},Js={class:"container table-container"},Qs={class:"search-box mb-3 position-relative"},Xs={key:0,class:"spinner-border text-primary spinner-sm position-absolute end-0 top-50 translate-middle-y me-3",role:"status"},Zs={class:"table-responsive"},el={class:"table table-bordered align-middle text-center"},tl={key:0},sl={key:1},ll={colspan:"9",class:"text-danger text-center"},ol={class:"text-start"},al={class:"status-cell"},nl={class:"status-toggle"},rl={class:"toggle-switch"},il=["checked","onChange"],dl={class:"status-cell"},ul={class:"status-toggle"},cl={class:"toggle-switch"},ml=["data-member-id","checked","onClick"],vl={class:"actions-column"},bl={class:"action-buttons-large"},pl=["onClick"],fl=["onClick"],gl={class:"action-buttons-small"},yl=["onClick"],_l={key:2},hl={key:0,class:"pagination-wrapper mt-3 mb-5"},$l={class:"pagination-controls"},kl=["onClick","innerHTML"],wl={class:"list-unstyled m-0"},Ml={class:"modal fade",id:"editMember",tabindex:"-1"},xl={class:"modal-dialog modal-lg"},Cl={class:"modal-content"},Sl={class:"modal-body"},Al={class:"custom-modal"},Nl={class:"custom-modal-header"},Bl={class:"custom-modal-body"},Tl={key:2,class:"custom-loading-modal"},Dl={class:"loading-content"},Ul={class:"mt-2"},Vl=400,El={__name:"RegisteredMember",props:{members:{type:Object,default:()=>({data:[],links:[],prev_page_url:null,next_page_url:null})},deceasedMember:{type:Array,default:()=>[]}},setup(T){const M=be(),t=T,p=r([]),v=r(!1),x=r({top:"0px",left:"0px"}),_=r(null),i=r(!1),h=r(""),D=r(""),b=r([]),I=r({}),f=r(!1),l=r({}),d=r(!1),H=r(""),P=r(null);r(!1),r([]);const L=r(!1),q=r("");r([]),j(()=>t.members,y=>{p.value=y.data||[]},{immediate:!0}),j(()=>t.deceasedMember,y=>{b.value=y.data||[]},{immediate:!0});let S=null;j(D,y=>{S&&clearTimeout(S),S=setTimeout(()=>s(String(y||"").trim()),Vl)});async function s(y){if(!y){p.value=t.members.data,console.log("Search cleared â€” showing default members:",p.value),d.value=!1;return}d.value=!0,H.value="",console.log(`ðŸ” Searching for: "${y}"`);try{const m=await oe.get(route("members.search"),{params:{query:y}});console.log(" Raw Axios response:",m),console.log(" Response data:",m.data);let g=[];const B=(m==null?void 0:m.data)||{};if(Array.isArray(B.members))g=B.members;else if(B.members&&Array.isArray(B.members.data))g=B.members.data;else if(B.member&&typeof B.member=="object")g=[B.member];else if(Array.isArray(B.data))g=B.data;else{const R=Object.values(B).find(ae=>{var Y;return Array.isArray(ae)&&((Y=ae[0])==null?void 0:Y.id)});R&&(g=R)}console.log("ðŸ§¾ Normalized members array to display:",g),p.value=g}catch{}finally{d.value=!1}}const u=y=>{confirm("Are you sure you want to trash this member?")&&se.delete(route("deleteMember",{id:y}),{onSuccess:()=>{alert("Member trashed"),v.value=!1}})},N=async y=>{const m=y.status==="active"?"inactive":"active";q.value=`${y.first_name} ${y.middle_name} ${y.last_name}`,L.value=!0;try{se.put(route("toggleMemberStatus",{id:y.id}),{status:m},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{const g=p.value.map(B=>B.id===y.id?{...B,status:m}:B);p.value=g,i.value=m==="active",h.value=q.value},onError:g=>{console.error("Failed to toggle status:",g)},onFinish:()=>{setTimeout(()=>{L.value=!1},1500)}})}catch(g){console.error("Failed to toggle status:",g),setTimeout(()=>{L.value=!1},1500)}},w=(y,m)=>{if(v.value&&_.value===m){v.value=!1,_.value=null;return}_.value=m,v.value=!0,ke(()=>{const g=y.currentTarget.getBoundingClientRect(),B=document.querySelector(".actions-popup");if(!B)return;const R=B.offsetWidth,ae=window.innerWidth;let Y=g.right+window.scrollX+10;Y+R>ae&&(Y=g.left+window.scrollX-R-10,Y<0&&(Y=10)),x.value={top:`${g.top+window.scrollY}px`,left:`${Y}px`}})},E=y=>{v.value&&y.target&&!y.target.closest(".actions-popup")&&!y.target.closest(".three-dots-button")&&(v.value=!1,_.value=null)};le(()=>document.addEventListener("click",E)),_e(()=>document.removeEventListener("click",E));const ee=y=>{y&&se.visit(y,{preserveState:!0})},re=y=>{I.value=y||null,f.value=!0,P.value=(y==null?void 0:y.id)||null},U=()=>{if(f.value=!1,P.value){const y=document.querySelector(`input[type="checkbox"][data-member-id="${P.value}"]`);y&&(y.checked=!1),P.value=null}M.setText("Add Deceased Info.")},$=y=>{v.value=!1,l.value={...y}};document.getElementById("memberModalOverlay"),document.getElementById("memberModal"),document.getElementById("createBtn"),document.getElementById("closeBtn");const V=O(()=>{var y;return p.value.length<=5?[{label:"1",url:((y=t.members.links[0])==null?void 0:y.url)||null,active:!0}]:t.members.links}),G=O(()=>!(D.value.trim()!==""&&p.value.length===0||!t.members.links||t.members.links.length<=1));return(y,m)=>(a(),n(z,null,[F(o(he),{title:"Registered members"}),F(we,null,{default:X(()=>[e("div",Ks,[F(xt),F(St,{status:i.value,name:h.value},null,8,["status","name"]),e("div",Js,[e("div",Qs,[k(e("input",{type:"text",class:"form-control search-input",placeholder:"Search members by name, contact, or purok...","onUpdate:modelValue":m[0]||(m[0]=g=>D.value=g)},null,512),[[A,D.value]]),d.value?(a(),n("div",Xs,m[3]||(m[3]=[e("span",{class:"visually-hidden"},"Loading...",-1)]))):C("",!0)]),e("div",Zs,[e("table",el,[m[12]||(m[12]=e("thead",{class:"table-light"},[e("tr",null,[e("th",null,"NAME"),e("th",null,"GENDER"),e("th",null,"AGE"),e("th",null,"CONTACT NO."),e("th",null,"STREET"),e("th",null,"STATUS"),e("th",null,"DECEASED"),e("th",null,"ACTION")])],-1)),e("tbody",null,[d.value?(a(),n("tr",tl,m[4]||(m[4]=[e("td",{colspan:"9",class:"text-center"},[e("div",{class:"spinner-border text-info",role:"status"}),e("p",{class:"mt-2 text-muted"},"Searching...")],-1)]))):C("",!0),H.value&&!d.value?(a(),n("tr",sl,[e("td",ll,c(H.value),1)])):C("",!0),(a(!0),n(z,null,Z(p.value,(g,B)=>(a(),n("tr",{key:B},[e("td",ol,c(g.first_name)+" "+c(g.middle_name)+" "+c(g.last_name),1),e("td",null,c(g.gender||"N/A"),1),e("td",null,c(g.age),1),e("td",null,c(g.contact_number),1),e("td",null,c(g.purok),1),e("td",al,[e("div",nl,[e("label",rl,[e("input",{type:"checkbox",checked:g.status==="active",onChange:R=>N(g)},null,40,il),m[5]||(m[5]=e("span",{class:"toggle-slider"},null,-1))]),e("span",{class:K(["status-label",g.status==="active"?"active":"inactive"])},c(g.status==="active"?"Active":"Inactive"),3)])]),e("td",dl,[e("div",ul,[e("label",cl,[e("input",{type:"checkbox","data-member-id":g.id,checked:b.value.some(R=>R.member_id===g.id),onClick:R=>re(g)},null,8,ml),m[6]||(m[6]=e("span",{class:"toggle-slider"},null,-1))])])]),e("td",vl,[e("div",bl,[F(o(ue),{href:y.route("viewMemberInfo",{id:g.id}),class:"me-1"},{default:X(()=>m[7]||(m[7]=[e("i",{class:"bi bi-eye"},null,-1)])),_:2},1032,["href"]),e("button",{"data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:R=>$(g),class:"me-1"},m[8]||(m[8]=[e("i",{class:"bi bi-pencil"},null,-1)]),8,pl),e("button",{onClick:R=>u(g.id)},m[9]||(m[9]=[e("i",{class:"bi bi-trash"},null,-1)]),8,fl)]),e("div",gl,[e("button",{class:"btn btn-sm btn-outline-dark three-dots-button",onClick:J(R=>w(R,g.id),["stop"])},m[10]||(m[10]=[e("i",{class:"bi bi-three-dots-vertical"},null,-1)]),8,yl)])])]))),128)),!d.value&&p.value.length===0?(a(),n("tr",_l,m[11]||(m[11]=[e("td",{colspan:"9",class:"text-center text-muted"},"No members found",-1)]))):C("",!0)])])]),G.value?(a(),n("div",hl,[e("div",$l,[(a(!0),n(z,null,Z(V.value,(g,B)=>(a(),n("button",{key:B,class:K(["btn pagination-btn",g.active?"btn-primary":"btn-outline-primary"]),onClick:R=>ee(g.url),innerHTML:g.label},null,10,kl))),128))])])):C("",!0)])]),v.value?(a(),n("div",{key:0,class:"actions-popup bg-white border rounded shadow-sm p-2",style:$e({top:x.value.top,left:x.value.left})},[e("ul",wl,[e("li",null,[F(o(ue),{href:y.route("viewMemberInfo",{id:_.value}),class:"dropdown-item"},{default:X(()=>m[13]||(m[13]=[e("i",{class:"bi bi-eye me-2"},null,-1),W(" View")])),_:1},8,["href"])]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start","data-bs-toggle":"modal","data-bs-target":"#editMember",onClick:m[1]||(m[1]=g=>$(p.value.find(B=>B.id===_.value)))},m[14]||(m[14]=[e("i",{class:"bi bi-pencil me-2"},null,-1),W(" Edit")]))]),e("li",null,[e("button",{class:"dropdown-item w-100 text-start text-danger",onClick:m[2]||(m[2]=g=>u(_.value))},m[15]||(m[15]=[e("i",{class:"bi bi-trash me-2"},null,-1),W(" Delete")]))])])],4)):C("",!0),e("div",Ml,[e("div",xl,[e("div",Cl,[m[16]||(m[16]=e("div",{class:"modal-header"},[e("h5",null,"Edit Member Info"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",Sl,[F(Ys,{member:l.value},null,8,["member"])])])])]),f.value?(a(),n("div",{key:1,class:"custom-modal-overlay",onClick:J(U,["self"])},[e("div",Al,[e("div",Nl,[e("h3",null,c(o(M).currentText||""),1),e("span",{class:"close-icon",onClick:U},"Ã—")]),e("div",Bl,[F(vs,{deceasedMember:I.value},null,8,["deceasedMember"])])])])):C("",!0),L.value?(a(),n("div",Tl,[e("div",Dl,[m[17]||(m[17]=e("div",{class:"spinner-border text-primary",role:"status"},null,-1)),e("p",Ul,"Updating status for "+c(q.value)+"...",1)])])):C("",!0)]),_:1})],64))}},Pl=Q(El,[["__scopeId","data-v-9b538b74"]]);export{Pl as default};
